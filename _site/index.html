<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>黄天霸</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
    <meta name="keywords" content="your keywords, separated by commas" />
    <meta name="author" content="LastName FirstName">
    <link rel="canonical" href="https://github.com/jeromelachaud/freelancer-theme/">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Custom CSS & Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link rel="stylesheet" href="/style.css">

    <!-- Google verification -->
    

    <!-- Bing Verification -->
    

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/font-awesome/css/rouge.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

    <body id="page-top" class="index">
       <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top">黄天霸</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <!-- 栏目添加: 添加新栏目需要在这里加模板   -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
<!--                    <li class="page-scroll">-->
<!--                        <a href="#portfolio">Portfolio</a>-->
<!--                    </li> -->
                    <li class="page-scroll">
                        <a href="#home">Home</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#spring">Spring</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#springboot">SpringBoot</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#algorithm">Algorithm</a>
                    </li>
<!--                    <li class="page-scroll">-->
<!--                        <a href="#about">About</a>-->
<!--                    </li>-->
<!--                    <li class="page-scroll">-->
<!--                        <a href="#contact">Contact</a>-->
<!--                    </li>-->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
    <!-- Header -->
<header>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <img class="img-responsive" src="img/profile.png" alt="profile-pic" />
        <div class="intro-text">
          <span class="name">黄天霸</span>
          <hr class="star-light" />
          <span class="skills">FUCK ALL</span>
        </div>
      </div>
    </div>
  </div>
</header>

    <!-- 栏目添加: 添加新栏目需要在这里加模板  这里需要将html删除 注释掉还是会显示 -->
    
    <!-- Home Page -->
    <section id="home">
        <div class="container portfolio-flex-grid">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Home</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="portfolio-flex-row">
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000004" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>SpringBootApplication Run方法解析(二):createApplicationContext</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-anastasia-pavlova-8692301.jpg" class="img-responsive" alt="SpringBoot4">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000003" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>SpringBootApplication Run方法解析(一):prepareEnvironment</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-rachel-claire-5490361.jpg" class="img-responsive" alt="SpringBoot3">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000002" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>SpringBootApplication构造方法分析</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-irina-iriser-1122625.jpg" class="img-responsive" alt="SpringBoot2">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000010" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>二分查找</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-victoria-borodinova-9201864.jpg" class="img-responsive" alt="BinarySearch">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000011" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>二查叉找树</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-julia-volk-5273316.jpg" class="img-responsive" alt="BinarySearchTree">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000009" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>二叉树基本概念</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-karina-zhukovskaya-7260333.jpg" class="img-responsive" alt="binaryTree">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000008" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>基数排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-roman-odintsov-5327786.jpg" class="img-responsive" alt="radixSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000007" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>希尔排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-alena-beliaeva-8697338.jpg" class="img-responsive" alt="shellSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000006" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>归并排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-anete-lusina-5721167.jpg" class="img-responsive" alt="mergeSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000005" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>选择排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-8906527.jpg" class="img-responsive" alt="selectSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000004" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>插入排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-nick-wehrli-6524730.jpg" class="img-responsive" alt="insertSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000003" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>堆排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-valeriya-kobzar-8155476.jpg" class="img-responsive" alt="heapSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000002" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>快速排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-jo-jesus-4198220.jpg" class="img-responsive" alt="quickSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000001" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>冒泡排序</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-rachel-claire-4846299.jpg" class="img-responsive" alt="bubbleSort">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000001" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>SpringBootApplication注解分析</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-david-selbert-6468061.jpg" class="img-responsive" alt="SpringBoot1">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-9" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>spring</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-8802433.jpg" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-7" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>spring</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-luizclas-556666.jpg" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-1" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</p>

                                </div>
                            </div>
                            <img src="img/portfolio/cabin.png" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-2" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</p>

                                </div>
                            </div>
                            <img src="img/portfolio/cake.png" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-3" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</p>

                                </div>
                            </div>
                            <img src="img/portfolio/circus.png" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-4" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</p>

                                </div>
                            </div>
                            <img src="img/portfolio/game.png" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-6" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</p>

                                </div>
                            </div>
                            <img src="img/portfolio/submarine.png" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
                    <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-5" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</p>

                                </div>
                            </div>
                            <img src="img/portfolio/safe.png" class="img-responsive" alt="image-alt">

                        </a>
                    </div>
                
            </div>
        </div>
    </section>
    <!-- 指定的栏目下的内容需要加上指定的标记为true使用 if标签  标志位添加在posts中的markdown中  还需要设置main.css中的样式-->
    <!-- Spring -->
    <section id="spring">
        <div class="container portfolio-flex-grid">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Spring</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="portfolio-flex-row">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-9" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Project 9</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-8802433.jpg" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-7" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Project 7</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-luizclas-556666.jpg" class="img-responsive" alt="image-alt">
                        </a>
                    </div>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    </section>
    
    <!-- Spring Boot -->
    <section id="springboot">
        <div class="container portfolio-flex-grid">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Spring Boot</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="portfolio-flex-row">
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000004" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Springboot4</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-anastasia-pavlova-8692301.jpg" class="img-responsive" alt="SpringBoot4">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000003" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Springboot3</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-rachel-claire-5490361.jpg" class="img-responsive" alt="SpringBoot3">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000002" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Springboot2</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-irina-iriser-1122625.jpg" class="img-responsive" alt="SpringBoot2">
                        </a>
                    </div>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-20000001" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Springboot1</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-david-selbert-6468061.jpg" class="img-responsive" alt="SpringBoot1">
                        </a>
                    </div>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    </section>
    
    <!-- Spring Boot -->
    <section id="algorithm">
        <div class="container portfolio-flex-grid">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>算法与数据结构</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="portfolio-flex-row">
                
                    
                
                    
                
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000010" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Binarysearch</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-victoria-borodinova-9201864.jpg" class="img-responsive" alt="BinarySearch">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000011" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Binarysearchtree</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-julia-volk-5273316.jpg" class="img-responsive" alt="BinarySearchTree">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000009" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Binarytree</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-karina-zhukovskaya-7260333.jpg" class="img-responsive" alt="binaryTree">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000008" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Radixsort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-roman-odintsov-5327786.jpg" class="img-responsive" alt="radixSort">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000007" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Shellsort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-alena-beliaeva-8697338.jpg" class="img-responsive" alt="shellSort">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000006" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Mergesort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-anete-lusina-5721167.jpg" class="img-responsive" alt="mergeSort">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000005" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Selectsort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-8906527.jpg" class="img-responsive" alt="selectSort">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000004" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Insertsort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-nick-wehrli-6524730.jpg" class="img-responsive" alt="insertSort">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000003" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Heapsort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-valeriya-kobzar-8155476.jpg" class="img-responsive" alt="heapSort">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000002" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Quicksort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-jo-jesus-4198220.jpg" class="img-responsive" alt="quickSort">
                        </a>
                    </div>
                    
                
                    
                <div class="portfolio-flex-item portfolio-item">
                        <a href="#portfolioModal-10000001" class="portfolio-link" data-toggle="modal">
                            <div class="caption">
                                <div class="caption-content">
                                    <i class="fa fa-search-plus fa-3x"></i>
                                    <p>Bubblesort</p>

                                </div>
                            </div>
                            <img src="img/portfolio/pexels-rachel-claire-4846299.jpg" class="img-responsive" alt="bubbleSort">
                        </a>
                    </div>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    </section>

        <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4">
                        <h3>China</h3>
                        <p>
                            
                                3481 Melrose Place <br>
		                    
                                Beverly Hills, CA 90210 <br>
		                    
                        </p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Around the Web</h3>
                        <ul class="list-inline">
                            
                            <li>
                                <a href="http://github.com/BiggerYellow" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                            </li>
		                    
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Credits</h3>
                        <p>Freelancer is a free to use, open source Bootstrap theme created by <a href="http://startbootstrap.com">Start Bootstrap</a>.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; Hcc 2021
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll visible-xs visible-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

     <!-- Portfolio Modals -->
 
    <div class="portfolio-modal modal fade" id="portfolioModal-20000004" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>SpringBoot启动源码解析(三)</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-anastasia-pavlova-8692301.jpg" class="img-responsive img-centered" alt="SpringBoot4">

                            
                                <h3>SpringBootApplication Run方法解析(二):createApplicationContext</h3>
                            
                            </div>

                            <p><h3 id="run方法入口createapplicationcontext">Run方法入口:createApplicationContext</h3>
<hr />
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Run the Spring application, creating and refreshing a new
 * {@link ApplicationContext}.
 * 运行Spring应用，创建和刷新一个新的应用上下文
 * @param args the application arguments (usually passed from a Java main method)
 * @return a running {@link ApplicationContext}
 */</span>
<span class="kd">public</span> <span class="nc">ConfigurableApplicationContext</span> <span class="nf">run</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//1.创建启动计时器</span>
    <span class="nc">StopWatch</span> <span class="n">stopWatch</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StopWatch</span><span class="o">();</span>
    <span class="n">stopWatch</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="c1">//创建启动上下文并初始化相应的Bootstrapper 目前暂未使用</span>
    <span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">SpringBootExceptionReporter</span><span class="o">&gt;</span> <span class="n">exceptionReporters</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="c1">//设置系统的配置模式，一般用于服务端开发 默认为true</span>
    <span class="n">configureHeadlessProperty</span><span class="o">();</span>
    <span class="c1">//获取spring上下文启动监听者  从META-INF/spring.factories中获取SpringApplicationRunListener的实现类并加载</span>
    <span class="nc">SpringApplicationRunListeners</span> <span class="n">listeners</span> <span class="o">=</span> <span class="n">getRunListeners</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
    <span class="c1">//发布启动中事件</span>
    <span class="n">listeners</span><span class="o">.</span><span class="na">starting</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">//2.创建默认上下文参数</span>
        <span class="nc">ApplicationArguments</span> <span class="n">applicationArguments</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultApplicationArguments</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
        <span class="c1">//3.准备环境，将资源属性添加到环境中并与上下文绑定</span>
        <span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span> <span class="o">=</span> <span class="n">prepareEnvironment</span><span class="o">(</span><span class="n">listeners</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">);</span>
        <span class="c1">//设置spring.beaninfo.ignore中过滤的bean</span>
        <span class="n">configureIgnoreBeanInfo</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
        <span class="c1">//打印spring标记</span>
        <span class="nc">Banner</span> <span class="n">printedBanner</span> <span class="o">=</span> <span class="n">printBanner</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
        <span class="c1">//4.根据web应用类型创建指定的应用上下文</span>
        <span class="c1">//注意:这里反射创建AnnotationConfigServletWebServerApplicationContext时,构造中创建AnnotatedBeanDefinitionReader中的AnnotationConfigUtils.registerAnnotationConfigProcessors(this.registry)方法很重要</span>
        <span class="c1">//它将几个常见的BeanPostProcessor和BeanFactoryPostProcessor注册到注册表中  最重要的是internalConfigurationAnnotationProcessor来解析Configuration的配置类</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">createApplicationContext</span><span class="o">();</span>
        <span class="n">exceptionReporters</span> <span class="o">=</span> <span class="n">getSpringFactoriesInstances</span><span class="o">(</span><span class="nc">SpringBootExceptionReporter</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                <span class="k">new</span> <span class="nc">Class</span><span class="o">[]</span> <span class="o">{</span> <span class="nc">ConfigurableApplicationContext</span><span class="o">.</span><span class="na">class</span> <span class="o">},</span> <span class="n">context</span><span class="o">);</span>
        <span class="c1">//5.准备上下文</span>
        <span class="c1">//主要做了两件事:</span>
        <span class="c1">// 1.调用前面实例化的ApplicationContextInitializer的initialize方式初始化上下文</span>
        <span class="c1">// 2.在其中的load方法中将启动主函数bean定义注册到注册表中 beanDefinitionMap</span>
        <span class="n">prepareContext</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">environment</span><span class="o">,</span> <span class="n">listeners</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">,</span> <span class="n">printedBanner</span><span class="o">);</span>
        <span class="c1">//6.刷新上下文</span>
        <span class="n">refreshContext</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="n">afterRefresh</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">);</span>
        <span class="n">stopWatch</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">logStartupInfo</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">new</span> <span class="nf">StartupInfoLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mainApplicationClass</span><span class="o">).</span><span class="na">logStarted</span><span class="o">(</span><span class="n">getApplicationLog</span><span class="o">(),</span> <span class="n">stopWatch</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//监听者发布已启动事件</span>
        <span class="n">listeners</span><span class="o">.</span><span class="na">started</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="c1">//7.调用所有的ApplicationRunner和CommandLineRunner的实现类</span>
        <span class="n">callRunners</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">handleRunFailure</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">ex</span><span class="o">,</span> <span class="n">exceptionReporters</span><span class="o">,</span> <span class="n">listeners</span><span class="o">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">//监听者发布运行中事件</span>
        <span class="n">listeners</span><span class="o">.</span><span class="na">running</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">handleRunFailure</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">ex</span><span class="o">,</span> <span class="n">exceptionReporters</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">context</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>本章我们主要看下createApplicationContext:</p>
<ol>
  <li>第四步就是通过反射创建 <strong>ApplicationContext</strong> ,相关源码如下:</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * The class name of application context that will be used by default for non-web
 * environments.
 * 默认情况下将用于非web环境的应用程序上下文的类名
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">DEFAULT_CONTEXT_CLASS</span> <span class="o">=</span> <span class="s">"org.springframework.context."</span>
        <span class="o">+</span> <span class="s">"annotation.AnnotationConfigApplicationContext"</span><span class="o">;</span>

<span class="cm">/**
 * The class name of application context that will be used by default for web
 * environments.
 * 默认情况下将用于web环境的应用程序上下文的类名
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">DEFAULT_SERVLET_WEB_CONTEXT_CLASS</span> <span class="o">=</span> <span class="s">"org.springframework.boot."</span>
        <span class="o">+</span> <span class="s">"web.servlet.context.AnnotationConfigServletWebServerApplicationContext"</span><span class="o">;</span>

<span class="cm">/**
 * The class name of application context that will be used by default for reactive web
 * environments.
 * 默认情况下将用于reactive web环境的应用程序上下文的类名
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">DEFAULT_REACTIVE_WEB_CONTEXT_CLASS</span> <span class="o">=</span> <span class="s">"org.springframework."</span>
        <span class="o">+</span> <span class="s">"boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext"</span><span class="o">;</span>

<span class="cm">/**
 * Strategy method used to create the {@link ApplicationContext}. By default this
 * method will respect any explicitly set application context or application context
 * class before falling back to a suitable default.
 * 创建应用上下文使用的策略方法.默认情况下,此方法将在回退到合适的默认值之前尊重任何显示设置的应用程序上下文或类.
 */</span>
<span class="kd">protected</span> <span class="nc">ConfigurableApplicationContext</span> <span class="nf">createApplicationContext</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">contextClass</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">applicationContextClass</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">contextClass</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">switch</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">webApplicationType</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//通常我们的上下文默认是Servlet类型,实例化AnnotationConfigServletWebServerApplicationContext</span>
            <span class="k">case</span> <span class="nl">SERVLET:</span>
                <span class="n">contextClass</span> <span class="o">=</span> <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="no">DEFAULT_SERVLET_WEB_CONTEXT_CLASS</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="nl">REACTIVE:</span>
                <span class="n">contextClass</span> <span class="o">=</span> <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="no">DEFAULT_REACTIVE_WEB_CONTEXT_CLASS</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="n">contextClass</span> <span class="o">=</span> <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="no">DEFAULT_CONTEXT_CLASS</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span>
                    <span class="s">"Unable create a default ApplicationContext, please specify an ApplicationContextClass"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="c1">//真正的实例化位置</span>
    <span class="k">return</span> <span class="o">(</span><span class="nc">ConfigurableApplicationContext</span><span class="o">)</span> <span class="nc">BeanUtils</span><span class="o">.</span><span class="na">instantiateClass</span><span class="o">(</span><span class="n">contextClass</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>因为我们的应用类型为 <strong>SERVLET</strong> ,所以应该初始化 <strong>AnnotationConfigServletWebServerApplicationContext</strong> , 下面我们继续看下实例化 <strong>AnnotationConfigServletWebServerApplicationContext</strong> 的源码:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Create a new {@link AnnotationConfigServletWebServerApplicationContext} that needs
 * to be populated through {@link #register} calls and then manually
 * {@linkplain #refresh refreshed}.
 * 创建新的AnnotationConfigServletWebServerApplicationContext, 他需要通过通过register调用填充然后手动refreshed
 */</span>
<span class="kd">public</span> <span class="nf">AnnotationConfigServletWebServerApplicationContext</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotatedBeanDefinitionReader</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ClassPathBeanDefinitionScanner</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>我们首先来看下 <strong>AnnotationConfigServletWebServerApplicationContext</strong> 的作用:接受带有 <strong>@Configuration</strong> 、 <strong>@Component</strong> 和 <strong>inject</strong> 注解的类,可以指定类进行注册同样可以根据类路径扫描来注册.<br />
在它的无参构造中,它又创建了 <strong>AnnotatedBeanDefinitionReader</strong> 和 <strong>ClassPathBeanDefinitionScanner</strong> .<br />
其中 <strong>AnnotatedBeanDefinitionReader</strong> 的作用是以编程方式注册Bean类; <strong>ClassPathBeanDefinitionScanner</strong> 的作用是扫描类路径下所有以 <strong>@Component、@Repository、@Service、@Controller、ManagedBean、Named</strong> 等注解修饰的类,并注册相关的bean定义.</p>

<p>4.1 首先我们先看下 <strong>AnnotatedBeanDefinitionReader</strong> 的源码:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">AnnotatedBeanDefinitionReader</span><span class="o">(</span><span class="nc">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">getOrCreateEnvironment</span><span class="o">(</span><span class="n">registry</span><span class="o">));</span>
<span class="o">}</span>

<span class="cm">/**
 * Create a new {@code AnnotatedBeanDefinitionReader} for the given registry,
 * using the given {@link Environment}.
 * 使用给定的注册表和环境创建AnnotatedBeanDefinitionReader
 */</span>
<span class="kd">public</span> <span class="nf">AnnotatedBeanDefinitionReader</span><span class="o">(</span><span class="nc">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="o">,</span> <span class="nc">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="s">"BeanDefinitionRegistry must not be null"</span><span class="o">);</span>
    <span class="nc">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="s">"Environment must not be null"</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">registry</span> <span class="o">=</span> <span class="n">registry</span><span class="o">;</span>
    <span class="c1">//创建用于处理@Conditional注解的内部类</span>
    <span class="k">this</span><span class="o">.</span><span class="na">conditionEvaluator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConditionEvaluator</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">environment</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="c1">//这里是最重要的地方,注册了多个后置处理器,供后面创建bean的时候调用</span>
    <span class="nc">AnnotationConfigUtils</span><span class="o">.</span><span class="na">registerAnnotationConfigProcessors</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">registry</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>可见 <strong>AnnotatedBeanDefinitionReader</strong> 主构造中最重要的就是 <strong>AnnotationConfigUtils.registerAnnotationConfigProcessors(this.registry)</strong> 这个方法,我们继续往下看看:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * The bean name of the internally managed Configuration annotation processor.
 * 内部管理的配置注解处理器的bean名称
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">CONFIGURATION_ANNOTATION_PROCESSOR_BEAN_NAME</span> <span class="o">=</span>
        <span class="s">"org.springframework.context.annotation.internalConfigurationAnnotationProcessor"</span><span class="o">;</span>

<span class="cm">/**
 * The bean name of the internally managed Autowired annotation processor.
 * 内部管理的自动注入注解处理器的bean名称
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">AUTOWIRED_ANNOTATION_PROCESSOR_BEAN_NAME</span> <span class="o">=</span>
        <span class="s">"org.springframework.context.annotation.internalAutowiredAnnotationProcessor"</span><span class="o">;</span>

<span class="cm">/**
 * The bean name of the internally managed JSR-250 annotation processor.
 * 内部管理的JSR-250注解处理器的bean名称
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">COMMON_ANNOTATION_PROCESSOR_BEAN_NAME</span> <span class="o">=</span>
        <span class="s">"org.springframework.context.annotation.internalCommonAnnotationProcessor"</span><span class="o">;</span>

<span class="cm">/**
 * The bean name of the internally managed JPA annotation processor.
 * 内部处理的JPA注解处理器的bean名称
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">PERSISTENCE_ANNOTATION_PROCESSOR_BEAN_NAME</span> <span class="o">=</span>
        <span class="s">"org.springframework.context.annotation.internalPersistenceAnnotationProcessor"</span><span class="o">;</span>

<span class="cm">/**
 * The bean name of the internally managed @EventListener annotation processor.
 * 内部处理的@EventListener注解处理器的bean名称
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">EVENT_LISTENER_PROCESSOR_BEAN_NAME</span> <span class="o">=</span>
        <span class="s">"org.springframework.context.event.internalEventListenerProcessor"</span><span class="o">;</span>

<span class="cm">/**
 * The bean name of the internally managed EventListenerFactory.
 * 内部处理的EventListenerFactory的bean名称
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">EVENT_LISTENER_FACTORY_BEAN_NAME</span> <span class="o">=</span>
        <span class="s">"org.springframework.context.event.internalEventListenerFactory"</span><span class="o">;</span>

<span class="cm">/**
 * Register all relevant annotation post processors in the given registry.
 * 在给定的注册表中注册所有相关注解的后置处理器
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">BeanDefinitionHolder</span><span class="o">&gt;</span> <span class="nf">registerAnnotationConfigProcessors</span><span class="o">(</span>
        <span class="nc">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Object</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//获取最原始的bean工厂</span>
    <span class="nc">DefaultListableBeanFactory</span> <span class="n">beanFactory</span> <span class="o">=</span> <span class="n">unwrapDefaultListableBeanFactory</span><span class="o">(</span><span class="n">registry</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">beanFactory</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//设置AnnotationAwareOrderComparator,主要用于 @Order和@Priority的排序功能</span>
        <span class="k">if</span> <span class="o">(!(</span><span class="n">beanFactory</span><span class="o">.</span><span class="na">getDependencyComparator</span><span class="o">()</span> <span class="k">instanceof</span> <span class="nc">AnnotationAwareOrderComparator</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">beanFactory</span><span class="o">.</span><span class="na">setDependencyComparator</span><span class="o">(</span><span class="nc">AnnotationAwareOrderComparator</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//设置ContextAnnotationAutowireCandidateResolver,主要提供对限定符注解以及@Lazy注解的懒加载</span>
        <span class="k">if</span> <span class="o">(!(</span><span class="n">beanFactory</span><span class="o">.</span><span class="na">getAutowireCandidateResolver</span><span class="o">()</span> <span class="k">instanceof</span> <span class="nc">ContextAnnotationAutowireCandidateResolver</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">beanFactory</span><span class="o">.</span><span class="na">setAutowireCandidateResolver</span><span class="o">(</span><span class="k">new</span> <span class="nc">ContextAnnotationAutowireCandidateResolver</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">BeanDefinitionHolder</span><span class="o">&gt;</span> <span class="n">beanDefs</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashSet</span><span class="o">&lt;&gt;(</span><span class="mi">8</span><span class="o">);</span>
    <span class="c1">//创建ConfigurationClassPostProcessor后置处理器bean定义,并注册到bean工厂中</span>
    <span class="c1">//ConfigurationClassPostProcessor的主要作用就是在启动时处理@Configuration修饰的类,其实就是我们的主函数对应的类</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">registry</span><span class="o">.</span><span class="na">containsBeanDefinition</span><span class="o">(</span><span class="no">CONFIGURATION_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">RootBeanDefinition</span> <span class="n">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RootBeanDefinition</span><span class="o">(</span><span class="nc">ConfigurationClassPostProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">def</span><span class="o">.</span><span class="na">setSource</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">beanDefs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">registerPostProcessor</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">def</span><span class="o">,</span> <span class="no">CONFIGURATION_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="c1">//创建AutowiredAnnotationBeanPostProcessor后置处理器Bean定义,并注册到bean工厂中</span>
    <span class="c1">//AutowiredAnnotationBeanPostProcessor的主要作用是自动装配注解的字段、set方法和任何配置方法,默认通过@Autowired和@Value</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">registry</span><span class="o">.</span><span class="na">containsBeanDefinition</span><span class="o">(</span><span class="no">AUTOWIRED_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">RootBeanDefinition</span> <span class="n">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RootBeanDefinition</span><span class="o">(</span><span class="nc">AutowiredAnnotationBeanPostProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">def</span><span class="o">.</span><span class="na">setSource</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">beanDefs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">registerPostProcessor</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">def</span><span class="o">,</span> <span class="no">AUTOWIRED_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="c1">// Check for JSR-250 support, and if present add the CommonAnnotationBeanPostProcessor.</span>
    <span class="c1">//检查是否支持JSR-250,支持则创建CommonAnnotationBeanPostProcessor后置处理器并注册到bean工厂中</span>
    <span class="c1">//CommonAnnotationBeanPostProcessor的主要作用是支持开箱即用的java注解,主要是annotation中的注解,一般是@PostConstruct、@PreDestroy,最主要是@Resources</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">jsr250Present</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">registry</span><span class="o">.</span><span class="na">containsBeanDefinition</span><span class="o">(</span><span class="no">COMMON_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">RootBeanDefinition</span> <span class="n">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RootBeanDefinition</span><span class="o">(</span><span class="nc">CommonAnnotationBeanPostProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">def</span><span class="o">.</span><span class="na">setSource</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">beanDefs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">registerPostProcessor</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">def</span><span class="o">,</span> <span class="no">COMMON_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="c1">// Check for JPA support, and if present add the PersistenceAnnotationBeanPostProcessor.</span>
    <span class="c1">//检查是否支持JPA,支持则创建PersistenceAnnotationBeanPostProcessor后置处理器并注册到bean工厂中</span>
    <span class="c1">//PersistenceAnnotationBeanPostProcessor的主要作用是为了注入相关EntityManagerFactory和EntityManager资源处理PersistenceUnit和PersistenceContext注解</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">jpaPresent</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">registry</span><span class="o">.</span><span class="na">containsBeanDefinition</span><span class="o">(</span><span class="no">PERSISTENCE_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">RootBeanDefinition</span> <span class="n">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RootBeanDefinition</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">def</span><span class="o">.</span><span class="na">setBeanClass</span><span class="o">(</span><span class="nc">ClassUtils</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="no">PERSISTENCE_ANNOTATION_PROCESSOR_CLASS_NAME</span><span class="o">,</span>
                    <span class="nc">AnnotationConfigUtils</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">()));</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span>
                    <span class="s">"Cannot load optional framework class: "</span> <span class="o">+</span> <span class="no">PERSISTENCE_ANNOTATION_PROCESSOR_CLASS_NAME</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">def</span><span class="o">.</span><span class="na">setSource</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">beanDefs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">registerPostProcessor</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">def</span><span class="o">,</span> <span class="no">PERSISTENCE_ANNOTATION_PROCESSOR_BEAN_NAME</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="c1">//创建EventListenerMethodProcessor后置处理器并注册到bean工厂中</span>
    <span class="c1">//EventListenerMethodProcessor的主要作用是作为单独的ApplicationListener实例,主要用于早期检索,避免对其处理器bean和他的EventListenerFactory委托者进行aop检查</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">registry</span><span class="o">.</span><span class="na">containsBeanDefinition</span><span class="o">(</span><span class="no">EVENT_LISTENER_PROCESSOR_BEAN_NAME</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">RootBeanDefinition</span> <span class="n">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RootBeanDefinition</span><span class="o">(</span><span class="nc">EventListenerMethodProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">def</span><span class="o">.</span><span class="na">setSource</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">beanDefs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">registerPostProcessor</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">def</span><span class="o">,</span> <span class="no">EVENT_LISTENER_PROCESSOR_BEAN_NAME</span><span class="o">));</span>
    <span class="o">}</span>
    
    <span class="c1">//创建DefaultEventListenerFactory bean定义并注册到bean工厂</span>
    <span class="c1">//DefaultEventListenerFactory主要是为了常规的EventListener注解</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">registry</span><span class="o">.</span><span class="na">containsBeanDefinition</span><span class="o">(</span><span class="no">EVENT_LISTENER_FACTORY_BEAN_NAME</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">RootBeanDefinition</span> <span class="n">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RootBeanDefinition</span><span class="o">(</span><span class="nc">DefaultEventListenerFactory</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">def</span><span class="o">.</span><span class="na">setSource</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="n">beanDefs</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">registerPostProcessor</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="n">def</span><span class="o">,</span> <span class="no">EVENT_LISTENER_FACTORY_BEAN_NAME</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">beanDefs</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>可见 <strong>AnnotatedBeanDefinitionReader</strong> 的作用就是注册了多个后置处理器.我们来看这几个后置处理器,先看他们的类图:</p>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/AnnotatedBeanDefinitionReader.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="AnnotationConfigProcessors" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/AnnotatedBeanDefinitionReader.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">AnnotationConfigProcessors</div>
    </a>
</center>

<p>其中最重要的就是 <strong>ConfigurationClassPostProcessor</strong> 从类图中也可以看到它继承的父类更多,其中最重要的父类就是 <strong>BeanDefinitionRegistryPostProcessor</strong> ,它就是处理主函数的核心,具体后面再介绍.<br />
我们一一介绍下这几个类的大概作用:</p>
<ul>
  <li>ConfigurationClassPostProcessor:最为重要,在启动时处理 <strong>@Configuration</strong> 修饰的类,主要就是我们启动时使用 <strong>@SpringBootApplication</strong> 修饰的主函数</li>
  <li>AutowiredAnnotationBeanPostProcessor:主要作用是通过 <strong>@Autowired、@Value</strong> 等注解自动装配字段、set方法和任何配置方法</li>
  <li>CommonAnnotationBeanPostProcessor:主要作用是支持开箱即用的方法,例如 <strong>@PostConstruct、@PreDestroy、@Resources</strong> 等</li>
  <li>PersistenceAnnotationBeanPostProcessor:主要作用是为了注入相关EntityManagerFactory和EntityManager资源处理PersistenceUnit和PersistenceContext注解</li>
  <li>EventListenerMethodProcessor:主要作用是作为单独的ApplicationListener实例,主要用于早期检索,避免对其处理器bean和他的EventListenerFactory委托者进行aop检查</li>
  <li>DefaultEventListenerFactory:主要是为了常规的EventListener注解</li>
</ul>

<blockquote>
  <p>综上所述: <strong>AnnotatedBeanDefinitionReader</strong> 的主要作用就是注册多个后置处理器到bean工厂中,为后面解析主函数做准备</p>
</blockquote>

<p>4.2 接下来我们再看下 <strong>ClassPathBeanDefinitionScanner</strong> 的源码:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Create a new {@code ClassPathBeanDefinitionScanner} for the given bean factory and
 * using the given {@link Environment} when evaluating bean definition profile metadata.
 * 为给定的bean工厂创建ClassPathBeanDefinitionScanner,并在评估bean定义配置元数据时使用给定的Environment
 */</span>
<span class="kd">public</span> <span class="nf">ClassPathBeanDefinitionScanner</span><span class="o">(</span><span class="nc">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">useDefaultFilters</span><span class="o">,</span>
        <span class="nc">Environment</span> <span class="n">environment</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">ResourceLoader</span> <span class="n">resourceLoader</span><span class="o">)</span> <span class="o">{</span>

    <span class="nc">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">registry</span><span class="o">,</span> <span class="s">"BeanDefinitionRegistry must not be null"</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">registry</span> <span class="o">=</span> <span class="n">registry</span><span class="o">;</span>
    <span class="c1">//注册默认过滤器 主要是@Component、ManagedBean、Named</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">useDefaultFilters</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">registerDefaultFilters</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="c1">//设置environment</span>
    <span class="n">setEnvironment</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="c1">//设置类加载器</span>
    <span class="n">setResourceLoader</span><span class="o">(</span><span class="n">resourceLoader</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>我们先来看下 <strong>registerDefaultFilters()</strong> 方法具体做了什么:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Register the default filter for {@link Component @Component}.
 * &lt;p&gt;This will implicitly register all annotations that have the
 * {@link Component @Component} meta-annotation including the
 * {@link Repository @Repository}, {@link Service @Service}, and
 * {@link Controller @Controller} stereotype annotations.
 * &lt;p&gt;Also supports Java EE 6's {@link javax.annotation.ManagedBean} and
 * JSR-330's {@link javax.inject.Named} annotations, if available.
 * 为@Component注册默认过滤器.他可以注册所有隐式含有@Component元注解,包括@Repository、@Service、@Controller
 * 同时还可以支持 ManagedBean和Named
 */</span>
<span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"unchecked"</span><span class="o">)</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">registerDefaultFilters</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">includeFilters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">AnnotationTypeFilter</span><span class="o">(</span><span class="nc">Component</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    <span class="nc">ClassLoader</span> <span class="n">cl</span> <span class="o">=</span> <span class="nc">ClassPathScanningCandidateComponentProvider</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">includeFilters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">AnnotationTypeFilter</span><span class="o">(</span>
                <span class="o">((</span><span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Annotation</span><span class="o">&gt;)</span> <span class="nc">ClassUtils</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"javax.annotation.ManagedBean"</span><span class="o">,</span> <span class="n">cl</span><span class="o">)),</span> <span class="kc">false</span><span class="o">));</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="s">"JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// JSR-250 1.1 API (as included in Java EE 6) not available - simply skip.</span>
    <span class="o">}</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">includeFilters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">AnnotationTypeFilter</span><span class="o">(</span>
                <span class="o">((</span><span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Annotation</span><span class="o">&gt;)</span> <span class="nc">ClassUtils</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"javax.inject.Named"</span><span class="o">,</span> <span class="n">cl</span><span class="o">)),</span> <span class="kc">false</span><span class="o">));</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">trace</span><span class="o">(</span><span class="s">"JSR-330 'javax.inject.Named' annotation found and supported for component scanning"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// JSR-330 API not available - simply skip.</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>下面还有一个方法比较有意思,那就是 <strong>setResourceLoader(resourceLoader)</strong> 方法,乍一眼看上去它就是设置了资源加载器,并没有什么特别的作用,我们翻翻的源码看看:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Set the {@link ResourceLoader} to use for resource locations.
 * This will typically be a {@link ResourcePatternResolver} implementation.
 * &lt;p&gt;Default is a {@code PathMatchingResourcePatternResolver}, also capable of
 * resource pattern resolving through the {@code ResourcePatternResolver} interface.
 * 设置资源加载器以用于资源位置. 通常是ResourcePatternResolver的实现.
 */</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setResourceLoader</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="nc">ResourceLoader</span> <span class="n">resourceLoader</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">resourcePatternResolver</span> <span class="o">=</span> <span class="nc">ResourcePatternUtils</span><span class="o">.</span><span class="na">getResourcePatternResolver</span><span class="o">(</span><span class="n">resourceLoader</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">metadataReaderFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CachingMetadataReaderFactory</span><span class="o">(</span><span class="n">resourceLoader</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">componentsIndex</span> <span class="o">=</span> <span class="nc">CandidateComponentsIndexLoader</span><span class="o">.</span><span class="na">loadIndex</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">resourcePatternResolver</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">());</span>
<span class="o">}</span>

<span class="cm">/**
 * The location to look for components.
 * &lt;p&gt;Can be present in multiple JAR files.
 * 为了寻找组件的位置.可以出现在多个jar文件中
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">COMPONENTS_RESOURCE_LOCATION</span> <span class="o">=</span> <span class="s">"META-INF/spring.components"</span><span class="o">;</span>

<span class="cm">/**
 * Load and instantiate the {@link CandidateComponentsIndex} from
 * {@value #COMPONENTS_RESOURCE_LOCATION}, using the given class loader. If no
 * index is available, return {@code null}.
 * 使用给定的类加载器加载和实例化来自META-INF/spring.components的CandidateComponentsIndex.没有则返回null
 */</span>
<span class="nd">@Nullable</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">CandidateComponentsIndex</span> <span class="nf">loadIndex</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="nc">ClassLoader</span> <span class="n">classLoader</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">ClassLoader</span> <span class="n">classLoaderToUse</span> <span class="o">=</span> <span class="n">classLoader</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">classLoaderToUse</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">classLoaderToUse</span> <span class="o">=</span> <span class="nc">CandidateComponentsIndexLoader</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="c1">//主要就是通过doLoadIndex这个方法 那这里我们其实也可以用于扩展</span>
    <span class="k">return</span> <span class="n">cache</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">classLoaderToUse</span><span class="o">,</span> <span class="nl">CandidateComponentsIndexLoader:</span><span class="o">:</span><span class="n">doLoadIndex</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">//这段代码就比较好理解了,尝试从META-INF/spring.components中读取配置,没有则返回,有则加载指定位置的文件,同时返回候选者的数量</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="nc">CandidateComponentsIndex</span> <span class="nf">doLoadIndex</span><span class="o">(</span><span class="nc">ClassLoader</span> <span class="n">classLoader</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">shouldIgnoreIndex</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="no">URL</span><span class="o">&gt;</span> <span class="n">urls</span> <span class="o">=</span> <span class="n">classLoader</span><span class="o">.</span><span class="na">getResources</span><span class="o">(</span><span class="no">COMPONENTS_RESOURCE_LOCATION</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">urls</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Properties</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">urls</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="n">urls</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
            <span class="nc">Properties</span> <span class="n">properties</span> <span class="o">=</span> <span class="nc">PropertiesLoaderUtils</span><span class="o">.</span><span class="na">loadProperties</span><span class="o">(</span><span class="k">new</span> <span class="nc">UrlResource</span><span class="o">(</span><span class="n">url</span><span class="o">));</span>
            <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">properties</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">logger</span><span class="o">.</span><span class="na">isDebugEnabled</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"Loaded "</span> <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">+</span> <span class="s">"] index(es)"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">mapToInt</span><span class="o">(</span><span class="nl">Properties:</span><span class="o">:</span><span class="n">size</span><span class="o">).</span><span class="na">sum</span><span class="o">();</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">totalCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">new</span> <span class="nc">CandidateComponentsIndex</span><span class="o">(</span><span class="n">result</span><span class="o">)</span> <span class="o">:</span> <span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Unable to load indexes from location ["</span> <span class="o">+</span>
                <span class="no">COMPONENTS_RESOURCE_LOCATION</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<blockquote>
  <p>综上所述: <strong>ClassPathBeanDefinitionScanner</strong> 的作用就是扫描所有类路径下所有被@Component、@Repository、@Service、@Controller以及ManagedBean和Named注解的类,并将它们注册为bean定义.</p>
</blockquote>

<blockquote>
  <p>createApplicationContext总结</p>
</blockquote>

<blockquote>
  <p>第四步主要就是创建AnnotationConfigServletWebServerApplicationContext上下文,在构造AnnotationConfigServletWebServerApplicationContext的同时又创建用于注册所有bean的AnnotatedBeanDefinitionReader和扫描所有指定注解类的ClassPathBeanDefinitionScanner.
其中AnnotatedBeanDefinitionReader又注册了多个后置处理器为后续做准备,最重要的就是ConfigurationClassPostProcessor.</p>
</blockquote>

<hr />

<h3 id="组件扫描扩展">组件扫描扩展</h3>
<hr />
<p>背景:虽然类路径扫描速度非常快,但是可以通过在编译时创建一个静态候选列表来提高应用程序的启动性能.</p>

<p>首先需要先添加maven</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">dependencies</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">context</span><span class="o">-</span><span class="n">indexer</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">5.1</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="na">RELEASE</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">optional</span><span class="o">&gt;</span><span class="kc">true</span><span class="o">&lt;/</span><span class="n">optional</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">dependencies</span><span class="o">&gt;</span>
</code></pre></div></div>
<p>他的作用就是在编译过程中生成一个包含jar文件的META-INF/spring.components文件.此文件中就包含应用中所有以 <strong>@Component以及以@Component为元注解</strong> 的类.
如下图所示:</p>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/spring.components示例.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="spring.components示例" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/spring.components示例.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">spring.components示例</div>
    </a>
</center>

<p>那我们可以这样使用:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">DemoApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="c1">//"META-INF/spring.components"</span>
    <span class="nc">CandidateComponentsIndex</span> <span class="n">candidateComponentsIndex</span> <span class="o">=</span> <span class="nc">CandidateComponentsIndexLoader</span><span class="o">.</span><span class="na">loadIndex</span><span class="o">(</span><span class="nc">DemoApplication</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">());</span>
    <span class="k">if</span> <span class="o">(</span><span class="nc">Objects</span><span class="o">.</span><span class="na">nonNull</span><span class="o">(</span><span class="n">candidateComponentsIndex</span><span class="o">)){</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">candidates</span> <span class="o">=</span> <span class="n">candidateComponentsIndex</span><span class="o">.</span><span class="na">getCandidateTypes</span><span class="o">(</span><span class="s">"com.hcc.example"</span><span class="o">,</span> <span class="s">"org.springframework.stereotype.Component"</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="nl">candidate:</span><span class="n">candidates</span><span class="o">){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">candidate</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"MyComponent"</span><span class="o">)){</span>
                <span class="nc">MyComponent</span> <span class="n">myComponent</span> <span class="o">=</span> <span class="o">(</span><span class="nc">MyComponent</span><span class="o">)</span><span class="n">context</span><span class="o">.</span><span class="na">getBeanFactory</span><span class="o">().</span><span class="na">getBean</span><span class="o">(</span><span class="s">"myComponent"</span><span class="o">);</span>
                <span class="n">myComponent</span><span class="o">.</span><span class="na">test</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>具体如果扩展就可以根据我们的需要进行了.<br />
当在类路径上找到META-INF/Spring.components时,索引将自动启用.如果某个索引部分可用于某些库(或用例),但无法为整个应用程序生成,则可以通过将spring.index.ignore设置为true(作为系统属性或类路径根目录下的spring.properties文件)来回滚到常规类路径安排(就像根本没有索引一样).</p>
<hr />
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">Septemper 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-20000003" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>SpringBoot启动源码解析(三)</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-rachel-claire-5490361.jpg" class="img-responsive img-centered" alt="SpringBoot3">

                            
                                <h3>SpringBootApplication Run方法解析(一):prepareEnvironment</h3>
                            
                            </div>

                            <p><h3 id="run方法入口主要分析prepareenvironment">Run方法入口:主要分析prepareEnvironment</h3>
<hr />
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Run the Spring application, creating and refreshing a new
 * {@link ApplicationContext}.
 * 运行Spring应用，创建和刷新一个新的应用上下文
 * @param args the application arguments (usually passed from a Java main method)
 * @return a running {@link ApplicationContext}
 */</span>
<span class="kd">public</span> <span class="nc">ConfigurableApplicationContext</span> <span class="nf">run</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//1.创建启动计时器</span>
    <span class="nc">StopWatch</span> <span class="n">stopWatch</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StopWatch</span><span class="o">();</span>
    <span class="n">stopWatch</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="c1">//创建启动上下文并初始化相应的Bootstrapper 目前暂未使用</span>
    <span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">SpringBootExceptionReporter</span><span class="o">&gt;</span> <span class="n">exceptionReporters</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="c1">//设置系统的配置模式，一般用于服务端开发 默认为true</span>
    <span class="n">configureHeadlessProperty</span><span class="o">();</span>
    <span class="c1">//获取spring上下文启动监听者  从META-INF/spring.factories中获取SpringApplicationRunListener的实现类并加载</span>
    <span class="nc">SpringApplicationRunListeners</span> <span class="n">listeners</span> <span class="o">=</span> <span class="n">getRunListeners</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
    <span class="c1">//发布启动中事件</span>
    <span class="n">listeners</span><span class="o">.</span><span class="na">starting</span><span class="o">();</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">//2.创建默认上下文参数</span>
        <span class="nc">ApplicationArguments</span> <span class="n">applicationArguments</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultApplicationArguments</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
        <span class="c1">//3.准备环境，将资源属性添加到环境中并与上下文绑定</span>
        <span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span> <span class="o">=</span> <span class="n">prepareEnvironment</span><span class="o">(</span><span class="n">listeners</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">);</span>
        <span class="c1">//设置spring.beaninfo.ignore中过滤的bean</span>
        <span class="n">configureIgnoreBeanInfo</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
        <span class="c1">//打印spring标记</span>
        <span class="nc">Banner</span> <span class="n">printedBanner</span> <span class="o">=</span> <span class="n">printBanner</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
        <span class="c1">//4.根据web应用类型创建指定的应用上下文</span>
        <span class="c1">//注意:这里反射创建AnnotationConfigServletWebServerApplicationContext时,构造中创建AnnotatedBeanDefinitionReader中的AnnotationConfigUtils.registerAnnotationConfigProcessors(this.registry)方法很重要</span>
        <span class="c1">//它将几个常见的BeanPostProcessor和BeanFactoryPostProcessor注册到注册表中  最重要的是internalConfigurationAnnotationProcessor来解析Configuration的配置类</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">createApplicationContext</span><span class="o">();</span>
        <span class="n">exceptionReporters</span> <span class="o">=</span> <span class="n">getSpringFactoriesInstances</span><span class="o">(</span><span class="nc">SpringBootExceptionReporter</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                <span class="k">new</span> <span class="nc">Class</span><span class="o">[]</span> <span class="o">{</span> <span class="nc">ConfigurableApplicationContext</span><span class="o">.</span><span class="na">class</span> <span class="o">},</span> <span class="n">context</span><span class="o">);</span>
        <span class="c1">//5.准备上下文</span>
        <span class="c1">//主要做了两件事:</span>
        <span class="c1">// 1.调用前面实例化的ApplicationContextInitializer的initialize方式初始化上下文</span>
        <span class="c1">// 2.在其中的load方法中将启动主函数bean定义注册到注册表中 beanDefinitionMap</span>
        <span class="n">prepareContext</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">environment</span><span class="o">,</span> <span class="n">listeners</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">,</span> <span class="n">printedBanner</span><span class="o">);</span>
        <span class="c1">//6.刷新上下文</span>
        <span class="n">refreshContext</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="n">afterRefresh</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">);</span>
        <span class="n">stopWatch</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">logStartupInfo</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">new</span> <span class="nf">StartupInfoLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mainApplicationClass</span><span class="o">).</span><span class="na">logStarted</span><span class="o">(</span><span class="n">getApplicationLog</span><span class="o">(),</span> <span class="n">stopWatch</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//监听者发布已启动事件</span>
        <span class="n">listeners</span><span class="o">.</span><span class="na">started</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="c1">//7.调用所有的ApplicationRunner和CommandLineRunner的实现类</span>
        <span class="n">callRunners</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">handleRunFailure</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">ex</span><span class="o">,</span> <span class="n">exceptionReporters</span><span class="o">,</span> <span class="n">listeners</span><span class="o">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">//监听者发布运行中事件</span>
        <span class="n">listeners</span><span class="o">.</span><span class="na">running</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">handleRunFailure</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">ex</span><span class="o">,</span> <span class="n">exceptionReporters</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">context</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>本章我们主要分析 <strong>prepareEnvironment</strong> 及其之前的步骤.</p>
<ol>
  <li>第一步比较好理解,创建定时器统计启动时间,并获取的事件发布者 <strong>SpringApplicationRunListener</strong> 来发布启动过程中的各个事件,首先发布的就是 <strong>starting</strong> 事件.</li>
  <li>第二步创建应用参数,默认传入的是空集合</li>
  <li>第三步创建环境实例,首先看下 <strong>ConfigurableEnvironment</strong> 相关类图</li>
</ol>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/ConfigurableEnvironment.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="ConfigurableEnvironment" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/ConfigurableEnvironment.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">ConfigurableEnvironment</div>
    </a>
</center>

<ul>
  <li>PropertyResolver: 用于针对任何基础源解析属性的接口. 主要提供解析属性和获取属性的方法.</li>
  <li>ConfigurablePropertyResolver: 提供用于访问和自定义将属性值从一种类型转换为另一种类型时使用的ConversionService的设置.</li>
  <li>Environment: 应用中表明环境的接口,主要有两个属性: <strong>profile</strong> 和 <strong>properties</strong></li>
  <li>ConfigurableEnvironment: 继承自 <strong>ConfigurablePropertyResolver</strong> 和 <strong>Environment</strong> ,所以它提供了设置profile和操作底层属性的能力.</li>
  <li>StandardEnvironment: 继承自 <strong>AbstractEnvironment</strong> 不仅提供了 <strong>ConfigurableEnvironment</strong> 的能力还提供了设置 <strong>systemEnvironment</strong> 和 <strong>systemProperties</strong> 属性源的能力.</li>
  <li>StandardServletEnvironment: 主要用于 <strong>Servlet</strong> 应用的环境,默认基本都是它.</li>
  <li>StandardReactiveWebEnvironment: 主要用于 <strong>Reactive</strong> 应用的环境,SpringBoot中是空实现.</li>
</ul>

<p>相关类及其主要功能了解后,我们在回过头来看看这个 <strong>prepareEnvironment</strong> 方法:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">ConfigurableEnvironment</span> <span class="nf">prepareEnvironment</span><span class="o">(</span><span class="nc">SpringApplicationRunListeners</span> <span class="n">listeners</span><span class="o">,</span>
        <span class="nc">ApplicationArguments</span> <span class="n">applicationArguments</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Create and configure the environment</span>
    <span class="c1">//3.1根据当前应用类型创建并且配置environment 通常是StandardServletEnvironment</span>
    <span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span> <span class="o">=</span> <span class="n">getOrCreateEnvironment</span><span class="o">();</span>
    <span class="c1">//3.2为环境设置属性资源和配置文件</span>
    <span class="n">configureEnvironment</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">applicationArguments</span><span class="o">.</span><span class="na">getSourceArgs</span><span class="o">());</span>
    <span class="c1">//3.3将已有属性以key为 configurationProperties的形式添加到属性中</span>
    <span class="nc">ConfigurationPropertySources</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="c1">//3.4发布环境准备完成通知</span>
    <span class="n">listeners</span><span class="o">.</span><span class="na">environmentPrepared</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="c1">//3.5将environmrnt绑定到应用中</span>
    <span class="n">bindToSpringApplication</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">isCustomEnvironment</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">environment</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EnvironmentConverter</span><span class="o">(</span><span class="n">getClassLoader</span><span class="o">()).</span><span class="na">convertEnvironmentIfNecessary</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span>
                <span class="n">deduceEnvironmentClass</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="c1">//3.6 再次将已有属性以key为 configurationProperties的形式添加到属性中</span>
    <span class="nc">ConfigurationPropertySources</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">environment</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>3.1 首先是创建并获取环境实例,源码如下:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">ConfigurableEnvironment</span> <span class="nf">getOrCreateEnvironment</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">environment</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">environment</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">switch</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">webApplicationType</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nl">SERVLET:</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">StandardServletEnvironment</span><span class="o">();</span>
    <span class="k">case</span> <span class="nl">REACTIVE:</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">StandardReactiveWebEnvironment</span><span class="o">();</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">StandardEnvironment</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>因为我们当前应用类型是 <strong>Servlet</strong> ,所以我们需要对应就是创建 <strong>StandardServletEnvironment</strong> 实例.我们继续看下对应的构造方法:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//因为 StandardServletEnvironment extends StandardEnvironment 且 StandardEnvironment extends AbstractEnvironment</span>
<span class="c1">//我们看下父类AbstractEnvironment的构造</span>
<span class="cm">/**
 * Create a new {@code Environment} instance, calling back to
 * {@link #customizePropertySources(MutablePropertySources)} during construction to
 * allow subclasses to contribute or manipulate {@link PropertySource} instances as
 * appropriate.
 * 创建一个新的Environment实例, 在构造期间回调customizePropertySources方法以允许子类根据需要贡献或操作 PropertySource实例
 */</span>
<span class="kd">public</span> <span class="nf">AbstractEnvironment</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">customizePropertySources</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">propertySources</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">//StandardServletEnvironment中重写的customizePropertySourcesf方法</span>
<span class="cm">/** Servlet context init parameters property source name: {@value}. */</span>
<span class="c1">//Servlet上下文初始化参数属性源名称</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">SERVLET_CONTEXT_PROPERTY_SOURCE_NAME</span> <span class="o">=</span> <span class="s">"servletContextInitParams"</span><span class="o">;</span>

<span class="cm">/** Servlet config init parameters property source name: {@value}. */</span>
<span class="c1">//Serlet配置初始化参数属性源名称</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">SERVLET_CONFIG_PROPERTY_SOURCE_NAME</span> <span class="o">=</span> <span class="s">"servletConfigInitParams"</span><span class="o">;</span>

<span class="cm">/** JNDI property source name: {@value}. */</span>
<span class="c1">//JNDI属性源名称</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">JNDI_PROPERTY_SOURCE_NAME</span> <span class="o">=</span> <span class="s">"jndiProperties"</span><span class="o">;</span>

<span class="cm">/**
 * Customize the set of property sources with those contributed by superclasses as
 * well as those appropriate for standard servlet-based environments:
 * 使用超类提供的属性源以及适用于基于servlet的标准环境的属性源自定义一组属性源:
 * &lt;ul&gt;
 * &lt;li&gt;{@value #SERVLET_CONFIG_PROPERTY_SOURCE_NAME}
 * &lt;li&gt;{@value #SERVLET_CONTEXT_PROPERTY_SOURCE_NAME}
 * &lt;li&gt;{@value #JNDI_PROPERTY_SOURCE_NAME}
 * &lt;/ul&gt;
 */</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">customizePropertySources</span><span class="o">(</span><span class="nc">MutablePropertySources</span> <span class="n">propertySources</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">propertySources</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="nc">StubPropertySource</span><span class="o">(</span><span class="no">SERVLET_CONFIG_PROPERTY_SOURCE_NAME</span><span class="o">));</span>
    <span class="n">propertySources</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="nc">StubPropertySource</span><span class="o">(</span><span class="no">SERVLET_CONTEXT_PROPERTY_SOURCE_NAME</span><span class="o">));</span>
    <span class="k">if</span> <span class="o">(</span><span class="nc">JndiLocatorDelegate</span><span class="o">.</span><span class="na">isDefaultJndiEnvironmentAvailable</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">propertySources</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="nc">JndiPropertySource</span><span class="o">(</span><span class="no">JNDI_PROPERTY_SOURCE_NAME</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">customizePropertySources</span><span class="o">(</span><span class="n">propertySources</span><span class="o">);</span>
<span class="o">}</span>


<span class="c1">//StandardEnvironment中重写的customizePropertySources方法</span>
<span class="cm">/** System environment property source name: {@value}. */</span>
<span class="c1">//系统环境属性源名称</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME</span> <span class="o">=</span> <span class="s">"systemEnvironment"</span><span class="o">;</span>

<span class="cm">/** JVM system properties property source name: {@value}. */</span>
<span class="c1">//JVM系统属性源名称</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME</span> <span class="o">=</span> <span class="s">"systemProperties"</span><span class="o">;</span>

<span class="cm">/**
 * Customize the set of property sources with those appropriate for any standard
 * Java environment:
 * 使用适用于任何java标准环境的自定义属性源集合
 * &lt;ul&gt;
 * &lt;li&gt;{@value #SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME}
 * &lt;li&gt;{@value #SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME}
 * &lt;/ul&gt;
 */</span>
<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">customizePropertySources</span><span class="o">(</span><span class="nc">MutablePropertySources</span> <span class="n">propertySources</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">propertySources</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">PropertiesPropertySource</span><span class="o">(</span><span class="no">SYSTEM_PROPERTIES_PROPERTY_SOURCE_NAME</span><span class="o">,</span> <span class="n">getSystemProperties</span><span class="o">()));</span>
    <span class="n">propertySources</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">SystemEnvironmentPropertySource</span><span class="o">(</span><span class="no">SYSTEM_ENVIRONMENT_PROPERTY_SOURCE_NAME</span><span class="o">,</span> <span class="n">getSystemEnvironment</span><span class="o">()));</span>
<span class="o">}</span>
</code></pre></div></div>
<p>可见在创建 <strong>StandardServletEnvironment</strong> 实例时根据子类重写的 <strong>customizePropertySources</strong> 方法将 <strong>servletContextInitParams</strong> 、 <strong>servletConfigInitParams</strong> 、<strong>systemEnvironment</strong> 和 <strong>systemProperties</strong> 四种属性添加到环境实例中.</p>

<p>3.2 设置环境属性资源和配置文件,源码如下</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Template method delegating to
 * {@link #configurePropertySources(ConfigurableEnvironment, String[])} and
 * {@link #configureProfiles(ConfigurableEnvironment, String[])} in that order.
 * Override this method for complete control over Environment customization, or one of
 * the above for fine-grained control over property sources or profiles, respectively.
 * 按照configurePropertySources和configureProfiles的顺序委托给他们的模板方法.
 * 覆盖此方法以完全控制环境自定义,或上述方法之一以分别对属性源或配置文件进行细粒度控制
 */</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configureEnvironment</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span><span class="o">,</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//添加类型装换服务</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">addConversionService</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//使用双层检查创建类型转换服务单例</span>
        <span class="nc">ConversionService</span> <span class="n">conversionService</span> <span class="o">=</span> <span class="nc">ApplicationConversionService</span><span class="o">.</span><span class="na">getSharedInstance</span><span class="o">();</span>
        <span class="n">environment</span><span class="o">.</span><span class="na">setConversionService</span><span class="o">((</span><span class="nc">ConfigurableConversionService</span><span class="o">)</span> <span class="n">conversionService</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">//配置属性源</span>
    <span class="n">configurePropertySources</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="c1">//配置配置文件</span>
    <span class="n">configureProfiles</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * Return a shared default application {@code ConversionService} instance, lazily
 * building it once needed.
 * 使用懒加载的方式创建并返回一个共享的默认应用转换实例
 * 双重检查锁
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">ConversionService</span> <span class="nf">getSharedInstance</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">ApplicationConversionService</span> <span class="n">sharedInstance</span> <span class="o">=</span> <span class="nc">ApplicationConversionService</span><span class="o">.</span><span class="na">sharedInstance</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">sharedInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="nc">ApplicationConversionService</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">sharedInstance</span> <span class="o">=</span> <span class="nc">ApplicationConversionService</span><span class="o">.</span><span class="na">sharedInstance</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">sharedInstance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">sharedInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ApplicationConversionService</span><span class="o">();</span>
                <span class="nc">ApplicationConversionService</span><span class="o">.</span><span class="na">sharedInstance</span> <span class="o">=</span> <span class="n">sharedInstance</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">sharedInstance</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**
 * Add, remove or re-order any {@link PropertySource}s in this application's
 * environment.
 * 在应用环境中 添加、删除或重排序任何 PropertySources
 */</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configurePropertySources</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span><span class="o">,</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//获取当前环境实例已有的属性源</span>
    <span class="nc">MutablePropertySources</span> <span class="n">sources</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="na">getPropertySources</span><span class="o">();</span>
    <span class="c1">//若存在defaultProperties且不为空则添加到当前环境实例中  默认为空 直接跳过</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">defaultProperties</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">defaultProperties</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">sources</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="nc">MapPropertySource</span><span class="o">(</span><span class="s">"defaultProperties"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">defaultProperties</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="c1">//是否打开添加命令行属性  且 存在输入的参数  默认无入参 直接跳过</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">addCommandLineProperties</span> <span class="o">&amp;&amp;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="nc">CommandLinePropertySource</span><span class="o">.</span><span class="na">COMMAND_LINE_PROPERTY_SOURCE_NAME</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">sources</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">name</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">PropertySource</span><span class="o">&lt;?&gt;</span> <span class="n">source</span> <span class="o">=</span> <span class="n">sources</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
            <span class="nc">CompositePropertySource</span> <span class="n">composite</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CompositePropertySource</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
            <span class="n">composite</span><span class="o">.</span><span class="na">addPropertySource</span><span class="o">(</span>
                    <span class="k">new</span> <span class="nf">SimpleCommandLinePropertySource</span><span class="o">(</span><span class="s">"springApplicationCommandLineArgs"</span><span class="o">,</span> <span class="n">args</span><span class="o">));</span>
            <span class="n">composite</span><span class="o">.</span><span class="na">addPropertySource</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
            <span class="n">sources</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">composite</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">sources</span><span class="o">.</span><span class="na">addFirst</span><span class="o">(</span><span class="k">new</span> <span class="nc">SimpleCommandLinePropertySource</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Configure which profiles are active (or active by default) for this application
 * environment. Additional profiles may be activated during configuration file
 * processing via the {@code spring.profiles.active} property.
 * 为该应用程序配置哪些配置文件是活动的(默认是活动的).
 * 在配置文件处理期间可以通过spring.profiles.active属性来激活其他配置文件
 */</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configureProfiles</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span><span class="o">,</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//默认additionalProfiles 为空</span>
    <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">profiles</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashSet</span><span class="o">&lt;&gt;(</span><span class="k">this</span><span class="o">.</span><span class="na">additionalProfiles</span><span class="o">);</span>
    <span class="n">profiles</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">environment</span><span class="o">.</span><span class="na">getActiveProfiles</span><span class="o">()));</span>
    <span class="n">environment</span><span class="o">.</span><span class="na">setActiveProfiles</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">toStringArray</span><span class="o">(</span><span class="n">profiles</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>
<p>由上可见,第二步主要就是为环境实例添加转换服务 <strong>conversionService</strong> 、检查是否需要配置默认属性源和是否需要根据命令行参数配置、设置profiles.</p>

<p>3.3 第三步的源码如下:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * The name of the {@link PropertySource} {@link #attach(Environment) adapter}.
 * 属性源适配器的名称
 */</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ATTACHED_PROPERTY_SOURCE_NAME</span> <span class="o">=</span> <span class="s">"configurationProperties"</span><span class="o">;</span>

<span class="cm">/**
 * Attach a {@link ConfigurationPropertySource} support to the specified
 * {@link Environment}. Adapts each {@link PropertySource} managed by the environment
 * to a {@link ConfigurationPropertySource} and allows classic
 * {@link PropertySourcesPropertyResolver} calls to resolve using
 * {@link ConfigurationPropertyName configuration property names}.
 * 将ConfigurationPropertySource支持附加到指定的环境中.
 * 使由环境管理的每个PropertySource适应ConfigurationPropertySource, 并允许经典的PropertySourcesPropertyResolver调用使用名称解析
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">attach</span><span class="o">(</span><span class="nc">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Assert</span><span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">environment</span><span class="o">);</span>
    <span class="c1">//判断当前环境实例中 是否存在configurationProperties属性源</span>
    <span class="c1">//若存在且环境中属性源不等于他本身,则清除configurationProperties属性源, 并将configurationProperties属性源再次添加到sources中</span>
    <span class="c1">//如果不存在的话直接直接将configurationProperties属性源添加到sources中</span>
    <span class="nc">MutablePropertySources</span> <span class="n">sources</span> <span class="o">=</span> <span class="o">((</span><span class="nc">ConfigurableEnvironment</span><span class="o">)</span> <span class="n">environment</span><span class="o">).</span><span class="na">getPropertySources</span><span class="o">();</span>
    <span class="nc">PropertySource</span><span class="o">&lt;?&gt;</span> <span class="n">attached</span> <span class="o">=</span> <span class="n">sources</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="no">ATTACHED_PROPERTY_SOURCE_NAME</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">attached</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">attached</span><span class="o">.</span><span class="na">getSource</span><span class="o">()</span> <span class="o">!=</span> <span class="n">sources</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sources</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="no">ATTACHED_PROPERTY_SOURCE_NAME</span><span class="o">);</span>
        <span class="n">attached</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">attached</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sources</span><span class="o">.</span><span class="na">addFirst</span><span class="o">(</span><span class="k">new</span> <span class="nc">ConfigurationPropertySourcesPropertySource</span><span class="o">(</span><span class="no">ATTACHED_PROPERTY_SOURCE_NAME</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">SpringConfigurationPropertySources</span><span class="o">(</span><span class="n">sources</span><span class="o">)));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>由上可见,第三步的主要作用就是为 <strong>Environment</strong> 实例配置 <strong>configurationProperties</strong> 属性源,为后面的绑定到 <strong>SpringApplication</strong> 而准备.</p>

<p>3.4 第四步就是发布环境准备就绪事件,这里有个监听器比较重要: <strong>ConfigFileApplicationListener</strong> ,我们来看下源码</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//ConfigFileApplicationListener implements EnvironmentPostProcessor, SmartApplicationListener, Ordered {</span>
<span class="c1">//先看下它的类关系, 它实现自EnvironmentPostProcessor, 即它重写的postProcessEnvironment方法</span>

<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="nc">ApplicationEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//当前发布的事件属于ApplicationEnvironmentPreparedEvent 继续往下周</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">event</span> <span class="k">instanceof</span> <span class="nc">ApplicationEnvironmentPreparedEvent</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">onApplicationEnvironmentPreparedEvent</span><span class="o">((</span><span class="nc">ApplicationEnvironmentPreparedEvent</span><span class="o">)</span> <span class="n">event</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">event</span> <span class="k">instanceof</span> <span class="nc">ApplicationPreparedEvent</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">onApplicationPreparedEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//可见获取的是/META-INF/spring.factories中的所有EnvironmentPostProcessor的实现类, 所以此类ConfigFileApplicationListener也在其中</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">EnvironmentPostProcessor</span><span class="o">&gt;</span> <span class="nf">loadPostProcessors</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">SpringFactoriesLoader</span><span class="o">.</span><span class="na">loadFactories</span><span class="o">(</span><span class="nc">EnvironmentPostProcessor</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">getClass</span><span class="o">().</span><span class="na">getClassLoader</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">onApplicationEnvironmentPreparedEvent</span><span class="o">(</span><span class="nc">ApplicationEnvironmentPreparedEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//这段就比较好理解了就是使用所有EnvironmentPostProcessor的后置处理器来处理环境实例</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">EnvironmentPostProcessor</span><span class="o">&gt;</span> <span class="n">postProcessors</span> <span class="o">=</span> <span class="n">loadPostProcessors</span><span class="o">();</span>
    <span class="n">postProcessors</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="nc">AnnotationAwareOrderComparator</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">postProcessors</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">EnvironmentPostProcessor</span> <span class="n">postProcessor</span> <span class="o">:</span> <span class="n">postProcessors</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">postProcessor</span><span class="o">.</span><span class="na">postProcessEnvironment</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">(),</span> <span class="n">event</span><span class="o">.</span><span class="na">getSpringApplication</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//具体后置处理器逻辑 其中最重要的就是加载了application.properties属性源</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">postProcessEnvironment</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span><span class="o">,</span> <span class="nc">SpringApplication</span> <span class="n">application</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">addPropertySources</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">application</span><span class="o">.</span><span class="na">getResourceLoader</span><span class="o">());</span>
<span class="o">}</span>

<span class="cm">/**
 * Add config file property sources to the specified environment.
 * 添加配置文件属性源到指定的环境实例中 其实这里就加载了random和applcation.properties两个属性源
 */</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">addPropertySources</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span><span class="o">,</span> <span class="nc">ResourceLoader</span> <span class="n">resourceLoader</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//添加random属性源</span>
    <span class="nc">RandomValuePropertySource</span><span class="o">.</span><span class="na">addToEnvironment</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="c1">//创建Loader加载器并加载属性</span>
    <span class="k">new</span> <span class="nf">Loader</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="n">resourceLoader</span><span class="o">).</span><span class="na">load</span><span class="o">();</span>
<span class="o">}</span>

<span class="nc">Loader</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span><span class="o">,</span> <span class="nc">ResourceLoader</span> <span class="n">resourceLoader</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">environment</span> <span class="o">=</span> <span class="n">environment</span><span class="o">;</span>
    <span class="c1">//创建属性解析器 解析 ${}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">placeholdersResolver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PropertySourcesPlaceholdersResolver</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">environment</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">resourceLoader</span> <span class="o">=</span> <span class="o">(</span><span class="n">resourceLoader</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">resourceLoader</span> <span class="o">:</span> <span class="k">new</span> <span class="nc">DefaultResourceLoader</span><span class="o">();</span>
    <span class="c1">//这里最重要,加载/META-INF/spring.factories中的PropertySourceLoader的实现类</span>
    <span class="c1">//默认是org.springframework.boot.env.PropertiesPropertySourceLoader,org.springframework.boot.env.YamlPropertySourceLoader 其实就是我们应用种配置的 .properties和 .yml配置文件</span>
    <span class="k">this</span><span class="o">.</span><span class="na">propertySourceLoaders</span> <span class="o">=</span> <span class="nc">SpringFactoriesLoader</span><span class="o">.</span><span class="na">loadFactories</span><span class="o">(</span><span class="nc">PropertySourceLoader</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
            <span class="n">getClass</span><span class="o">().</span><span class="na">getClassLoader</span><span class="o">());</span>
<span class="o">}</span>

<span class="c1">//再来看下真正的load方法</span>
<span class="kt">void</span> <span class="nf">load</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">FilteredPropertySource</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">environment</span><span class="o">,</span> <span class="no">DEFAULT_PROPERTIES</span><span class="o">,</span> <span class="no">LOAD_FILTERED_PROPERTY</span><span class="o">,</span>
            <span class="o">(</span><span class="n">defaultProperties</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">profiles</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;&gt;();</span>
                <span class="k">this</span><span class="o">.</span><span class="na">processedProfiles</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;&gt;();</span>
                <span class="k">this</span><span class="o">.</span><span class="na">activatedProfiles</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                <span class="k">this</span><span class="o">.</span><span class="na">loaded</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
                <span class="c1">//初始化Profiles 默认初始化 active-profiles 和 spring.profiles.* 包含的所有profile</span>
                <span class="n">initializeProfiles</span><span class="o">();</span>
                <span class="c1">//解析所有的profiles 这里至少有两个 null和default</span>
                <span class="k">while</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">profiles</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
                    <span class="nc">Profile</span> <span class="n">profile</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">profiles</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">isDefaultProfile</span><span class="o">(</span><span class="n">profile</span><span class="o">))</span> <span class="o">{</span>
                        <span class="n">addProfileToEnvironment</span><span class="o">(</span><span class="n">profile</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
                    <span class="o">}</span>
                    <span class="c1">//根据指定的profile加载资源 第一次解析null 第二次解析default</span>
                    <span class="n">load</span><span class="o">(</span><span class="n">profile</span><span class="o">,</span> <span class="k">this</span><span class="o">::</span><span class="n">getPositiveProfileFilter</span><span class="o">,</span>
                            <span class="n">addToLoaded</span><span class="o">(</span><span class="nl">MutablePropertySources:</span><span class="o">:</span><span class="n">addLast</span><span class="o">,</span> <span class="kc">false</span><span class="o">));</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">processedProfiles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">profile</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">load</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="k">this</span><span class="o">::</span><span class="n">getNegativeProfileFilter</span><span class="o">,</span> <span class="n">addToLoaded</span><span class="o">(</span><span class="nl">MutablePropertySources:</span><span class="o">:</span><span class="n">addFirst</span><span class="o">,</span> <span class="kc">true</span><span class="o">));</span>
                <span class="c1">//将加载过的资源添加到环境中</span>
                <span class="n">addLoadedPropertySources</span><span class="o">();</span>
                <span class="c1">//应用激活的profiles</span>
                <span class="n">applyActiveProfiles</span><span class="o">(</span><span class="n">defaultProperties</span><span class="o">);</span>
            <span class="o">});</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">load</span><span class="o">(</span><span class="nc">Profile</span> <span class="n">profile</span><span class="o">,</span> <span class="nc">DocumentFilterFactory</span> <span class="n">filterFactory</span><span class="o">,</span> <span class="nc">DocumentConsumer</span> <span class="n">consumer</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//getSearchLocations()是获取搜索路径,默认是这个四个classpath:/,classpath:/config/,file:./,file:./config/</span>
    <span class="n">getSearchLocations</span><span class="o">().</span><span class="na">forEach</span><span class="o">((</span><span class="n">location</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="c1">//判断是否文件夹</span>
        <span class="kt">boolean</span> <span class="n">isFolder</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="n">isFolder</span> <span class="o">?</span> <span class="n">getSearchNames</span><span class="o">()</span> <span class="o">:</span> <span class="no">NO_SEARCH_NAMES</span><span class="o">;</span>
        <span class="c1">//具体的加载动作</span>
        <span class="n">names</span><span class="o">.</span><span class="na">forEach</span><span class="o">((</span><span class="n">name</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">load</span><span class="o">(</span><span class="n">location</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">profile</span><span class="o">,</span> <span class="n">filterFactory</span><span class="o">,</span> <span class="n">consumer</span><span class="o">));</span>
    <span class="o">});</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">load</span><span class="o">(</span><span class="nc">String</span> <span class="n">location</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Profile</span> <span class="n">profile</span><span class="o">,</span> <span class="nc">DocumentFilterFactory</span> <span class="n">filterFactory</span><span class="o">,</span>
            <span class="nc">DocumentConsumer</span> <span class="n">consumer</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">hasText</span><span class="o">(</span><span class="n">name</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">PropertySourceLoader</span> <span class="n">loader</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">propertySourceLoaders</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">canLoadFileExtension</span><span class="o">(</span><span class="n">loader</span><span class="o">,</span> <span class="n">location</span><span class="o">))</span> <span class="o">{</span>
                    <span class="n">load</span><span class="o">(</span><span class="n">loader</span><span class="o">,</span> <span class="n">location</span><span class="o">,</span> <span class="n">profile</span><span class="o">,</span> <span class="n">filterFactory</span><span class="o">.</span><span class="na">getDocumentFilter</span><span class="o">(</span><span class="n">profile</span><span class="o">),</span> <span class="n">consumer</span><span class="o">);</span>
                    <span class="k">return</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"File extension of config file location '"</span> <span class="o">+</span> <span class="n">location</span>
                    <span class="o">+</span> <span class="s">"' is not known to any PropertySourceLoader. If the location is meant to reference "</span>
                    <span class="o">+</span> <span class="s">"a directory, it must end in '/'"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">processed</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span>
        <span class="c1">//这里的propertySourceLoaders就是前面加载的 PropertiesPropertySourceLoader和YamlPropertySourceLoader两个解析器</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">PropertySourceLoader</span> <span class="n">loader</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">propertySourceLoaders</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//每个解析器都有自己的文件后缀并解析</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">fileExtension</span> <span class="o">:</span> <span class="n">loader</span><span class="o">.</span><span class="na">getFileExtensions</span><span class="o">())</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">processed</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fileExtension</span><span class="o">))</span> <span class="o">{</span>
                    <span class="c1">//获得具体路径后在解析成properties 下面就不继续往下看了</span>
                    <span class="n">loadForFileExtension</span><span class="o">(</span><span class="n">loader</span><span class="o">,</span> <span class="n">location</span> <span class="o">+</span> <span class="n">name</span><span class="o">,</span> <span class="s">"."</span> <span class="o">+</span> <span class="n">fileExtension</span><span class="o">,</span> <span class="n">profile</span><span class="o">,</span> <span class="n">filterFactory</span><span class="o">,</span>
                            <span class="n">consumer</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>
<p>可见第四步通过发布环境准备就绪事件,所有的监听器中,最终要的就是 <strong>ConfigFileApplicationListener</strong>,通过 <strong>ConfigFileApplicationListener</strong> 来执行所有环境相关的后置处理器, 他自己本身实现了 <strong>EnvironmentPostProcessor</strong> ,通过 <strong>postProcessEnvironment</strong> 来调用 <strong>addPropertySources</strong> 方法通过 <strong>Loader</strong> 来加载配置文件属性源.
在构造 <strong>Loader</strong> 中初始化 <strong>PropertySourceLoader</strong> 的两个实现类 <strong>PropertiesPropertySourceLoader</strong> 和 <strong>YamlPropertySourceLoader</strong> 来加载 <strong>“properties”,”xml”</strong> 和 <strong>“yml”,”yaml”__的配置文件,主要通过 __getFileExtensions()</strong> 方法指定的文件扩展名分别拼接默认路径 <strong>classpath:/,classpath:/config/,file:./,file:./config/</strong> ,找到存在的路径则进行解析属性.</p>

<p>3.5 第五步将环境绑定到当前应用中</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Bind the environment to the {@link SpringApplication}.
 * 将环境实例绑定到应用中
 */</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">bindToSpringApplication</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">//首先看这个Binder.get(environment):根据给定环境实例创建Binder</span>
        <span class="nc">Binder</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">environment</span><span class="o">).</span><span class="na">bind</span><span class="o">(</span><span class="s">"spring.main"</span><span class="o">,</span> <span class="nc">Bindable</span><span class="o">.</span><span class="na">ofInstance</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Cannot bind to SpringApplication"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Binder</span> <span class="nf">get</span><span class="o">(</span><span class="nc">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">get</span><span class="o">(</span><span class="n">environment</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Binder</span> <span class="nf">get</span><span class="o">(</span><span class="nc">Environment</span> <span class="n">environment</span><span class="o">,</span> <span class="nc">BindHandler</span> <span class="n">defaultBindHandler</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//获取前面通过attach附加到环境实例中的ConfigurationPropertySource</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">ConfigurationPropertySource</span><span class="o">&gt;</span> <span class="n">sources</span> <span class="o">=</span> <span class="nc">ConfigurationPropertySources</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="c1">//根据环境创建属性源占位符解析器 即解析 ${}</span>
    <span class="nc">PropertySourcesPlaceholdersResolver</span> <span class="n">placeholdersResolver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PropertySourcesPlaceholdersResolver</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
    <span class="c1">//创建Binder</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Binder</span><span class="o">(</span><span class="n">sources</span><span class="o">,</span> <span class="n">placeholdersResolver</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">defaultBindHandler</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * Return a set of {@link ConfigurationPropertySource} instances that have previously
 * been {@link #attach(Environment) attached} to the {@link Environment}.
 * 返回之前通过attached附加到环境实例中的ConfigurationPropertySource集合
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">ConfigurationPropertySource</span><span class="o">&gt;</span> <span class="nf">get</span><span class="o">(</span><span class="nc">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Assert</span><span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">ConfigurableEnvironment</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">environment</span><span class="o">);</span>
    <span class="nc">MutablePropertySources</span> <span class="n">sources</span> <span class="o">=</span> <span class="o">((</span><span class="nc">ConfigurableEnvironment</span><span class="o">)</span> <span class="n">environment</span><span class="o">).</span><span class="na">getPropertySources</span><span class="o">();</span>
    <span class="nc">ConfigurationPropertySourcesPropertySource</span> <span class="n">attached</span> <span class="o">=</span> <span class="o">(</span><span class="nc">ConfigurationPropertySourcesPropertySource</span><span class="o">)</span> <span class="n">sources</span>
            <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="no">ATTACHED_PROPERTY_SOURCE_NAME</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">attached</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">from</span><span class="o">(</span><span class="n">sources</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">attached</span><span class="o">.</span><span class="na">getSource</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//通过其中的PropertyPlaceholderHelper</span>
<span class="kd">public</span> <span class="nf">PropertySourcesPlaceholdersResolver</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">PropertySource</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">sources</span><span class="o">,</span> <span class="nc">PropertyPlaceholderHelper</span> <span class="n">helper</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">sources</span> <span class="o">=</span> <span class="n">sources</span><span class="o">;</span>
    <span class="c1">//创建PropertyPlaceholderHelper来解析 ${}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">helper</span> <span class="o">=</span> <span class="o">(</span><span class="n">helper</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">helper</span> <span class="o">:</span> <span class="k">new</span> <span class="nc">PropertyPlaceholderHelper</span><span class="o">(</span><span class="nc">SystemPropertyUtils</span><span class="o">.</span><span class="na">PLACEHOLDER_PREFIX</span><span class="o">,</span>
            <span class="nc">SystemPropertyUtils</span><span class="o">.</span><span class="na">PLACEHOLDER_SUFFIX</span><span class="o">,</span> <span class="nc">SystemPropertyUtils</span><span class="o">.</span><span class="na">VALUE_SEPARATOR</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * Create a new {@link Binder} instance for the specified sources.
 * 通过指定的资源中创建一个新的Binder实例
 */</span>
<span class="kd">public</span> <span class="nf">Binder</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">ConfigurationPropertySource</span><span class="o">&gt;</span> <span class="n">sources</span><span class="o">,</span> <span class="nc">PlaceholdersResolver</span> <span class="n">placeholdersResolver</span><span class="o">,</span>
        <span class="nc">ConversionService</span> <span class="n">conversionService</span><span class="o">,</span> <span class="nc">Consumer</span><span class="o">&lt;</span><span class="nc">PropertyEditorRegistry</span><span class="o">&gt;</span> <span class="n">propertyEditorInitializer</span><span class="o">,</span>
        <span class="nc">BindHandler</span> <span class="n">defaultBindHandler</span><span class="o">,</span> <span class="nc">BindConstructorProvider</span> <span class="n">constructorProvider</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">sources</span><span class="o">,</span> <span class="s">"Sources must not be null"</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">sources</span> <span class="o">=</span> <span class="n">sources</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">placeholdersResolver</span> <span class="o">=</span> <span class="o">(</span><span class="n">placeholdersResolver</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">placeholdersResolver</span> <span class="o">:</span> <span class="nc">PlaceholdersResolver</span><span class="o">.</span><span class="na">NONE</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">conversionService</span> <span class="o">=</span> <span class="o">(</span><span class="n">conversionService</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">conversionService</span>
            <span class="o">:</span> <span class="nc">ApplicationConversionService</span><span class="o">.</span><span class="na">getSharedInstance</span><span class="o">();</span>
    <span class="k">this</span><span class="o">.</span><span class="na">propertyEditorInitializer</span> <span class="o">=</span> <span class="n">propertyEditorInitializer</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">defaultBindHandler</span> <span class="o">=</span> <span class="o">(</span><span class="n">defaultBindHandler</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">defaultBindHandler</span> <span class="o">:</span> <span class="nc">BindHandler</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">constructorProvider</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">constructorProvider</span> <span class="o">=</span> <span class="nc">BindConstructorProvider</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nc">ValueObjectBinder</span> <span class="n">valueObjectBinder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ValueObjectBinder</span><span class="o">(</span><span class="n">constructorProvider</span><span class="o">);</span>
    <span class="nc">JavaBeanBinder</span> <span class="n">javaBeanBinder</span> <span class="o">=</span> <span class="nc">JavaBeanBinder</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">dataObjectBinders</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">unmodifiableList</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">valueObjectBinder</span><span class="o">,</span> <span class="n">javaBeanBinder</span><span class="o">));</span>
<span class="o">}</span>

<span class="c1">//具体绑定代码不贴了,嵌套层数太深后期有时间在详细分析</span>
</code></pre></div></div>
<p>可见第五步就是使用3.3新加入的 <strong>configurationProperties</strong> 属性源和 <strong>${}</strong> 占位符解析器 <strong>PropertySourcesPlaceholdersResolver</strong> 来创建 <strong>Binder</strong> .
最后在通过 <strong>Binder</strong> 来将 <strong>“spring.main”</strong> 封装的 <strong>ConfigurationProperty</strong> 和主函数 <strong>SpringApplication</strong> 进行绑定.</p>

<p>3.6 最后一步是再次将已有属性以key为 configurationProperties的形式添加到属性中</p>

<blockquote>
  <p>prepareEnvironment总结</p>
</blockquote>

<blockquote>
  <p>prepareEnvironment的作用就是将创建 Environment实例,并将各种属性资源添加到Environment中其中包括configurationProperties、servletConfigInitParams、servletContextInitParams、systemProperties、systemEnvironment、以及最重要的applicationConfig: [classpath:/application.properties],最后在通过Environment创建Binder将”spring.main”的属性源与应用SpringApplicaiton进行绑定.</p>
</blockquote>

<hr />

</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">September 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-20000002" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>SpringBoot启动源码解析(二)</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-irina-iriser-1122625.jpg" class="img-responsive img-centered" alt="SpringBoot2">

                            
                                <h3>SpringBootApplication构造方法分析</h3>
                            
                            </div>

                            <p><h3 id="主函数入口">主函数入口</h3>
<hr />
<p>我们首先从主函数入口一步一步往下看.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//程序主函数</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">DemoApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * Static helper that can be used to run a {@link SpringApplication} from the
 * specified source using default settings.
 * 用于在一个使用默认配置的指定资源中运行 SpringApplication 的静态工具类
 * @param primarySource the primary source to load
 * @param args the application arguments (usually passed from a Java main method)
 * @return the running {@link ApplicationContext}
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">ConfigurableApplicationContext</span> <span class="nf">run</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">primarySource</span><span class="o">,</span> <span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">run</span><span class="o">(</span><span class="k">new</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="o">{</span> <span class="n">primarySource</span> <span class="o">},</span> <span class="n">args</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * Static helper that can be used to run a {@link SpringApplication} from the
 * specified sources using default settings and user supplied arguments.
 * @param primarySources the primary sources to load
 * @param args the application arguments (usually passed from a Java main method)
 * @return the running {@link ApplicationContext}
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">ConfigurableApplicationContext</span> <span class="nf">run</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">primarySources</span><span class="o">,</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">SpringApplication</span><span class="o">(</span><span class="n">primarySources</span><span class="o">).</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>核心就是 <strong>new SpringApplication(primarySources).run(args)</strong> 这一行.<br />
我们首先分析一下  <strong>new SpringApplication(primarySources)</strong>.</p>

<h3 id="new-springapplicationprimarysources主构造">new SpringApplication(primarySources)主构造</h3>
<hr />
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Create a new {@link SpringApplication} instance. The application context will load
 * beans from the specified primary sources (see {@link SpringApplication class-level}
 * documentation for details. The instance can be customized before calling
 * {@link #run(String...)}.
 * 创建一个SpringApplication实例. 应用上下文将从指定主函数中加载bean. (这个实例可以在调用run方法前自定义)
 * @param resourceLoader the resource loader to use
 * @param primarySources the primary bean sources
 * @see #run(Class, String[])
 * @see #setSources(Set)
 */</span>
<span class="nd">@SuppressWarnings</span><span class="o">({</span> <span class="s">"unchecked"</span><span class="o">,</span> <span class="s">"rawtypes"</span> <span class="o">})</span>
<span class="kd">public</span> <span class="nf">SpringApplication</span><span class="o">(</span><span class="nc">ResourceLoader</span> <span class="n">resourceLoader</span><span class="o">,</span> <span class="nc">Class</span><span class="o">&lt;?&gt;...</span> <span class="n">primarySources</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//1.设置类加载器</span>
    <span class="k">this</span><span class="o">.</span><span class="na">resourceLoader</span> <span class="o">=</span> <span class="n">resourceLoader</span><span class="o">;</span>
    <span class="nc">Assert</span><span class="o">.</span><span class="na">notNull</span><span class="o">(</span><span class="n">primarySources</span><span class="o">,</span> <span class="s">"PrimarySources must not be null"</span><span class="o">);</span>
    <span class="c1">//2.将主函数封装成集合设置到primarySources中 可以设置多个主类</span>
    <span class="k">this</span><span class="o">.</span><span class="na">primarySources</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashSet</span><span class="o">&lt;&gt;(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">primarySources</span><span class="o">));</span>
    <span class="c1">//3.判断当前应用类型 通常使用的都是WebApplicationType.SERVLET</span>
    <span class="k">this</span><span class="o">.</span><span class="na">webApplicationType</span> <span class="o">=</span> <span class="nc">WebApplicationType</span><span class="o">.</span><span class="na">deduceFromClasspath</span><span class="o">();</span>
    <span class="c1">//4.获取并实例化所有的ApplicationContextInitializer实现 主要用于在上下文刷新前进行初始化上下文</span>
    <span class="n">setInitializers</span><span class="o">((</span><span class="nc">Collection</span><span class="o">)</span> <span class="n">getSpringFactoriesInstances</span><span class="o">(</span><span class="nc">ApplicationContextInitializer</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    <span class="c1">//5.获取并实例化所有的ApplicationListener实现 主要用于监听启动过程中发布的各种事件</span>
    <span class="n">setListeners</span><span class="o">((</span><span class="nc">Collection</span><span class="o">)</span> <span class="n">getSpringFactoriesInstances</span><span class="o">(</span><span class="nc">ApplicationListener</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    <span class="c1">//6.生成main对应主函数的类</span>
    <span class="k">this</span><span class="o">.</span><span class="na">mainApplicationClass</span> <span class="o">=</span> <span class="n">deduceMainApplicationClass</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>在SpringApplication构造函数中,最重要就是步骤4和步骤5,再看下这两步其实是一样的实现,只不过加载的类不同而已.<br />
我们再仔细看看这个方法到底做了什么事情:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Collection</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">getSpringFactoriesInstances</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">parameterTypes</span><span class="o">,</span> <span class="nc">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">ClassLoader</span> <span class="n">classLoader</span> <span class="o">=</span> <span class="n">getClassLoader</span><span class="o">();</span>
    <span class="c1">// Use names and ensure unique to protect against duplicates</span>
    <span class="c1">//获取指定类型的实现类名称集合</span>
    <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashSet</span><span class="o">&lt;&gt;(</span><span class="nc">SpringFactoriesLoader</span><span class="o">.</span><span class="na">loadFactoryNames</span><span class="o">(</span><span class="n">type</span><span class="o">,</span> <span class="n">classLoader</span><span class="o">));</span>
    <span class="c1">//实例化上面找到的所有实现类</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">instances</span> <span class="o">=</span> <span class="n">createSpringFactoriesInstances</span><span class="o">(</span><span class="n">type</span><span class="o">,</span> <span class="n">parameterTypes</span><span class="o">,</span> <span class="n">classLoader</span><span class="o">,</span> <span class="n">args</span><span class="o">,</span> <span class="n">names</span><span class="o">);</span>
    <span class="c1">//根据实例的order进行排序</span>
    <span class="nc">AnnotationAwareOrderComparator</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">instances</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">instances</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>此方法主要做的就是找到指定类型的实现类并将这些类都进行实例化.我们再来看看它是如何找到这个类的.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Load the fully qualified class names of factory implementations of the
 * given type from {@value #FACTORIES_RESOURCE_LOCATION}, using the given
 * class loader.
 * 使用给定的类加载器,从 META-INF/spring.factories中加载给定类型的工厂实现的完全限定名
 * @param factoryType the interface or abstract class representing the factory
 * @param classLoader the ClassLoader to use for loading resources; can be
 * {@code null} to use the default
 * @throws IllegalArgumentException if an error occurs while loading factory names
 * @see #loadFactories
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">loadFactoryNames</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">factoryType</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">ClassLoader</span> <span class="n">classLoader</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">factoryTypeName</span> <span class="o">=</span> <span class="n">factoryType</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
    <span class="k">return</span> <span class="nf">loadSpringFactories</span><span class="o">(</span><span class="n">classLoader</span><span class="o">).</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">factoryTypeName</span><span class="o">,</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">());</span>
<span class="o">}</span>

<span class="cm">/**
 * The location to look for factories.
 * 用于查询工厂的位置
 * &lt;p&gt;Can be present in multiple JAR files.
 * 可以存在于多个jar文件中
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">FACTORIES_RESOURCE_LOCATION</span> <span class="o">=</span> <span class="s">"META-INF/spring.factories"</span><span class="o">;</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="nf">loadSpringFactories</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="nc">ClassLoader</span> <span class="n">classLoader</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//首先尝试从缓存中读取,因为该方法执行结束后会将配置文件中所有的信息放到缓存中,如果缓存中有直接返回</span>
    <span class="nc">MultiValueMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">classLoader</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">//读取项目中所有存在 META-INF/spring.factories的URL</span>
        <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="no">URL</span><span class="o">&gt;</span> <span class="n">urls</span> <span class="o">=</span> <span class="o">(</span><span class="n">classLoader</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span>
                <span class="n">classLoader</span><span class="o">.</span><span class="na">getResources</span><span class="o">(</span><span class="no">FACTORIES_RESOURCE_LOCATION</span><span class="o">)</span> <span class="o">:</span>
                <span class="nc">ClassLoader</span><span class="o">.</span><span class="na">getSystemResources</span><span class="o">(</span><span class="no">FACTORIES_RESOURCE_LOCATION</span><span class="o">));</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedMultiValueMap</span><span class="o">&lt;&gt;();</span>
        <span class="c1">//读取每一个URL并将属性以K-V的形式保存到Properties中, 再将所有属性保存在result中</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">urls</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="n">urls</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
            <span class="nc">UrlResource</span> <span class="n">resource</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UrlResource</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
            <span class="nc">Properties</span> <span class="n">properties</span> <span class="o">=</span> <span class="nc">PropertiesLoaderUtils</span><span class="o">.</span><span class="na">loadProperties</span><span class="o">(</span><span class="n">resource</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;?,</span> <span class="o">?&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">properties</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">factoryTypeName</span> <span class="o">=</span> <span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">()).</span><span class="na">trim</span><span class="o">();</span>
                <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">factoryImplementationName</span> <span class="o">:</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">commaDelimitedListToStringArray</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">()))</span> <span class="o">{</span>
                    <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">factoryTypeName</span><span class="o">,</span> <span class="n">factoryImplementationName</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">//将result保存到缓存中</span>
        <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">classLoader</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Unable to load factories from location ["</span> <span class="o">+</span>
                <span class="no">FACTORIES_RESOURCE_LOCATION</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>通过代码分析发现, <strong>loadSpringFactories</strong> 的主要作用就是读取所有 <strong>META-INF/spring.factories</strong> 中的所有配置信息并保存到缓存中, 并返回指定类型的集合.<br />
现在我们已经找到指定类的所有实现类了,接下来我们就应该实例化它们.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">List</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">createSpringFactoriesInstances</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">parameterTypes</span><span class="o">,</span>
        <span class="nc">ClassLoader</span> <span class="n">classLoader</span><span class="o">,</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">instances</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">names</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//加载每一个class类</span>
            <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">instanceClass</span> <span class="o">=</span> <span class="nc">ClassUtils</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">classLoader</span><span class="o">);</span>
            <span class="nc">Assert</span><span class="o">.</span><span class="na">isAssignable</span><span class="o">(</span><span class="n">type</span><span class="o">,</span> <span class="n">instanceClass</span><span class="o">);</span>
            <span class="nc">Constructor</span><span class="o">&lt;?&gt;</span> <span class="n">constructor</span> <span class="o">=</span> <span class="n">instanceClass</span><span class="o">.</span><span class="na">getDeclaredConstructor</span><span class="o">(</span><span class="n">parameterTypes</span><span class="o">);</span>
            <span class="c1">//使用反射构造该类实例 通常采用默认构造</span>
            <span class="no">T</span> <span class="n">instance</span> <span class="o">=</span> <span class="o">(</span><span class="no">T</span><span class="o">)</span> <span class="nc">BeanUtils</span><span class="o">.</span><span class="na">instantiateClass</span><span class="o">(</span><span class="n">constructor</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
            <span class="n">instances</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">instance</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Cannot instantiate "</span> <span class="o">+</span> <span class="n">type</span> <span class="o">+</span> <span class="s">" : "</span> <span class="o">+</span> <span class="n">name</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">instances</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>如果你经常使用反射的话,这段代码就比较容易理解了,无非就是使用反射创建类实例.</p>

<h3 id="总结">总结</h3>
<hr />
<p>由上可知,在 <strong>SpringApplication</strong> 构造中主要是做了设置主函数资源、判断当前应用类型和加载并实例化所有 <strong>ApplicationContextInitializer</strong> 和 <strong>ApplicationListener</strong> 的实现类.</p>
<hr />

<h3 id="扩展">扩展</h3>
<hr />
<p>主要就是针对 <strong>ApplicationListener</strong> 和 <strong>ApplicationContextInitializer</strong> 进行扩展.两者扩展类似,那我就以 <strong>ApplicationListener</strong> 为例.</p>

<p>1.第一步肯定是自己创建一个测试类 <strong>MyApplicationListener</strong> 实现 <strong>ApplicationListener</strong> ,这里需要注意下我们需要指定需要监听的事件类型,主要类图见下<br />
2.第二步就是实现需要重写的接口,在接口中添加自己的实现,我们就简单打一行日志</p>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/MyApplicationListener.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="MyApplicationListener" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/MyApplicationListener.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">MyApplicationListener</div>
    </a>
</center>

<p>3.第三步也就是最重要的一步,你想想我们现在已经自己新建了类,但是应用还是无法找你的类,那么我们就应该让应用扫描到新类,这样才能在调用的时候调用我们自己重写的方法.<br />
那么就需要我们在 <strong>resources</strong> 目录下新建 <strong>META-INF/spring.factories</strong> 文件,并在该文件中指定你的实现类,这样就能让应用加载到你的类</p>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/spring.factories.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="spring.factories" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/spring.factories.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">spring.factories</div>
    </a>
</center>

<hr />
<p><strong>ApplicationEvent</strong> 对应子类类图如下:</p>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/ApplicationEvent.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="ApplicationEvent" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/ApplicationEvent.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">ApplicationEvent</div>
    </a>
</center>

<h3 id="spi机制">SPI机制</h3>
<hr />
<h4 id="概念">概念</h4>
<hr />
<p>其实上面的加载过程就是SPI机制,SpringBoot加以改造了一下.<br />
SPI的全名为 Service Provider Interface, 目的是提供接口,让第三方提供自定义实现的服务功能.目前不少框架使用它来做服务的扩展.</p>
<hr />

<h4 id="实现">实现</h4>
<hr />
<p>1.自定义已经接口以及其实现类</p>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/spi基类.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="spi基类" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/spi基类.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">spi基类</div>
    </a>
</center>

<p>2.在 <strong>META-INF/services</strong> 目录中创建以接口全限定名命名的文件,文件内容为接口具体实现的全限定名</p>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/services.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="META-INF/services" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/services.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">META-INF/services</div>
    </a>
</center>

<p>3.使用 __ServiceLoader.load(Class<T>)__ 类动态加载目录下的实现类</T></p>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/main.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="main" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/main.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">main</div>
    </a>
</center>

<p>4.具体实现类必须有一个不带参数的构造方法</p>

<hr />

</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">September 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000010" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>BinarySearch</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-victoria-borodinova-9201864.jpg" class="img-responsive img-centered" alt="BinarySearch">

                            
                                <h3>二分查找</h3>
                            
                            </div>

                            <p><h3 id="定义">定义</h3>
<hr />
<p>二分查找也称为折半查找,它是一种效率较高的查找方法.但是它要求是线性表必须采用顺序存储结构,而且表中的元素是有序的.</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<p>例如:查找 <strong>nums</strong> 有序数组中, <strong>target</strong> 在nums中的位置</p>
<ol>
  <li>首先定义左右指针 <strong>left=0</strong> 和 <strong>right=nums.length-1</strong></li>
  <li>遍历数组,退出条件为 <strong>left&lt;=right</strong></li>
  <li>找到中间位置 <strong>mid=left+(right-left)/2</strong> ,此时 <strong>nums[0…mid-1]</strong> 的值都小于 <strong>nums[mid]</strong> , <strong>nums[mid+1…len]</strong> 的值都大于 <strong>nums[mid]</strong></li>
  <li>比较中间位置的值 <strong>nums[mid]</strong> 和 <strong>target</strong> 的值,有三种情况:
    <ul>
      <li>若 <strong>nums[mid]=target</strong> ,直接返回 <strong>mid</strong></li>
      <li>若 <strong>nums[mid]&lt;target</strong> ,中间值小于目标值,那么接下来应该在区间 <strong>[mid+1,len]</strong> 中查找,即 <strong>left=mid+1</strong></li>
      <li>若 <strong>nums[mid]&gt;target</strong> ,中间值大于目标值,那么接下来应该在区间 <strong>[0,mid-1]</strong> 中查找,即 <strong>right=mid-1</strong></li>
    </ul>
  </li>
  <li>若按步骤4没有找到,说明数组中不存在等于 <strong>target</strong> 的索引
    <hr />
  </li>
</ol>

<h3 id="遍历图解">遍历图解</h3>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearch/二分查找.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="二分查找" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearch/二分查找.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">二分查找</div>
    </a>
</center>

<h3 id="代码">代码</h3>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">binarySearch</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">array</span><span class="o">,</span> <span class="kt">int</span> <span class="n">target</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="o">(</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">==</span> <span class="n">target</span><span class="o">){</span>
            <span class="k">return</span> <span class="n">mid</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(logn)<br />
空间复杂度为:O(1)</p>
</blockquote>

<h3 id="扩展">扩展</h3>
<hr />
<p>正常遇到的二分查找一般不会这么简单.我们还需要了解一些二分查找的扩展.<br />
例如给定的数组中有多个重复元素,那么我们如何找出给定 <strong>target</strong> 的最左或最右索引位置.<br />
整体逻辑同二分查找类似, 不同点在于:</p>
<ol>
  <li>退出循环条件, <strong>left&lt;right</strong></li>
  <li>当 <strong>nums[mid]&gt;target</strong> ,直接将 <strong>mid</strong> 赋值给 <strong>right</strong></li>
  <li>当 <strong>nums[mid]==target</strong> 时,有两种情况:
    <ul>
      <li>若取最左位置,则继续向左搜索,即限制右指针, <strong>right=mid</strong></li>
      <li>若取最右位置,则继续向右搜索,即限制左指针, <strong>left=mid+1</strong></li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>java代码</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">binarySearchLeft</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">array</span><span class="o">,</span> <span class="kt">int</span> <span class="n">target</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="o">(</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">==</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">left</span> <span class="o">==</span> <span class="n">array</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">array</span><span class="o">[</span><span class="n">left</span><span class="o">]</span> <span class="o">==</span> <span class="n">target</span><span class="o">?</span> <span class="n">left</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">binarySearchRight</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">array</span><span class="o">,</span> <span class="kt">int</span> <span class="n">target</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span><span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="o">(</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">==</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">array</span><span class="o">[</span><span class="n">mid</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">target</span><span class="o">){</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">left</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">array</span><span class="o">[</span><span class="n">left</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="n">target</span><span class="o">?</span> <span class="n">left</span><span class="o">-</span><span class="mi">1</span><span class="o">:-</span><span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">public:</span>
	<span class="kt">int</span> <span class="nf">binarySearch</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">left</span><span class="o">&lt;=</span><span class="n">right</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">(</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">==</span><span class="n">target</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">&gt;</span><span class="n">target</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">right</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span>
			<span class="p">{</span>
				<span class="n">left</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>
<span class="err">}</span><span class="p">;</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">binarySearch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">target</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="n">left</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">right</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="k">while</span> <span class="n">left</span><span class="o">&lt;=</span><span class="n">right</span><span class="p">:</span>
        <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span><span class="o">+</span><span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
        <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">==</span><span class="n">target</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mid</span>
        <span class="k">elif</span> <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">&gt;</span><span class="n">target</span><span class="p">:</span>
            <span class="n">right</span><span class="o">=</span><span class="n">mid</span><span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">left</span><span class="o">=</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">binarySearch</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">target</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="n">left</span><span class="o">:=</span><span class="m">0</span>
	<span class="n">right</span><span class="o">:=</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">-</span><span class="m">1</span>
	<span class="k">for</span> <span class="n">left</span><span class="o">&lt;=</span><span class="n">right</span> <span class="p">{</span>
		<span class="n">mid</span> <span class="o">:=</span><span class="n">left</span><span class="o">+</span><span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="p">)</span><span class="o">/</span><span class="m">2</span>
		<span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">==</span><span class="n">target</span> <span class="p">{</span>
			<span class="k">return</span> <span class="n">mid</span>
		<span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">&gt;</span><span class="n">target</span> <span class="p">{</span>
			<span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="m">1</span>
		<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
			<span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="m">1</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="o">-</span><span class="m">1</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Search</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000011" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>BinarySearchTree</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-julia-volk-5273316.jpg" class="img-responsive img-centered" alt="BinarySearchTree">

                            
                                <h3>二查叉找树</h3>
                            
                            </div>

                            <p><h3 id="定义">定义</h3>
<hr />
<p>二叉查找树(BinarySearchTree,简称BST)又称为二叉排序树(BinarySortTree).<br />
一棵二叉查找树是一棵二叉树,其中每个节点都含有一个 <strong>Comparable</strong> 的键(以及相关联的值)且每个节点的键都大于等于其左子树中的任意节点而小于右子树的任意节点.</p>
<hr />

<h3 id="基本实现">基本实现</h3>
<hr />
<ol>
  <li>数据表示
和链表一样,我们嵌套定义了一个所有类来表示二叉查找树上的一个节点.每个节点都含有一个键、一个值、一条左链接、一条右链接和一个节点计数器.左链接指向一棵由小于该节点的所有键组成的二叉树,右链接指向一棵由大于该节点的所有键组成的二叉查找树.变量 <strong>N</strong> 给出了以该节点为根的子树的节点总数.<br />
一棵二叉查找树代表了一组键(及其相应的值)的集合,而同一个集合可以用多棵不同的二叉查找树表示.如果我们将一棵二叉查找树的所有键投影到一条直线上,保证一个节点的左子树中的键出现在它的左边,右子树中的键出现在它的右边,那么我们一定可以得到一条有序的键列.</li>
</ol>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/两棵能够表示同一组键的二叉查找树.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="两棵能够表示同一组键的二叉查找树" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/两棵能够表示同一组键的二叉查找树.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">两棵能够表示同一组键的二叉查找树</div>
    </a>
</center>
<ol>
  <li>查找
在二叉查找树中查找一个键的递归算法:如果树是空的,则查找未命中;如果被查找的键和根节点的键相等,则查找命中,否则我们就递归的在适当的子树中继续查找.如果被查找的键较小就选择左子树,较大则选择右子树.</li>
</ol>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/二叉查找树中的查找命中(左)和未命中(右).png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="二叉查找树中的查找命中(左)和未命中(右)" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/二叉查找树中的查找命中(左)和未命中(右).png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">二叉查找树中的查找命中(左)和未命中(右)</div>
    </a>
</center>
<ol>
  <li>插入
如果树是空的,就返回一个含有该键值对的新节点;如果被查找的键小于根节点的键,会继续在左子树中插入该键,否则在右子树中插入该键.</li>
</ol>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/二叉查找树的插入操作.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="二叉查找树的插入操作" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/二叉查找树的插入操作.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">二叉查找树的插入操作</div>
    </a>
</center>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BST</span><span class="o">&lt;</span><span class="nc">Key</span> <span class="kd">extends</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">Key</span><span class="o">&gt;,</span> <span class="nc">Value</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Node</span> <span class="n">root</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">{</span>
        <span class="kd">private</span> <span class="nc">Key</span> <span class="n">key</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">Value</span> <span class="n">value</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">Node</span> <span class="n">left</span><span class="o">,</span><span class="n">right</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="no">N</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">Node</span><span class="o">(</span><span class="nc">Key</span> <span class="n">key</span><span class="o">,</span> <span class="nc">Value</span> <span class="n">value</span><span class="o">,</span> <span class="kt">int</span> <span class="no">N</span><span class="o">){</span>
            <span class="k">this</span><span class="o">.</span><span class="na">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">value</span><span class="o">=</span><span class="n">value</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">N</span> <span class="o">=</span> <span class="no">N</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(){</span>
        <span class="k">return</span> <span class="nf">size</span><span class="o">(</span><span class="n">root</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(</span><span class="nc">Node</span> <span class="n">x</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">x</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="na">N</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Value</span> <span class="nf">get</span><span class="o">(</span><span class="nc">Key</span> <span class="n">key</span><span class="o">){</span>
        <span class="k">return</span> <span class="nf">get</span><span class="o">(</span><span class="n">root</span><span class="o">,</span> <span class="n">key</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">Value</span> <span class="nf">get</span><span class="o">(</span><span class="nc">Node</span> <span class="n">x</span><span class="o">,</span><span class="nc">Key</span> <span class="n">key</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">x</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">cmp</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">key</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">cmp</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="n">get</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">left</span><span class="o">,</span> <span class="n">key</span><span class="o">);</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">cmp</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="n">get</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">right</span><span class="o">,</span> <span class="n">key</span><span class="o">);</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">put</span><span class="o">(</span><span class="nc">Key</span> <span class="n">key</span><span class="o">,</span> <span class="nc">Value</span> <span class="n">value</span><span class="o">){</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">put</span><span class="o">(</span><span class="n">root</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">Node</span> <span class="nf">put</span><span class="o">(</span><span class="nc">Node</span> <span class="n">x</span><span class="o">,</span> <span class="nc">Key</span> <span class="n">key</span><span class="o">,</span> <span class="nc">Value</span> <span class="n">value</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">x</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">cmp</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">key</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">cmp</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">)</span> <span class="n">x</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">put</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">left</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">cmp</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">)</span> <span class="n">x</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">put</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">right</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
        <span class="k">else</span> <span class="n">x</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
        <span class="n">x</span><span class="o">.</span><span class="na">N</span> <span class="o">=</span> <span class="n">size</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">left</span><span class="o">)</span> <span class="o">+</span> <span class="n">size</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">right</span><span class="o">)</span> <span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />
<h3 id="分析">分析</h3>
<hr />
<p>使用二叉查找树的算法运行时间取决于树的形状,而树的形状取决于键被插入的先后顺序.在最好的情况下,一棵含有 <strong>N</strong> 个节点的树是完全平衡的,每条空链接和根节点的距离都为 <strong>lgN</strong> .在最坏的情况下,搜索路径上可能有 <strong>N</strong> 个节点.</p>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/二叉查找树的可能形状.png">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="二叉查找树的可能形状" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binarySearchTree/二叉查找树的可能形状.png" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">二叉查找树的可能形状</div>
    </a>
</center>
<hr />

<h3 id="有序性相关的方法与删除操作">有序性相关的方法与删除操作</h3>
<hr />
<hr />

<h3 id="扩展">扩展</h3>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">xxx</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">xxx</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">xxx</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Tree</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">September 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000009" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>BinaryTree</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-karina-zhukovskaya-7260333.jpg" class="img-responsive img-centered" alt="binaryTree">

                            
                                <h3>二叉树基本概念</h3>
                            
                            </div>

                            <p><h3 id="定义">定义</h3>
<hr />
<p>二叉树是指树中节点的度不大于2的有序树,他是一种最简单且最重要的树.二叉树的递归定义为:二叉树是一棵空树,或者是一棵由一个根节点和两棵互不相交的,分别称作根的左子树和右子树组成的非空树;左子树和右子树又同样都是二叉树.</p>
<hr />

<h3 id="相关术语">相关术语</h3>
<hr />
<ol>
  <li>节点:包含一个数据元素及若干指向子树分支的信息</li>
  <li>节点的度:一个节点拥有子树的数目称为节点的度</li>
  <li>叶子节点:也成为终端节点,没有子树的节点或者度为零的节点</li>
  <li>分支节点:也称为非终端节点,度不为零的节点称为非终端节点</li>
  <li>树的度:树中所有节点的度的最大值</li>
  <li>节点的层次:从根节点开始,假设根节点为第1层,根节点的子节点为第2层,以此类推,如果第一个节点位于第L层,则其子节点位于第L+1层</li>
  <li>树的深度:也称为树的高度,树中所有节点的层次最大值称为树的深度</li>
  <li>有序树:如果树中各棵树的次序是有先后次序的,则称该树为有序树</li>
  <li>无序树:如果树中各棵子树的次序没有先后次序,则称该树为无序树</li>
  <li>森林:由m(m&gt;=0)棵互不相交的树构成一片森林.如果把一棵非空的树的根节点删除,则该树就变成了一片森林,森林中的树由原来根节点的各棵子树构成</li>
</ol>

<hr />
<h3 id="常见的树类型">常见的树类型</h3>
<hr />
<ol>
  <li>满二叉树:如果一棵二叉树只有度为0的节点和度为2的节点,并且度为0的节点在同一层上,则这棵二叉树为满二叉树</li>
  <li>完全二叉树:深度为k,有n个节点的二叉树当且仅当其每一个节点都与深度为k的满二叉树中编号从1到n的节点一一对应时,称为完全二叉树</li>
</ol>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binaryTree/相关二叉树图解.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="相关二叉树图解" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binaryTree/相关二叉树图解.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">相关二叉树图解</div>
    </a>
</center>

<h3 id="二叉树性质">二叉树性质</h3>
<hr />
<ol>
  <li>二叉树的第 <strong>i</strong> 层上最多有 <strong>2^i-1</strong> (i&gt;=1)个节点</li>
  <li>深度为 <strong>h</strong> 的二叉树中至多含有 <strong>2^h -1</strong> 个节点</li>
  <li>若在任意一棵二叉树中,有 <strong>n0</strong> 个叶子节点,有 <strong>n2</strong> 个度为2的节点,则必有 <strong>n0=n2+1</strong></li>
  <li>具有 <strong>n</strong> 个节点的完全二叉树深为 <strong>log2x+1</strong></li>
  <li>若对一棵有 <strong>n</strong> 个节点的完全二叉树进行顺序编号(1&lt;=i&lt;=n),那么对于编号为 <strong>i</strong> (i&gt;=1)的节点:
    <ul>
      <li>当 <strong>i=1</strong> 时,该节点为根,它无双亲节点</li>
      <li>当 <strong>i&gt;1</strong> 时,该节点的双亲节点的编号为 <strong>i/2</strong></li>
      <li>若 <strong>2i&lt;=n</strong> ,则有编号为 <strong>2i</strong> 的左节点,否则没有左节点</li>
      <li>若 <strong>2i+1&lt;=n</strong> ,则有编号为 <strong>2i+1</strong> 的右节点,否则没有右节点</li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="二叉树的存储方式">二叉树的存储方式</h3>
<hr />
<p>一般我们使用TreeNode对象来表示一个节点, <strong>val</strong> 代表该节点额值, <strong>left</strong> 代表该节点的左子节点, <strong>right</strong> 代表该节点的右子节点</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TreeNode</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">val</span><span class="o">;</span>
    <span class="nc">TreeNode</span> <span class="n">left</span><span class="o">;</span>
    <span class="nc">TreeNode</span> <span class="n">right</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="二叉树的遍历方式">二叉树的遍历方式</h3>
<hr />
<p>二叉树可以使用深度优先遍历(DFS)或广度优先遍历(BFS).<br />
深度优先遍历又可以分为先序遍历、中序遍历、后序遍历三种方式.每种方式只是访问节点的顺序不同.</p>
<ul>
  <li>先序遍历:根节点-&gt;左子节点-&gt;右子节点</li>
  <li>中序遍历:左子节点-&gt;根节点-&gt;右子节点</li>
  <li>后序遍历:左子节点-&gt;右子节点-&gt;根节点</li>
</ul>

<p>广度优先遍历又被称为层序遍历,即按照二叉树的每一层进行遍历</p>

<p><strong>特殊性质</strong> :二叉搜索树采用中序遍历,其实就是一个有序数组.</p>

<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binaryTree/二叉树的遍历.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="二叉树的遍历" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binaryTree/二叉树的遍历.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">二叉树的遍历</div>
    </a>
</center>

<h3 id="遍历图解">遍历图解</h3>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binaryTree/二叉树遍历图解.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="二叉树遍历图解" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/binaryTree/二叉树遍历图解.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">二叉树遍历图解</div>
    </a>
</center>

<h3 id="代码">代码</h3>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">res</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">dfs</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">node</span><span class="o">){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="c1">//1.先序遍历</span>
        <span class="n">res</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">val</span><span class="o">);</span>
        <span class="n">dfs</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">left</span><span class="o">);</span>
        <span class="c1">//2.中序遍历</span>
        <span class="n">res</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">val</span><span class="o">);</span>
        <span class="n">dfs</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">right</span><span class="o">);</span>
        <span class="c1">//3.后序遍历</span>
        <span class="n">res</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">val</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">bfs</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">node</span><span class="o">){</span>
    <span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">TreeNode</span><span class="o">&gt;</span> <span class="n">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;&gt;();</span>
    <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(!</span><span class="n">queue</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()){</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
            <span class="nc">TreeNode</span> <span class="n">poll</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="n">res</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">poll</span><span class="o">.</span><span class="na">val</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">poll</span><span class="o">.</span><span class="na">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">poll</span><span class="o">.</span><span class="na">left</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">poll</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="n">queue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">poll</span><span class="o">.</span><span class="na">right</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>DFS时间复杂度:O(logn)  BFS时间复杂度:O(n)<br />
空间复杂度都为:O(1)</p>
</blockquote>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>

	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">;</span>

	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sort</span><span class="p">(</span><span class="k">struct</span> <span class="nc">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
		<span class="k">return</span> <span class="n">res</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">dfs</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="c1">//1.先序遍历</span>
			<span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
			<span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
			<span class="c1">//2.中序遍历</span>
			<span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
			<span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
			<span class="c1">//3.后序遍历</span>
			<span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sortBFS</span><span class="p">(</span><span class="k">struct</span> <span class="nc">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">queue</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">queue</span><span class="p">;</span>
		<span class="n">queue</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
		<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">queue</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
		<span class="p">{</span>
			<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">TreeNode</span><span class="o">*</span> <span class="n">pop</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">front</span><span class="p">();</span>
				<span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
				<span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">queue</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">queue</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="n">res</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">traverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span><span class="n">TreeNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">node</span><span class="p">:</span><span class="n">TreeNode</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">node</span><span class="p">:</span>
                <span class="c1">#1.先序遍历
</span>                <span class="c1">#res.append(node.val)
</span>                <span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">)</span>
                <span class="c1">#2.中序遍历
</span>                <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">)</span>
                <span class="c1">#3.后序遍历
</span>                <span class="c1">#res.append(node.val)
</span>        <span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">traverseBSF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">:</span><span class="n">TreeNode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">res</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">temp</span><span class="p">.</span><span class="n">left</span><span class="p">:</span>
                    <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">left</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">temp</span><span class="p">.</span><span class="n">right</span><span class="p">:</span>
                    <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">right</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">traverse</span><span class="p">(</span><span class="n">node</span> <span class="o">*</span><span class="n">TreeNode</span><span class="p">)</span> <span class="p">[]</span><span class="kt">int</span> <span class="p">{</span>
	<span class="n">res</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{}</span>
	<span class="k">var</span> <span class="n">dfs</span> <span class="k">func</span><span class="p">(</span><span class="n">node</span> <span class="o">*</span><span class="n">TreeNode</span><span class="p">)</span>
	<span class="n">dfs</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">node</span> <span class="o">*</span><span class="n">TreeNode</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="n">node</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
			<span class="c">//1.先序遍历</span>
			<span class="n">res</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">Val</span><span class="p">)</span>
			<span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">Left</span><span class="p">)</span>
			<span class="c">//2.中序遍历</span>
			<span class="n">res</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">Val</span><span class="p">)</span>
			<span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">Right</span><span class="p">)</span>
			<span class="c">//3.后序遍历</span>
			<span class="n">res</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">Val</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">dfs</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">res</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">BFS</span><span class="p">(</span><span class="n">node</span> <span class="o">*</span><span class="n">TreeNode</span><span class="p">)</span> <span class="p">[]</span><span class="kt">int</span> <span class="p">{</span>
	<span class="n">res</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
	<span class="n">queue</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="o">*</span><span class="n">TreeNode</span> <span class="p">,</span> <span class="m">0</span><span class="p">)</span>
	<span class="n">queue</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
	<span class="k">for</span> <span class="nb">len</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span><span class="o">!=</span><span class="m">0</span> <span class="p">{</span>
		<span class="n">temp</span> <span class="o">:=</span> <span class="n">queue</span><span class="p">[</span><span class="m">0</span><span class="p">]</span>
		<span class="n">res</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">temp</span><span class="o">.</span><span class="n">Val</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">temp</span><span class="o">.</span><span class="n">Left</span><span class="o">!=</span><span class="no">nil</span> <span class="p">{</span>
			<span class="n">queue</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">temp</span><span class="o">.</span><span class="n">Left</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">temp</span><span class="o">.</span><span class="n">Right</span><span class="o">!=</span><span class="no">nil</span> <span class="p">{</span>
			<span class="n">queue</span> <span class="o">=</span> <span class="nb">append</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">temp</span><span class="o">.</span><span class="n">Right</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="n">queue</span> <span class="o">=</span> <span class="n">queue</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="p">]</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">res</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Sort</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000008" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>RadixSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-roman-odintsov-5327786.jpg" class="img-responsive img-centered" alt="radixSort">

                            
                                <h3>基数排序</h3>
                            
                            </div>

                            <p><h3 id="前置概念">前置概念</h3>
<hr />

<p>最高位优先(Most Significant Digit First)</p>
<ul>
  <li>简称MSD法,先按 <strong>k1</strong> 排序分组,同一组中记录,关键码 <strong>k1</strong> 相等,再对各组按 <strong>k2</strong> 排序分成子组,之后,对后面的关键码继续这样的排序分组,直到按最次位关键码 <strong>kd</strong> 对各子组排序后,再将各组连接起来,便得到一个有序序列.</li>
</ul>

<p>最低位优先(Least Significant Digit First)</p>
<ul>
  <li>简称LSD法,先从 <strong>kd</strong> 开始排序,再对 <strong>kd-1</strong> 进行排序,依次重复,直到对 <strong>k1</strong> 排序后便得到一个有序序列</li>
</ul>

<hr />

<h3 id="基本思想">基本思想</h3>
<hr />
<p>基数排序又称为桶排序(bucket sort).他是通过键值的部分信息,将要排序的元素分配到某些桶中,再从从小到大的桶中取出数据放回到原数组中,直到所有情况的桶都排序完成后,整个数组有序.</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<p>以最低位优先为例:</p>
<ol>
  <li>首先将给定的nums根据个位数的数值,将他们分配值编号0到9的桶中,使用temp来记录第 <strong>i</strong> 号桶内存放的nums元素,使用order来记录第 <strong>i</strong> 号桶内有多少个元素</li>
  <li>接着将temp中的元素按照桶从0到9的顺序在放回数组nums中,并记得重置对应的order值</li>
  <li>最后将位数不断上升,重复以上步骤,最高位处理完即数组有序
    <hr />
  </li>
</ol>

<h3 id="图解">图解</h3>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/radixSort/基数排序.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="基数排序" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/radixSort/基数排序.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">RadixSort</div>
    </a>
</center>

<h3 id="代码">代码</h3>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">radixSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">d</span><span class="o">){</span>
    <span class="c1">//每次排序使用的索引</span>
    <span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
    <span class="c1">//表明取的第几位数</span>
    <span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
    <span class="c1">//表明当前正在排序第几位数</span>
    <span class="kt">int</span> <span class="n">m</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>

    <span class="c1">//temp i存放0-9 j存放对应的值</span>
    <span class="c1">//例如 给定 nums[20] 那么 temp[0][1] = 20</span>
    <span class="kt">int</span><span class="o">[][]</span> <span class="n">temp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">10</span><span class="o">][</span><span class="n">len</span><span class="o">];</span>
    <span class="c1">//存放0-9每个位置有多少个值 用于temp找到nums中的元素</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">10</span><span class="o">];</span>

    <span class="c1">//m从1开始一直处理到d</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">&lt;=</span><span class="n">d</span><span class="o">){</span>
        <span class="c1">//首轮遍历 填充temp和order</span>
        <span class="c1">//1. 首先先计算出最低位 lsd</span>
        <span class="c1">//2. 然后根据lsd的值将nums填充到temp指定的位置,并将order对应lsd位置加一</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
            <span class="kt">int</span> <span class="n">lsd</span> <span class="o">=</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]/</span><span class="n">n</span><span class="o">)%</span><span class="mi">10</span><span class="o">;</span>
            <span class="n">temp</span><span class="o">[</span><span class="n">lsd</span><span class="o">][</span><span class="n">order</span><span class="o">[</span><span class="n">lsd</span><span class="o">]++]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="o">}</span>

        <span class="c1">//经过第一轮遍历 我们已经按照lsd将数组赋值到 temp中, 接下来进行排序</span>
        <span class="c1">//因为数字最多就是9位,所以第二轮遍历就是从0-9</span>
        <span class="c1">//只要order[i]还存在元素,即order[i]!=0, 那么我们就要遍历order[i],从temp中取到对应值即temp[i][j],并赋值到原始数组nums中. 最后要把order[i]置为0即尾数为i的全都处理完毕</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">order</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">){</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">order</span><span class="o">[</span><span class="n">i</span><span class="o">];</span><span class="n">j</span><span class="o">++){</span>
                    <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">++]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">];</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">order</span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="c1">//最后重置 k为0,即下次排序继续从0开始</span>
        <span class="c1">//n=n*10 表明取下一位数 个位-十位-百位</span>
        <span class="c1">//m+=1 表明处理到了第几位</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
        <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="o">*</span><span class="mi">10</span><span class="o">;</span>
        <span class="n">m</span><span class="o">+=</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(NlogN)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="kt">void</span> <span class="n">radixSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">d</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">temp</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">len</span><span class="p">));</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">order</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

		<span class="k">while</span> <span class="p">(</span><span class="n">m</span><span class="o">&lt;=</span><span class="n">d</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="kt">int</span> <span class="n">lsd</span> <span class="o">=</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
				<span class="n">temp</span><span class="p">[</span><span class="n">lsd</span><span class="p">][</span><span class="n">order</span><span class="p">[</span><span class="n">lsd</span><span class="p">]</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="p">}</span>

			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span><span class="mi">0</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> 
					<span class="p">{</span>
						<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
					<span class="p">}</span>
				<span class="p">}</span>
				<span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">m</span><span class="o">++</span><span class="p">;</span>
			<span class="n">n</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">radixSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">d</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">n</span><span class="o">=</span><span class="mi">1</span>
        <span class="n">m</span><span class="o">=</span><span class="mi">1</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">length</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span>

        <span class="k">while</span> <span class="n">m</span><span class="o">&lt;=</span><span class="n">d</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">length</span><span class="p">):</span>
                <span class="n">lsd</span>  <span class="o">=</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">//</span><span class="n">n</span><span class="p">)</span><span class="o">%</span><span class="mi">10</span>
                <span class="n">temp</span><span class="p">[</span><span class="n">lsd</span><span class="p">][</span><span class="n">order</span><span class="p">[</span><span class="n">lsd</span><span class="p">]]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">order</span><span class="p">[</span><span class="n">lsd</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
                        <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                        <span class="n">k</span><span class="o">+=</span><span class="mi">1</span>
                <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">k</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">m</span><span class="o">+=</span><span class="mi">1</span>
            <span class="n">n</span><span class="o">*=</span><span class="mi">10</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">radixSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">d</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
	<span class="n">k</span> <span class="o">:=</span> <span class="m">0</span>
	<span class="n">n</span> <span class="o">:=</span> <span class="m">1</span>
	<span class="n">m</span> <span class="o">:=</span> <span class="m">1</span>
	<span class="nb">len</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
	<span class="n">temp</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([][]</span><span class="kt">int</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">temp</span><span class="p">{</span>
		<span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="nb">len</span><span class="p">)</span>
	<span class="p">}</span>
	
	<span class="n">order</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">m</span><span class="o">&lt;=</span><span class="n">d</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">;</span><span class="n">i</span><span class="o">++</span> <span class="p">{</span>
			<span class="n">lsd</span> <span class="o">:=</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="o">%</span><span class="m">10</span>
			<span class="n">temp</span><span class="p">[</span><span class="n">lsd</span><span class="p">][</span><span class="n">order</span><span class="p">[</span><span class="n">lsd</span><span class="p">]]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
			<span class="n">order</span><span class="p">[</span><span class="n">lsd</span><span class="p">]</span><span class="o">++</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="m">10</span><span class="p">;</span><span class="n">i</span><span class="o">++</span> <span class="p">{</span>
			<span class="k">if</span> <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="m">0</span> <span class="p">{</span>
				<span class="k">for</span> <span class="n">j</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="n">j</span><span class="o">++</span> <span class="p">{</span>
					<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
					<span class="n">k</span><span class="o">++</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="m">0</span>
		<span class="p">}</span>
		<span class="n">m</span><span class="o">++</span>
		<span class="n">k</span><span class="o">=</span><span class="m">0</span>
		<span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="o">*</span><span class="m">10</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Sort</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000007" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>ShellSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-alena-beliaeva-8697338.jpg" class="img-responsive img-centered" alt="shellSort">

                            
                                <h3>希尔排序</h3>
                            
                            </div>

                            <p><h3 id="缘由">缘由</h3>
<hr />

<p>对于大规模乱序数组插入排序很慢,因为它只会交换相邻的元素,因此元素只能一点点的从数组的一端移动到另一端.<br />
例如,如果主键最小的元素正好在数组的尽头,要将它挪到正确的位置就需要N-1次移动.<br />
希尔排序为了加速简单地改进了插入排序,交换不相邻的元素以对数组的局部进行排序并最终用插入排序将局域有序的数组排序.</p>

<hr />

<h3 id="基本思想">基本思想</h3>
<hr />
<p>使数组中任意间隔为h的元素都是有序的,这样的数组称为h有序数组.<br />
换句话说,一个h有序数组就是h个互相独立的有序数组编织在一起组成的一个数组,在进行排序时,如果h很大,我们就能将元素移动到很远的地方,为实现更小的h有序创造方便.<br />
用这种方法,对于任意以1结尾的h序列,我们都能够将数组排序.</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<p>对于每个h,用插入排序将h个子数组独立的排序.但因为子数组是相互独立的,一个更简单的方法是在h-子数组中将每个元素交换到比它大的元素之前去（将比它大的元素向右移动一格）.只需要在插入排序的代码中将移动元素的距离由1改为h即可.这样,希尔排序的实现就转化为了一个类似于插入排序但使用不同增量的过程.<br />
希尔排序更高效的原因是它权衡了子数组的规模和有序性.排序之初,各个子数组都很短,排序之后子数组都是部分有序的,这两种情况都很适合插入排序.子数组部分有序的程度取决于递增序列的选择.</p>
<hr />

<h3 id="如何选择递增序列">如何选择递增序列</h3>
<hr />
<p>算法的性能不仅取决于h,还取决于h之间的数学性质,比如他们的公因子等.这个需要视情况而定.</p>
<hr />

<h3 id="图解">图解</h3>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/shellSort/shellSort.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="希尔排序" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/shellSort/shellSort.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">ShellSort</div>
    </a>
</center>

<h4 id="代码">代码</h4>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">shellSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">factor</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">h</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">h</span><span class="o">&lt;</span><span class="n">len</span><span class="o">/</span><span class="n">factor</span><span class="o">){</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">*</span><span class="n">factor</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">h</span><span class="o">&gt;=</span><span class="mi">1</span><span class="o">){</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">h</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">;</span><span class="n">j</span><span class="o">&gt;=</span><span class="n">h</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]&lt;</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="n">h</span><span class="o">];</span><span class="n">j</span><span class="o">-=</span><span class="n">h</span><span class="o">){</span>
                <span class="n">swap</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">j</span><span class="o">-</span><span class="n">h</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">h</span><span class="o">/=</span><span class="n">factor</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">swap</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(n^3/2)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="kt">void</span> <span class="n">shellSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="kt">int</span> <span class="n">factor</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">h</span><span class="o">&lt;</span><span class="n">len</span><span class="o">/</span><span class="n">factor</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="n">factor</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">while</span> <span class="p">(</span><span class="n">h</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">h</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span><span class="n">h</span><span class="p">;</span> <span class="n">j</span><span class="o">-=</span><span class="n">h</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="n">h</span><span class="p">])</span>
					<span class="p">{</span>
						<span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="n">h</span><span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="n">h</span> <span class="o">/=</span> <span class="n">factor</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">swap</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="kt">int</span> <span class="n">j</span><span class="p">)</span> 
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">shellSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="n">factor</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">h</span><span class="o">=</span><span class="mi">1</span>
        <span class="k">while</span> <span class="n">h</span><span class="o">&lt;</span><span class="n">length</span><span class="o">//</span><span class="n">factor</span><span class="p">:</span>
            <span class="n">h</span><span class="o">=</span><span class="n">h</span><span class="o">*</span><span class="n">factor</span><span class="o">+</span><span class="mi">1</span>

        <span class="k">while</span> <span class="n">h</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="n">h</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="p">.</span><span class="n">swap3</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="n">h</span><span class="p">)</span>
            <span class="n">h</span><span class="o">//=</span><span class="n">factor</span>


    <span class="k">def</span> <span class="nf">swap3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">shellSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">){</span>
	<span class="nb">len</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
	<span class="n">factor</span><span class="o">:=</span><span class="m">2</span>
	<span class="n">h</span> <span class="o">:=</span><span class="m">1</span>
	<span class="k">for</span> <span class="n">h</span><span class="o">&lt;</span><span class="nb">len</span><span class="o">/</span><span class="n">factor</span> <span class="p">{</span>
		<span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">*</span><span class="n">factor</span><span class="o">+</span><span class="m">1</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="n">h</span><span class="o">&gt;=</span><span class="m">1</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="n">h</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">;</span><span class="n">i</span><span class="o">++</span> <span class="p">{</span>
			<span class="k">for</span> <span class="n">j</span><span class="o">:=</span><span class="n">i</span><span class="p">;</span><span class="n">j</span><span class="o">&gt;=</span><span class="n">h</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="n">h</span><span class="p">];</span><span class="n">j</span><span class="o">-=</span><span class="n">h</span> <span class="p">{</span>
				<span class="n">swap3</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="n">h</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="n">h</span><span class="o">/=</span><span class="n">factor</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">swap3</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
	<span class="n">temp</span> <span class="o">:=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
	<span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
	<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000006" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>MergeSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-anete-lusina-5721167.jpg" class="img-responsive img-centered" alt="mergeSort">

                            
                                <h3>归并排序</h3>
                            
                            </div>

                            <p><h3 id="基本思想">基本思想</h3>
<hr />
<p>要将一个数组排序,可以先递归地将它分成两半分别排序,然后将结果归并起来.<br />
归并排序最吸引人的性质是它能够保证将任意长度为N的数组排序所需时间和 <strong>NlogN</strong> 成正比;它的主要缺点则是它所需的额外空间和 <strong>N</strong> 成正比.</p>
<hr />

<h3 id="原地归并的抽象方法">原地归并的抽象方法</h3>
<hr />
<p>实现的方法很简单,创建一个适当大小的数组然后将两个输入数组中的元素一个个从大到小放入这个数组中.<br />
之所以需要原地归并,是因为当用归并一个大数组排序时,我们需要进行很多次归并,因此在每次归并时都创建一个新数组来存储排序结果会大大增加空间复杂度.<br />
如果使用原地归并的方法,这样就可以先将前半部分排序,再将后半部分排序, 然后在数组中移动元素而不需要使用额外的空间.<br />
原地归并的方法签名为: <strong>merge(a, lo, mid, hi)</strong> ,它会将子数组 <strong>a[lo..mid]</strong> 和 <strong>a[mid+1..hi]</strong> 归并成一个有序的数组并将结果存放在 <strong>a[lo..hi]</strong> 中.</p>
<hr />

<h3 id="代码">代码</h3>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">merge</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="o">,</span> <span class="kt">int</span> <span class="n">mid</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">lo</span><span class="o">,</span> <span class="n">j</span><span class="o">=</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">lo</span><span class="o">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="o">;</span><span class="n">k</span><span class="o">++){</span>
            <span class="n">temp</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">lo</span><span class="o">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="o">;</span><span class="n">k</span><span class="o">++){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">&gt;</span><span class="n">mid</span><span class="o">){</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">++];</span>
            <span class="o">}</span>
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">j</span><span class="o">&gt;</span><span class="n">hi</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">++];</span>
            <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">]&lt;</span><span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">]){</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">++];</span>
            <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">++];</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<h3 id="代码分析">代码分析</h3>
<hr />
<p>该方法先将所有数组复制到temp[]中,然后在归并回a[]中.<br />
方法在归并时(第二个for循环)进行了4个判断:</p>
<ol>
  <li>i&gt;mid:左半边用完(取右半边的元素)</li>
  <li>j&gt;hi:右半边用尽(取左半边的元素)</li>
  <li>temp[j]&lt;temp[i]:右半边的当前元素小于左半边的当前元素(取右半边的元素)</li>
  <li>temp[j]&gt;temp[i]:右半边的放弃元素大于左半边的当前元素(取左半边的元素)</li>
</ol>

<p>仔细观察如上规则,其实就是给你两个有序集合,要把这两个有序集合合并成一个有序集合,使用双指针的方式合并.</p>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/mergeSort/归并排序区间分布图.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="归并排序区间分布图" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/mergeSort/归并排序区间分布图.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">归并排序区间分布图</div>
    </a>
</center>

<h3 id="自顶向下的归并排序">自顶向下的归并排序</h3>
<hr />
<p>这是应用高效算法设计中分治思想的最典型的一个例子.</p>
<ol>
  <li>首先归并的排序每一个区间,保证区间大小为1的区间全都有序</li>
  <li>其次就是归并合并两个区间保证整个区间有序</li>
  <li>重复以上步骤即整个数组有序</li>
</ol>

<hr />

<h3 id="图解">图解</h3>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/mergeSort/归并排序.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="归并排序" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/mergeSort/归并排序.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">MergeSort</div>
    </a>
</center>

<h4 id="代码-1">代码</h4>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">temp</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">mergeSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">){</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
    <span class="n">sort</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">hi</span><span class="o">&lt;=</span><span class="n">lo</span><span class="o">){</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">+</span> <span class="o">(</span><span class="n">hi</span><span class="o">-</span><span class="n">lo</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
    <span class="n">sort</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">lo</span><span class="o">,</span> <span class="n">mid</span><span class="o">);</span>
    <span class="n">sort</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">hi</span><span class="o">);</span>
    <span class="n">merge</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">lo</span><span class="o">,</span> <span class="n">mid</span><span class="o">,</span> <span class="n">hi</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">merge</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="o">,</span> <span class="kt">int</span> <span class="n">mid</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">lo</span><span class="o">,</span> <span class="n">j</span><span class="o">=</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">lo</span><span class="o">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="o">;</span><span class="n">k</span><span class="o">++){</span>
        <span class="n">temp</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
    <span class="o">}</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">lo</span><span class="o">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="o">;</span><span class="n">k</span><span class="o">++){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">&gt;</span><span class="n">mid</span><span class="o">){</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">++];</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">j</span><span class="o">&gt;</span><span class="n">hi</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">++];</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">]&lt;</span><span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">]){</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">++];</span>
        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">++];</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(NlogN)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="归并排序的缺点及改进方案">归并排序的缺点及改进方案</h3>
<hr />
<ul>
  <li>
    <p>缺点: 辅助数组所使用的额外空间和N的大小成正比.</p>
  </li>
  <li>
    <p>改进点</p>
    <ol>
      <li>对小规模子数组使用插入排序:用不同的方法处理小规模问题能改进大多数递归算法的性能,因为递归会使小规模问题中方法的调用过于频繁,所以改进对它们的处理方法就是改进整个算法.</li>
      <li>测试数组是否已经有序:可以添加一个判断条件,如果 <strong>a[mid]</strong> 小于等于 <strong>a[mid+1]</strong> ,我们就冉伟数组已经有序的并跳过merge()方法.</li>
      <li>不将元素复制到辅助数组:可以节省将数组元素复制到用于归并的辅助数组所用的时间(但空间不行).要做到这一点我们要调用两种排序方法,一种将数据从输入数组排序到辅助数组,一种将数据从辅助数组排序到输入数组.</li>
    </ol>
  </li>
</ul>

<hr />

<h3 id="自底向上的归并排序">自底向上的归并排序</h3>
<hr />
<p>同样是分治思想的典型应用.先归并那些微型数组,然后再成对归并得到的数组,如此这般,直到我们将整个数组归并在一起.这种实现方法比标准递归方法所需要的代码量更少.</p>
<ol>
  <li>首先进行的两两归并(把每个元素想象成一个大小为1的数组)</li>
  <li>然后是四四归并(将两个大小为2的数组归并成一个有4个元素的数组)</li>
  <li>然后是八八的归并,一直下去.</li>
  <li>在每一轮归并中,最后一次归并的第二个子数组可能比第一个子数组要小,如果不是的话所有的归并排序中两个数组大小应该都是一样的,而在下一轮中子数组的大小会翻倍.</li>
</ol>

<p>当数组长度为2的幂时,自顶向下和自底向上的归并排序所用的比较次数和数组访问次数正好相同,只是顺序不同.</p>
<hr />

<h3 id="代码-2">代码</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">temp</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">mergeSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="n">temp</span>  <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">len</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">sz</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span><span class="n">sz</span><span class="o">&lt;</span><span class="n">len</span><span class="o">;</span><span class="n">sz</span> <span class="o">=</span> <span class="n">sz</span><span class="o">+</span><span class="n">sz</span><span class="o">){</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">lo</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">lo</span><span class="o">&lt;</span><span class="n">len</span><span class="o">-</span><span class="n">sz</span><span class="o">;</span><span class="n">lo</span> <span class="o">+=</span> <span class="n">sz</span><span class="o">+</span><span class="n">sz</span><span class="o">){</span>
            <span class="n">merge</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">lo</span><span class="o">,</span> <span class="n">lo</span><span class="o">+</span><span class="n">sz</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">lo</span><span class="o">+</span><span class="n">sz</span><span class="o">+</span><span class="n">sz</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">merge</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="o">,</span> <span class="kt">int</span> <span class="n">mid</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">lo</span><span class="o">,</span> <span class="n">j</span><span class="o">=</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">lo</span><span class="o">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="o">;</span><span class="n">k</span><span class="o">++){</span>
        <span class="n">temp</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
    <span class="o">}</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">lo</span><span class="o">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="o">;</span><span class="n">k</span><span class="o">++){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">&gt;</span><span class="n">mid</span><span class="o">){</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">++];</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">j</span><span class="o">&gt;</span><span class="n">hi</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">++];</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">]&lt;</span><span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">]){</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">j</span><span class="o">++];</span>
        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
            <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">++];</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="代码分析-1">代码分析</h3>
<hr />
<p>仔细看下mergeSort方法,使用两个循环解决了自底向上归并.<br />
第一个循环的作用就是定义归并的子数组,不断递增到数组大小.</p>
<ul>
  <li>其中 <strong>sz</strong> 代表当前要归并的子数组大小,肯定要从1开始慢慢不断乘2扩大子数组,所以sz的大小一定是要小于len的,那递增条件就是不断乘2即 <strong>sz+sz</strong></li>
</ul>

<p>再看第二个循环,他的作用就是将nums中每间隔sz的数组归并排序.</p>
<ul>
  <li>其中 <strong>lo</strong> 代表起始位置,肯定是从 <strong>0</strong> 开始排序,因为排序每隔 <strong>sz</strong> 的区间,那么lo的最大长度就是 <strong>len-sz</strong> ,那最后的递增条件就很容易理解了,要间隔 <strong>2*sz</strong> 的区间嘛,肯定是加上 <strong>sz+sz</strong></li>
</ul>

<p>最后就是将两个有序的子区间合并成一个大的有序子区间, 起点肯定是 <strong>lo</strong> ,因为我们排序是 <strong>sz+sz</strong> 长度的子区间,那么这个子区间的中间节点肯定是 <strong>lo+sz-1</strong> ,那最后就剩下最后区间的末尾了,按理说应该是 <strong>lo+sz+sz-1</strong> ,但是因为不断递增可能会超过数组长度,所以要取 <strong>lo+sz+sz-1</strong> 和 <strong>len-1</strong> 的最小值.</p>
<hr />

<h3 id="自底向上轨迹图">自底向上轨迹图</h3>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/mergeSort/自底向上归并轨迹图.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="自底向上归并轨迹图" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/mergeSort/自底向上归并轨迹图.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">自底向上归并轨迹图</div>
    </a>
</center>

<h3 id="自顶向下归并其他语言">自顶向下归并其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="kt">void</span> <span class="n">mergeSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">temp</span><span class="p">(</span><span class="n">length</span><span class="p">);</span>
		<span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">temp</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">sort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">temp</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">hi</span><span class="o">&lt;=</span><span class="n">lo</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">hi</span> <span class="o">+</span> <span class="n">lo</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">temp</span><span class="p">);</span>
		<span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">temp</span><span class="p">);</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">temp</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">merge</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">temp</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">lo</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">lo</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">hi</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">temp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
		<span class="p">}</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">lo</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">hi</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">mid</span><span class="p">)</span> 
			<span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">];</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">j</span><span class="o">&gt;</span><span class="n">hi</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span><span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
			<span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">];</span>
			<span class="p">}</span>
			<span class="k">else</span>
			<span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">mergeSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">lo</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">hi</span><span class="o">&lt;=</span><span class="n">lo</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">mid</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">+</span> <span class="p">(</span><span class="n">hi</span><span class="o">-</span><span class="n">lo</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">)</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
        <span class="n">merge</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">lo</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">mid</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">temp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="n">mid</span> <span class="p">:</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">j</span><span class="o">+=</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">j</span><span class="o">&gt;</span><span class="n">hi</span><span class="p">:</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span><span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">j</span><span class="o">+=</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
    <span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">//自顶向下归并排序</span>
<span class="k">func</span> <span class="n">mergeSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">){</span>
	<span class="n">temp</span> <span class="o">:=</span><span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">))</span>

	<span class="k">var</span> <span class="n">merge</span> <span class="k">func</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">lo</span> <span class="kt">int</span><span class="p">,</span> <span class="n">mid</span> <span class="kt">int</span><span class="p">,</span> <span class="n">hi</span> <span class="kt">int</span><span class="p">)</span>
	<span class="n">merge</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">lo</span> <span class="kt">int</span><span class="p">,</span> <span class="n">mid</span> <span class="kt">int</span><span class="p">,</span> <span class="n">hi</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">i</span><span class="o">:=</span><span class="n">lo</span>
		<span class="n">j</span><span class="o">:=</span><span class="n">mid</span><span class="o">+</span><span class="m">1</span>
		<span class="k">for</span> <span class="n">k</span><span class="o">:=</span><span class="n">lo</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="p">;</span><span class="n">k</span><span class="o">++</span> <span class="p">{</span>
			<span class="n">temp</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
		<span class="p">}</span>
		<span class="k">for</span> <span class="n">k</span><span class="o">:=</span><span class="n">lo</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;=</span><span class="n">hi</span><span class="p">;</span><span class="n">k</span><span class="o">++</span><span class="p">{</span>
			<span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="n">mid</span> <span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
				<span class="n">j</span><span class="o">++</span>
			<span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="n">j</span><span class="o">&gt;</span><span class="n">hi</span> <span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
				<span class="n">i</span><span class="o">++</span>
			<span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span><span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
				<span class="n">j</span><span class="o">++</span>
			<span class="p">}</span><span class="k">else</span> <span class="p">{</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
				<span class="n">i</span><span class="o">++</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">var</span> <span class="n">sort</span> <span class="k">func</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">lo</span> <span class="kt">int</span><span class="p">,</span> <span class="n">hi</span> <span class="kt">int</span><span class="p">)</span>
	<span class="n">sort</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">lo</span> <span class="kt">int</span><span class="p">,</span> <span class="n">hi</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="n">hi</span><span class="o">&lt;=</span><span class="n">lo</span> <span class="p">{</span>
			<span class="k">return</span>
		<span class="p">}</span>
		<span class="n">mid</span> <span class="o">:=</span> <span class="n">lo</span><span class="o">+</span><span class="p">(</span><span class="n">hi</span><span class="o">-</span><span class="n">lo</span><span class="p">)</span><span class="o">/</span><span class="m">2</span>
		<span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">)</span>
		<span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="m">1</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
		<span class="n">merge</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000005" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>SelectSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-8906527.jpg" class="img-responsive img-centered" alt="selectSort">

                            
                                <h3>选择排序</h3>
                            
                            </div>

                            <p><h3 id="基本思想">基本思想</h3>
<hr />
<p>主要就是遍历数组,找到最小值和最前面的元素交换即可.</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<ol>
  <li>首先找到数组中最小的那个元素</li>
  <li>其次将它和数组的第一个元素交换位置(如果第一个元素就是最小元素那么它就和自己交换)</li>
  <li>再次在剩下的元素中找到最小的元素,将它与数组的第二个元素交换位置</li>
  <li>如此往复,直到整个数组有序
    <hr />
  </li>
</ol>

<h3 id="图解">图解</h3>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/selectSort/selectSort.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="选择排序" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/selectSort/selectSort.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">HeapSort</div>
    </a>
</center>

<h4 id="代码">代码</h4>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">selectSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
        <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">len</span><span class="o">;</span><span class="n">j</span><span class="o">++){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">min</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]){</span>
                <span class="n">min</span><span class="o">=</span><span class="n">j</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">swap</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">min</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">swap</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(n^2)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="kt">void</span> <span class="n">selectSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">min</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
				<span class="p">{</span>
					<span class="n">min</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">min</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">swap</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">selectSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
            <span class="nb">min</span> <span class="o">=</span> <span class="n">i</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="nb">min</span><span class="p">]</span><span class="o">&gt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="nb">min</span> <span class="o">=</span> <span class="n">j</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">i</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">selectSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
	<span class="nb">len</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">;</span><span class="n">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="n">min</span><span class="o">:=</span><span class="n">i</span>
		<span class="k">for</span> <span class="n">j</span><span class="o">:=</span><span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">;</span><span class="n">j</span><span class="o">++</span> <span class="p">{</span>
			<span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">min</span><span class="p">]</span><span class="o">&gt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">{</span>
				<span class="n">min</span> <span class="o">=</span> <span class="n">j</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="n">swap1</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">min</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">swap1</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">i</span> <span class="kt">int</span><span class="p">,</span> <span class="n">j</span> <span class="kt">int</span><span class="p">){</span>
	<span class="n">temp</span> <span class="o">:=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
	<span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
	<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000004" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>InsertSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-nick-wehrli-6524730.jpg" class="img-responsive img-centered" alt="insertSort">

                            
                                <h3>插入排序</h3>
                            
                            </div>

                            <p><h3 id="基本思想">基本思想</h3>
<hr />
<p>类似于我们打牌时,将每一张牌插入到其他已经有序的牌中的适当位置.<br />
为了要给插入的元素腾出空间,需要将其余所有元素在插入之前都向右移动一位.</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<ol>
  <li>首先从外层i=1开始遍历数组,保证前i个元素有序</li>
  <li>内层j从i向前遍历,同时比较相邻的两个数,将nums[i]插入到合适位置</li>
  <li>每次内循环保证前i个元素有序</li>
  <li>重复以上步骤直到外层遍历结束即数组有序
    <hr />
  </li>
</ol>

<h3 id="图解">图解</h3>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/insertSort/insertSort.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="插入排序" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/insertSort/insertSort.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">InsertSort</div>
    </a>
</center>

<h4 id="代码">代码</h4>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">insertSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">;</span><span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]&lt;</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span><span class="n">j</span><span class="o">--){</span>
            <span class="n">swap</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">swap</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(n^2)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="kt">void</span> <span class="n">insertSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">length</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
					<span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
				<span class="p">}</span>
				
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">swap</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">insertSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">if</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                    <span class="bp">self</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">insertSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
	<span class="nb">len</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="m">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">;</span><span class="n">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">j</span><span class="o">:=</span><span class="n">i</span><span class="p">;</span><span class="n">j</span><span class="o">&gt;</span><span class="m">0</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="m">1</span><span class="p">];</span><span class="n">j</span><span class="o">--</span> <span class="p">{</span>
			<span class="n">swap2</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">swap2</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
	<span class="n">temp</span> <span class="o">:=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
	<span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
	<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000003" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>HeapSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-valeriya-kobzar-8155476.jpg" class="img-responsive img-centered" alt="heapSort">

                            
                                <h3>堆排序</h3>
                            
                            </div>

                            <p><h3 id="前置概念">前置概念</h3>
<hr />
<p>完全二叉树:叶子节点只能出现在最下层或次下层,且最下层的叶子节点集中在树的左部.即除了最后一层其他层的节点个数都是满的而且最后一层的叶子节点必须靠左.</p>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/完全二叉树.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="完全二叉树" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/完全二叉树.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">完全二叉树</div>
    </a>
</center>

<h3 id="二叉堆">二叉堆</h3>
<hr />
<ol>
  <li>必须是完全二叉树</li>
  <li>二叉堆中的每一个节点,都必须大于等于(或小于等于)其子树中每个节点的值<br />
若每个节点大于等于子树中的每个节点,称之为大顶堆.
若每个节点小于等于子树中的每个节点,称之为小顶堆.
    <hr />
  </li>
</ol>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/大小顶堆.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="大小顶堆" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/大小顶堆.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">小顶堆/大顶堆</div>
    </a>
</center>

<p><br /></p>

<p>我们仔细观察下大顶堆和小顶堆,可以发现如果父节点的位置为0,其左子节点的位置1,右子节点的位置为2.<br />
大约可以猜到父节点和左右子节点的关系为:若父节点的位置为1,那么左子节点的位置为 <strong>2×i+1</strong> ,右子节点的位置为 <strong>2×i+2</strong> .可以带入到其他节点验证一下.该属性是二叉堆调整的关键.<br />
注意:我们这里索引是从0开始的,如果索引从1开始的话,那么左右子节点的位置即是 <strong>2×i</strong> 和 <strong>2×i+1</strong> .</p>
<hr />
<h3 id="二叉堆的基本操作">二叉堆的基本操作</h3>
<hr />
<blockquote>
  <p>上浮:由下至上的堆有序化</p>
</blockquote>

<p>如果堆的有序状态因为某个节点的变得比它的父节点更大而打破,那么我们就需要通过交换它和它的父节点来修复堆,直到这个节点向上移动遇到一个更大的节点.<br />
若这个节点位置为k,那他的父节点位置就是 <strong>k/2</strong>,不断和父节点比较并交换位置即可.</p>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/上浮.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="上浮" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/上浮.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">上浮</div>
    </a>
</center>

<h4 id="代码">代码</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">swim</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">k</span><span class="o">){</span>
    <span class="k">while</span><span class="o">(</span><span class="n">k</span><span class="o">&gt;</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">/</span><span class="mi">2</span><span class="o">]&lt;</span><span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]){</span>
        <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">/</span><span class="mi">2</span><span class="o">];</span>
        <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">/</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
        <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">/</span><span class="mi">2</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />
<blockquote>
  <p>下沉:由上至下的堆有序化</p>
</blockquote>

<p>如果堆的有序状态因为某个节点变的比它的两个子节点或者其中之一更小而打破了,那么我们可以通过将它和它的两个子节点中的较大者交换来恢复堆,交换知道它的子节点都比他更小或达到堆的底部.<br />
若节点的位置为k,那么它的左右子节点的位置为 <strong>2×k+1</strong> 和 <strong>2×k+2</strong>,不断和这两个节点比较并交换即可.</p>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/下沉.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="下沉" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/下沉.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">下沉</div>
    </a>
</center>

<h4 id="代码-1">代码</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">sink</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">k</span><span class="o">,</span> <span class="kt">int</span> <span class="no">N</span><span class="o">){</span>
    <span class="k">while</span><span class="o">(</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="no">N</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="no">N</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">]&gt;</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]){</span>
            <span class="n">j</span><span class="o">++;</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]){</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">];</span>
        <span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
        <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
        <span class="n">k</span><span class="o">=</span><span class="n">j</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="基本思想">基本思想</h3>
<hr />
<p>主要就是构建堆,利用大顶堆或小顶堆的性质排序</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<p>堆排序其实就是两步</p>
<ol>
  <li>建堆:利用上浮和下沉构建大顶堆或小顶堆,上浮下沉图解见上方</li>
  <li>排序：
    <ul>
      <li>若为升序排序,那么应该建立大顶堆,然后将根节点和堆的最后一个节点交换,并将新的根节点下沉到合适位置即调整堆为大顶堆,此时数组最后即为最大元素,重复以上步骤,直到处理的数组长度为1.</li>
      <li>若为降序排序,那么就应该建立小顶堆,重复上面的交换流程,整个数据交换后数组有序.</li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="图解">图解</h3>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/堆排序.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="堆排序" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/heapSort/堆排序.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">HeapSort</div>
    </a>
</center>

<h4 id="代码-2">代码</h4>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">heapSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="c1">//1.利用下沉建立大顶堆</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">len</span><span class="o">/</span><span class="mi">2</span><span class="o">;</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">--){</span>
        <span class="n">sink</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">//2.排序</span>
    <span class="k">while</span><span class="o">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">){</span>
        <span class="n">swap</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="mi">0</span> <span class="o">,--</span><span class="n">len</span><span class="o">);</span>
        <span class="n">sink</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span> 
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">nums</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">//下沉</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">sink</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">k</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">){</span>
    <span class="k">while</span><span class="o">(</span><span class="n">k</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">len</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">]&gt;</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]){</span>
            <span class="n">j</span><span class="o">++;</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]&lt;</span><span class="n">nums</span><span class="o">[</span><span class="n">k</span><span class="o">]){</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">swap</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">k</span><span class="o">,</span> <span class="n">j</span><span class="o">);</span>
        <span class="n">k</span><span class="o">=</span><span class="n">j</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">swap</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(n*logn)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="扩展点">扩展点</h3>
<hr />
<ol>
  <li>常使用大小堆维护中位数, 左边使用大顶堆, 右边使用小顶堆, 这样左边取最大值右边取最小值即可. 见算法题<a href="https://leetcode-cn.com/problems/find-median-from-data-stream/">数据流的中位数</a>
    <hr />
  </li>
</ol>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">heapSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="c1">//建堆</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">len</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">sink</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="c1">//排序</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">len</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">--</span><span class="n">len</span><span class="p">);</span>
			<span class="n">sink</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="n">nums</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">sink</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">while</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">len</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
			<span class="k">while</span> <span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
			<span class="p">{</span>
				<span class="n">j</span><span class="o">++</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
			<span class="p">{</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
			<span class="n">k</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">swap</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>

</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">heapSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">length</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">length</span><span class="o">-=</span><span class="mi">1</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">sink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">k</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="nb">len</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="k">while</span> <span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span>
            <span class="k">while</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="nb">len</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                <span class="n">j</span><span class="o">+=</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                <span class="k">break</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="n">k</span><span class="o">=</span><span class="n">j</span>

    <span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">heapSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">[]</span><span class="kt">int</span> <span class="p">{</span>
	<span class="nb">len</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="nb">len</span><span class="o">/</span><span class="m">2</span><span class="p">;</span><span class="n">i</span><span class="o">&gt;=</span><span class="m">0</span><span class="p">;</span><span class="n">i</span><span class="o">--</span> <span class="p">{</span>
		<span class="n">sink</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="nb">len</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="nb">len</span><span class="o">&gt;</span><span class="m">1</span> <span class="p">{</span>
		<span class="nb">len</span> <span class="o">-=</span><span class="m">1</span>
		<span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">)</span>
		<span class="n">sink</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="m">0</span> <span class="p">,</span><span class="nb">len</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">nums</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">sink</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">k</span> <span class="kt">int</span><span class="p">,</span> <span class="nb">len</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
	<span class="k">for</span> <span class="m">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="m">1</span><span class="o">&lt;</span><span class="nb">len</span> <span class="p">{</span>
		<span class="n">j</span><span class="o">:=</span><span class="m">2</span><span class="o">*</span><span class="n">k</span><span class="o">+</span><span class="m">1</span>
		<span class="k">for</span> <span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="o">&lt;</span><span class="nb">len</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="p">]</span><span class="o">&gt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">{</span>
			<span class="n">j</span><span class="o">++</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">&gt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">{</span>
			<span class="k">break</span>
		<span class="p">}</span>
		<span class="n">swap</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
		<span class="n">k</span><span class="o">=</span><span class="n">j</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000002" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>QuickSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-jo-jesus-4198220.jpg" class="img-responsive img-centered" alt="quickSort">

                            
                                <h3>快速排序</h3>
                            
                            </div>

                            <p><h3 id="基本思想">基本思想</h3>
<hr />
<p>是一种分治的排序算法,他将一个数组分成两个子数组,将两部分独立的排序.</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<ol>
  <li>首先以 <strong>left=0,right=nums.len-1</strong> 进行排序,最外层需要保证 <strong>left&lt;right</strong></li>
  <li>排序首先以 <strong>nums[left]</strong> 为基准值base</li>
  <li>然后将右指针从右往左遍历,当 <strong>left&lt;right且nums[right]&gt;=base</strong> 时,将右指针右移,否则就将右指针的值替换到左指针处 (此步的意义就是找到最右侧小于基准值base并将右侧值赋值到左指针的值)</li>
  <li>接着将左指针从左往右遍历,当 <strong>left&lt;right且nums[left]&lt;=base</strong> 时,将左指针左移,否则将左指针的值赋值给右指针 (此步同步骤三相反,即找到最左侧大于基准值base的值,并将此值赋值给右指针的值)</li>
  <li>最后当两个指针相交时,将base值赋值给nums[left],并同时将left返回作为下个区间的中间值</li>
  <li>接下来就是递归遍历 <strong>[left,temp-1]和[temp+1,right]</strong> ,遍历结束即数组有序</li>
</ol>

<hr />

<h3 id="图解">图解</h3>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/quickSort1.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="quickSort1" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/quickSort1.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
        display: inline-block;
        color: #999;
        padding: 2px;">第一层排序[0, 4]</div>
    </a>
</center>
<p><br /></p>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/quickSort2.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="quickSort1" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/quickSort2.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
        display: inline-block;
        color: #999;
        padding: 2px;">第二层排序[0,-1]和[1,4]</div>
    </a>
</center>
<p><br /></p>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/quickSort3.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="quickSort1" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/quickSort3.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
        display: inline-block;
        color: #999;
        padding: 2px;">第三轮排序[1,1]和[3,4]</div>
    </a>
</center>

<h4 id="代码">代码</h4>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//解法一</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">quickSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">left</span><span class="o">,</span> <span class="kt">int</span> <span class="n">right</span><span class="o">){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">right</span> <span class="o">&lt;=</span> <span class="n">left</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">base</span> <span class="o">=</span> <span class="n">division1</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">right</span><span class="o">);</span>
    <span class="n">quickSort1</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">base</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
    <span class="n">quickSort1</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">base</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">right</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">division</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">left</span><span class="o">,</span> <span class="kt">int</span> <span class="n">right</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">left</span><span class="o">,</span> <span class="n">j</span><span class="o">=</span><span class="n">right</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">base</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">){</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">base</span> <span class="o">&gt;=</span> <span class="n">nums</span><span class="o">[++</span><span class="n">i</span><span class="o">]){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">==</span><span class="n">right</span><span class="o">){</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">base</span> <span class="o">&lt;=</span> <span class="n">nums</span><span class="o">[--</span><span class="n">j</span><span class="o">]){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">j</span><span class="o">==</span><span class="n">left</span><span class="o">){</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="n">j</span><span class="o">){</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">exchange</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">exchange</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">j</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">j</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">exchange</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">//解法二</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">quickSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">left</span><span class="o">,</span> <span class="kt">int</span> <span class="n">right</span><span class="o">){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">left</span><span class="o">&lt;</span> <span class="n">right</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">base</span> <span class="o">=</span> <span class="n">division</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">right</span><span class="o">);</span>
        <span class="n">quickSort</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">base</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
        <span class="n">quickSort</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">base</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">right</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">division</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">left</span><span class="o">,</span> <span class="kt">int</span> <span class="n">right</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">base</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">left</span><span class="o">];</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="o">){</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="o">[</span><span class="n">right</span><span class="o">]&gt;=</span><span class="n">base</span><span class="o">){</span>
            <span class="n">right</span><span class="o">--;</span>
        <span class="o">}</span>
        <span class="n">nums</span><span class="o">[</span><span class="n">left</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">right</span><span class="o">];</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="o">[</span><span class="n">left</span><span class="o">]&lt;=</span><span class="n">base</span><span class="o">){</span>
            <span class="n">left</span><span class="o">++;</span>
        <span class="o">}</span>
        <span class="n">nums</span><span class="o">[</span><span class="n">right</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">left</span><span class="o">];</span>
    <span class="o">}</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">left</span><span class="o">]=</span><span class="n">base</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">left</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<blockquote>
  <p>时间复杂度:O(nlogn)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="算法改进">算法改进</h3>
<hr />
<ol>
  <li>切换到插入排序
    <ul>
      <li>对于小数组,快速排序比插入排序慢</li>
      <li>因为递归,快速排序的sort()方法在小数组中也会调用自己</li>
    </ul>
  </li>
  <li>三取样切分
    <ul>
      <li>使用子数组的一小部分元素的中位数来切分数组</li>
    </ul>
  </li>
  <li>熵最优的排序
    <ul>
      <li>在有大量重复元素的情况下,快速排序的递归性会使元素全部重复的子数组经常出现,这就有很大的改进空间,将当前实现的线性对数级的性能提高到线性级别.</li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="三项切分的快速排序">三项切分的快速排序</h3>
<h3 id="基本思想-1">基本思想</h3>
<hr />
<p>将数组切成三部分,分别对应小于、等于和大于切分元素的数组元素.</p>
<hr />

<h3 id="思路-1">思路</h3>
<hr />
<ol>
  <li>他从左到右遍历数组一次,维护一个指针 <strong>lt</strong> 使得 <strong>a[lo..lt-1]</strong> 中的元素都小于 <strong>v</strong> ,一个指针 <strong>gt</strong> 使得 <strong>a[gt+1..hi]</strong> 中的元素都大于 <strong>v</strong> ,一个指针 <strong>i</strong> 使得 <strong>a[lt..i-1]</strong> 中的元素都等于 <strong>v</strong> , <strong>a[i..gt]</strong> 中的元素都还未确定.</li>
  <li>一开始 <strong>i</strong> 和 <strong>lo</strong> 相等,我们使用Comparable接口对 <strong>a[i]</strong> 进行三向比较来处理以下情况:
    <ul>
      <li><strong>a[i]</strong> 小于 <strong>v</strong> ,将 <strong>a[lt]</strong> 和 <strong>a[i]</strong> 交换,将 <strong>lt</strong> 和 <strong>i</strong> 加一</li>
      <li><strong>a[i]</strong> 大于 <strong>v</strong> ,将 <strong>a[gt]</strong> 和 <strong>a[i]</strong> 交换,将 <strong>gt</strong> 减一</li>
      <li><strong>a[i]</strong> 等于 <strong>v</strong> ,将 <strong>i</strong> 加一</li>
    </ul>
  </li>
</ol>

<p>这些操作都会保证数组元素不变且缩小 <strong>gt-i</strong> 的值(这样循环才会结束).另外,除非和切分元素相等,其他元素都会被交换.</p>
<hr />

<h3 id="三向切分示意图">三向切分示意图</h3>

<center>
     <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/三向切分示意图.jpg">
     <img style="border-radius: 0.3125em;
     box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="三向切分" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/quickSort/三向切分示意图.jpg" />
     <div style="color:orange; border-bottom: 1px solid #d9d9d9;
         display: inline-block;
         color: #999;
         padding: 2px;">三向切分示意图</div>
     </a>
 </center>

<h3 id="三向切分代码">三向切分代码</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">quick3way</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">hi</span><span class="o">&lt;=</span><span class="n">lo</span><span class="o">){</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kt">int</span> <span class="n">lt</span><span class="o">=</span><span class="n">lo</span><span class="o">,</span> <span class="n">i</span><span class="o">=</span><span class="n">lo</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span><span class="n">gt</span><span class="o">=</span><span class="n">hi</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">lo</span><span class="o">];</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">gt</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]&lt;</span><span class="n">v</span><span class="o">){</span>
            <span class="n">exchange</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">lt</span><span class="o">++,</span><span class="n">i</span><span class="o">++);</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]&gt;</span><span class="n">v</span><span class="o">){</span>
            <span class="n">exchange</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">gt</span><span class="o">--);</span>
        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
            <span class="n">i</span><span class="o">++;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">quick3way</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span> <span class="n">lo</span><span class="o">,</span> <span class="n">lt</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
    <span class="n">quick3way</span><span class="o">(</span><span class="n">nums</span><span class="o">,</span><span class="n">gt</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">hi</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">exchange</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="kt">int</span> <span class="n">j</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>c++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="kt">void</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">right</span><span class="p">)</span> 
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">division</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
			<span class="n">quickSort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">temp</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
			<span class="n">quickSort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">temp</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="kt">int</span> <span class="n">division</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">right</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">base</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">];</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">while</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">base</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">right</span><span class="o">--</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">];</span>
			<span class="k">while</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">base</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">left</span><span class="o">++</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">];</span>
		<span class="p">}</span>
		<span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">=</span> <span class="n">base</span><span class="p">;</span>
		<span class="k">return</span> <span class="n">left</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">quickSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">left</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">division</span><span class="p">(</span><span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">left</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
            <span class="n">base</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span>
            <span class="k">while</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="p">:</span>
                <span class="k">while</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span><span class="o">&gt;=</span><span class="n">base</span><span class="p">:</span>
                    <span class="n">right</span><span class="o">-=</span><span class="mi">1</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span>
                <span class="k">while</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">base</span><span class="p">:</span>
                    <span class="n">left</span><span class="o">+=</span><span class="mi">1</span>
                <span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span><span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span>
            <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="o">=</span><span class="n">base</span>
            <span class="k">return</span> <span class="n">left</span>
        <span class="k">if</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">division</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">left</span> <span class="p">,</span><span class="n">right</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">quickSort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">temp</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">quickSort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">temp</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">quickSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">left</span> <span class="kt">int</span><span class="p">,</span> <span class="n">right</span> <span class="kt">int</span><span class="p">)</span>  <span class="p">{</span>
		<span class="k">var</span> <span class="n">division</span> <span class="k">func</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">left</span> <span class="kt">int</span><span class="p">,</span> <span class="n">right</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span>
		<span class="n">division</span> <span class="o">=</span> <span class="k">func</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">,</span> <span class="n">left</span> <span class="kt">int</span><span class="p">,</span> <span class="n">right</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
			<span class="n">base</span> <span class="o">:=</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span>
			<span class="k">for</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="p">{</span>
				<span class="k">for</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span><span class="o">&gt;=</span><span class="n">base</span> <span class="p">{</span>
					<span class="n">right</span><span class="o">--</span>
				<span class="p">}</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span>
				<span class="k">for</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">base</span> <span class="p">{</span>
					<span class="n">left</span><span class="o">++</span>
				<span class="p">}</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span>
			<span class="p">}</span>
			<span class="n">nums</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="o">=</span><span class="n">base</span>
			<span class="k">return</span> <span class="n">left</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="n">left</span><span class="o">&lt;</span><span class="n">right</span> <span class="p">{</span>
			<span class="n">temp</span><span class="o">:=</span><span class="n">division</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
			<span class="n">quickSort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">temp</span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
			<span class="n">quickSort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">temp</span><span class="o">+</span><span class="m">1</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
		<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-10000001" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>BubbleSort</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-rachel-claire-4846299.jpg" class="img-responsive img-centered" alt="bubbleSort">

                            
                                <h3>冒泡排序</h3>
                            
                            </div>

                            <p><h3 id="基本思想">基本思想</h3>
<hr />
<p>就是两两比较然后交换位置,将较小值不断向前移动</p>
<hr />

<h3 id="思路">思路</h3>
<hr />
<ol>
  <li>首先需要两层循环,外层从 <strong>i=0</strong> 开始</li>
  <li>内层循环的主要作用就根据遍历顺序保证最大值或最小值已经移动到数组的末尾或者开头</li>
</ol>

<p>内层有两者方式：</p>
<ul>
  <li>从前往后:j从0一直遍历到nums.len-1-i 处,同时比较 <strong>nums[j]</strong> 和 <strong>nums[j+1]</strong> 的值,只有 <strong>nums[j]&gt;nums[j+1]</strong> 时才将 <strong>nums[j]</strong> 向后移动,每次循环结束保证最大值在末尾</li>
  <li>从后往前:j从nums.len一直遍历到 i 处,同时比较 <strong>nums[j-1]和nums[j]</strong> 的值,只有 <strong>nums[j-1]&gt;nums[j]</strong> 时才将 <strong>nums[j]</strong> 向前移动,每次循环结束保证最小值在开头</li>
</ul>

<hr />

<h3 id="内层逆序图解">内层逆序图解</h3>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/bubbleSort/BubbleSort.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="BubbleSort" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/algorithm/bubbleSort/BubbleSort.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">bubbleSort</div>
    </a>
</center>

<h4 id="代码">代码</h4>
<blockquote>
  <p>java</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//内层逆序遍历</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">bubbleSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">){</span>
     <span class="kt">int</span> <span class="n">temp</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++</span> <span class="o">){</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">&gt;</span><span class="n">i</span><span class="o">;</span> <span class="n">j</span><span class="o">--){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">]&gt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]){</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//内层正序遍历</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">bubbleSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">nums</span><span class="o">==</span><span class="kc">null</span> <span class="o">||</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">){</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>   
                <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="o">])</span> <span class="o">{</span>
                    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                    <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
                    <span class="n">nums</span><span class="o">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p>时间复杂度:O(n^2)</p>

  <p>空间复杂度:O(1)</p>
</blockquote>

<h3 id="算法优化">算法优化</h3>
<hr />
<p>没有什么大的优化,主要是若一次遍历过后中间没有移动的动作说明数组已经有序,无需继续往后遍历,直接结束</p>
<hr />

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">bubbleSort</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">temp</span><span class="o">;</span>
    <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++</span> <span class="o">){</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">&gt;</span><span class="n">i</span><span class="o">;</span> <span class="n">j</span><span class="o">--){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">]&gt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]){</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">];</span>
                <span class="n">nums</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">flag</span><span class="o">){</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="其他语言">其他语言</h3>
<hr />
<blockquote>
  <p>C++</p>
</blockquote>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="c1">//内部正序</span>
	<span class="kt">void</span> <span class="n">bubbleSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">len</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
				<span class="p">{</span>
					<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
					<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
					<span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="c1">//内部逆序</span>
	<span class="kt">void</span> <span class="n">bubbleSort1</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span>  <span class="n">j</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;</span><span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
				<span class="p">{</span>
					<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
					<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
					<span class="n">nums</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<blockquote>
  <p>python3</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="c1">#内部正序
</span>    <span class="k">def</span> <span class="nf">bubbleSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>

    <span class="c1">#内部正序
</span>    <span class="k">def</span> <span class="nf">bubbleSort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</code></pre></div></div>
<blockquote>
  <p>go</p>
</blockquote>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">//内部逆序</span>
<span class="k">func</span> <span class="n">bubbleSort</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nb">len</span> <span class="o">:=</span><span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="o">-</span><span class="m">1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">j</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="nb">len</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="m">1</span><span class="p">;</span><span class="n">j</span><span class="o">++</span> <span class="p">{</span>
			<span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="p">]</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">{</span>
				<span class="n">temp</span><span class="o">:=</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="p">]</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">bubbleSort1</span><span class="p">(</span><span class="n">nums</span> <span class="p">[]</span><span class="kt">int</span><span class="p">){</span>
	<span class="nb">len</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span><span class="o">:=</span><span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">;</span><span class="n">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">j</span><span class="o">:=</span><span class="nb">len</span><span class="o">-</span><span class="m">1</span><span class="p">;</span><span class="n">j</span><span class="o">&gt;</span><span class="n">i</span><span class="p">;</span><span class="n">j</span><span class="o">--</span> <span class="p">{</span>
			<span class="k">if</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="m">1</span><span class="p">]</span> <span class="p">{</span>
				<span class="n">temp</span><span class="o">:=</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="m">1</span><span class="p">]</span>
				<span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="m">1</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">algorithm</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-20000001" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2>SpringBoot启动源码解析(一)</h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-david-selbert-6468061.jpg" class="img-responsive img-centered" alt="SpringBoot1">

                            
                                <h3>SpringBootApplication注解分析</h3>
                            
                            </div>

                            <p><h3 id="springbootapplication结构图">@SpringBootApplication结构图</h3>
<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/@SpringBootApplication注解.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="@SpringBootApplication注解" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/@SpringBootApplication注解.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">@SpringBootApplication注解</div>
    </a>
</center>

<h3 id="springbootapplication">@SpringBootApplication</h3>
<hr />
<blockquote>
  <p>源码如下</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Indicates a {@link Configuration configuration} class that declares one or more
 * {@link Bean @Bean} methods and also triggers {@link EnableAutoConfiguration
 * auto-configuration} and {@link ComponentScan component scanning}. This is a convenience
 * annotation that is equivalent to declaring {@code @Configuration},
 * {@code @EnableAutoConfiguration} and {@code @ComponentScan}.
 * 声明一个配置类,他声明一个或多个@Bean方法且触发 EnableAutoConfiguration自动配置和 ComponentScan组件扫描.
 * 这是一个便利的注解等同于声明 @Configuration、@EnableAutoConfiguration 和 @ComponentScan
 * @author Phillip Webb
 * @author Stephane Nicoll
 * @author Andy Wilkinson
 * @since 1.2.0
 */</span>
<span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Inherited</span>
<span class="nd">@SpringBootConfiguration</span>
<span class="c1">//该注解的作用是开启自动配置</span>
<span class="nd">@EnableAutoConfiguration</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">excludeFilters</span> <span class="o">=</span> <span class="o">{</span> <span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">CUSTOM</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="nc">TypeExcludeFilter</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
		<span class="nd">@Filter</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">FilterType</span><span class="o">.</span><span class="na">CUSTOM</span><span class="o">,</span> <span class="n">classes</span> <span class="o">=</span> <span class="nc">AutoConfigurationExcludeFilter</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">})</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">SpringBootApplication</span> <span class="o">{</span>

	<span class="nd">@AliasFor</span><span class="o">(</span><span class="n">annotation</span> <span class="o">=</span> <span class="nc">EnableAutoConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">exclude</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

	<span class="nd">@AliasFor</span><span class="o">(</span><span class="n">annotation</span> <span class="o">=</span> <span class="nc">EnableAutoConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="nc">String</span><span class="o">[]</span> <span class="nf">excludeName</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

	<span class="nd">@AliasFor</span><span class="o">(</span><span class="n">annotation</span> <span class="o">=</span> <span class="nc">ComponentScan</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">attribute</span> <span class="o">=</span> <span class="s">"basePackages"</span><span class="o">)</span>
	<span class="nc">String</span><span class="o">[]</span> <span class="nf">scanBasePackages</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

	<span class="nd">@AliasFor</span><span class="o">(</span><span class="n">annotation</span> <span class="o">=</span> <span class="nc">ComponentScan</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">attribute</span> <span class="o">=</span> <span class="s">"basePackageClasses"</span><span class="o">)</span>
	<span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">scanBasePackageClasses</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

	<span class="nd">@AliasFor</span><span class="o">(</span><span class="n">annotation</span> <span class="o">=</span> <span class="nc">Configuration</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="kt">boolean</span> <span class="nf">proxyBeanMethods</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>
<p><strong>@SpringBootApplication</strong> 是最顶层注解,他主要由 <strong>@SpringBootConfiguration</strong> , <strong>@EnableAutoConfiguration</strong> , <strong>@Component</strong> 这个三个注解组合而成. <br />
接下来我们仔细分析下这三个注解分别做了什么事情.</p>
<hr />

<h3 id="springbootconfiguration">@SpringBootConfiguration</h3>
<hr />
<blockquote>
  <p>源码如下</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Indicates that a class provides Spring Boot application
 * {@link Configuration @Configuration}. Can be used as an alternative to the Spring's
 * standard {@code @Configuration} annotation so that configuration can be found
 * automatically (for example in tests).
 * 表明一个类提供Springboot应用的@Configuration.用来替代Spring标准的@Configuration注解，可以自动发现配置

 * &lt;p&gt;
 * Application should only ever include &lt;em&gt;one&lt;/em&gt; {@code @SpringBootConfiguration} and
 * most idiomatic Spring Boot applications will inherit it from
 * {@code @SpringBootApplication}.
 * 应用应该包含一个@SpringBootConfiguration注解并且大多数惯用的SpringBoot应用将继承@SpringBootConfiguration
 * @author Phillip Webb
 * @author Andy Wilkinson
 * @since 1.4.0
 */</span>
<span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">SpringBootConfiguration</span> <span class="o">{</span>

	<span class="nd">@AliasFor</span><span class="o">(</span><span class="n">annotation</span> <span class="o">=</span> <span class="nc">Configuration</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="kt">boolean</span> <span class="nf">proxyBeanMethods</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>

<span class="o">}</span>

<span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">Configuration</span> <span class="o">{</span>

	<span class="nd">@AliasFor</span><span class="o">(</span><span class="n">annotation</span> <span class="o">=</span> <span class="nc">Component</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="nc">String</span> <span class="nf">value</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>

	<span class="kt">boolean</span> <span class="nf">proxyBeanMethods</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></div></div>

<p>可见 <strong>@SpringBootApplication</strong> 的底层注解就是 <strong>@Configuration</strong> , 而 <strong>@Component</strong> 的底层注解是 <strong>@Component</strong> . <br />
<strong>@SpringBootApplication</strong> 的主要作用就是将目标类标记为配置类,交由Spring管理.在SpingBoot中就对应我们的启动函数.  <br />
下面我们看下这个配置主要用于哪里?</p>
<ul>
  <li>首先用于将主函数添加到 <strong>DefaultListableBeanFactory</strong> 中的 <strong>beanDefinitionMap</strong> 和 <strong>beanDefinitionNames</strong> 中,即将主函数注册为上下文中bean工厂的bean定义.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//代码位置</span>
<span class="o">-&gt;</span>  <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">SpringApplication</span><span class="err">#</span><span class="n">prepareContext</span>   
<span class="o">-&gt;</span>  <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">SpringApplication</span><span class="err">#</span><span class="n">load</span> 
<span class="o">-&gt;</span>  <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">BeanDefinitionLoader</span><span class="err">#</span><span class="n">load</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Class</span><span class="o">&lt;?&gt;)</span>

<span class="kd">private</span> <span class="kt">int</span> <span class="nf">load</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isGroovyPresent</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="nc">GroovyBeanDefinitionSource</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">isAssignableFrom</span><span class="o">(</span><span class="n">source</span><span class="o">))</span> <span class="o">{</span>
        <span class="c1">// Any GroovyLoaders added in beans{} DSL can contribute beans here</span>
        <span class="nc">GroovyBeanDefinitionSource</span> <span class="n">loader</span> <span class="o">=</span> <span class="nc">BeanUtils</span><span class="o">.</span><span class="na">instantiateClass</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="nc">GroovyBeanDefinitionSource</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">load</span><span class="o">(</span><span class="n">loader</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// 这里判断source(即主函数)是否被@Component修饰</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isComponent</span><span class="o">(</span><span class="n">source</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">annotatedReader</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isComponent</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// This has to be a bit of a guess. The only way to be sure that this type is</span>
    <span class="c1">// eligible is to make a bean definition out of it and try to instantiate it.</span>
    <span class="k">if</span> <span class="o">(</span><span class="nc">MergedAnnotations</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">type</span><span class="o">,</span> <span class="nc">SearchStrategy</span><span class="o">.</span><span class="na">TYPE_HIERARCHY</span><span class="o">).</span><span class="na">isPresent</span><span class="o">(</span><span class="nc">Component</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">// Nested anonymous classes are not eligible for registration, nor are groovy</span>
    <span class="c1">// closures</span>
    <span class="k">return</span> <span class="o">!</span><span class="n">type</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">matches</span><span class="o">(</span><span class="s">".*\\$_.*closure.*"</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">type</span><span class="o">.</span><span class="na">isAnonymousClass</span><span class="o">()</span>
            <span class="o">&amp;&amp;</span> <span class="n">type</span><span class="o">.</span><span class="na">getConstructors</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">type</span><span class="o">.</span><span class="na">getConstructors</span><span class="o">().</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>最后就是将main方法对应的类解析为配置类, 通过 <strong>ConfigurationClassPostProcessor</strong> 配置类后置处理器解析bean工厂中所有被 <strong>@Configuration</strong> 修饰的bean</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//代码位置</span>
<span class="o">-&gt;</span>  <span class="mi">1</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">SpringApplication</span><span class="err">#</span><span class="n">refreshContext</span>
<span class="o">-&gt;</span>  <span class="mi">2</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">AbstractApplicationContext</span><span class="err">#</span><span class="n">invokeBeanFactoryPostProcessors</span>
<span class="o">-&gt;</span>  <span class="mi">3</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">PostProcessorRegistrationDelegate</span><span class="err">#</span><span class="n">invokeBeanDefinitionRegistryPostProcessors</span>
<span class="o">-&gt;</span>  <span class="mi">4</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassPostProcessor</span><span class="err">#</span><span class="n">processConfigBeanDefinitions</span>

<span class="cm">/**
 * Build and validate a configuration model based on the registry of
 * {@link Configuration} classes.
 */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processConfigBeanDefinitions</span><span class="o">(</span><span class="nc">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">BeanDefinitionHolder</span><span class="o">&gt;</span> <span class="n">configCandidates</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">candidateNames</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="na">getBeanDefinitionNames</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">beanName</span> <span class="o">:</span> <span class="n">candidateNames</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">BeanDefinition</span> <span class="n">beanDef</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="na">getBeanDefinition</span><span class="o">(</span><span class="n">beanName</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">beanDef</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="nc">ConfigurationClassUtils</span><span class="o">.</span><span class="na">CONFIGURATION_CLASS_ATTRIBUTE</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">logger</span><span class="o">.</span><span class="na">isDebugEnabled</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"Bean definition has already been processed as a configuration class: "</span> <span class="o">+</span> <span class="n">beanDef</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">//此步就是判断当前类是否</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="nc">ConfigurationClassUtils</span><span class="o">.</span><span class="na">checkConfigurationClassCandidate</span><span class="o">(</span><span class="n">beanDef</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">metadataReaderFactory</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">configCandidates</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">BeanDefinitionHolder</span><span class="o">(</span><span class="n">beanDef</span><span class="o">,</span> <span class="n">beanName</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// Return immediately if no @Configuration classes were found</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">configCandidates</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>
<p>综上所述, <strong>@SpringBootApplication</strong> 的作用就是将主函数对应类声明为可以被Spring处理的bean,并解析该bean交由Spring管理.</p>

<hr />

<h3 id="enableautoconfiguration">@EnableAutoConfiguration</h3>
<hr />
<blockquote>
  <p>源码如下</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Inherited</span>
<span class="c1">//将主配置类所在的包及子包里面所有的组件扫描加载到Spring容器中</span>
<span class="nd">@AutoConfigurationPackage</span>
<span class="c1">//通过selectImports将自动配置类xxxAutoConfiguration导入到容器中</span>
<span class="nd">@Import</span><span class="o">(</span><span class="nc">AutoConfigurationImportSelector</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">EnableAutoConfiguration</span> <span class="o">{</span>

	<span class="c1">//	 * 当自动配置开启时可以用于重写的环境属性</span>
	<span class="nc">String</span> <span class="no">ENABLED_OVERRIDE_PROPERTY</span> <span class="o">=</span> <span class="s">"spring.boot.enableautoconfiguration"</span><span class="o">;</span>

	<span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">exclude</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

	<span class="nc">String</span><span class="o">[]</span> <span class="nf">excludeName</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

<span class="o">}</span>

<span class="cm">/**
 * Indicates that the package containing the annotated class should be registered with
 * {@link AutoConfigurationPackages}.
 * 使用AutoConfigurationPackages注册。如果未指定基础包或基础包的类，使用注解的类将被注册
 * @author Phillip Webb
 * @since 1.3.0
 * @see AutoConfigurationPackages
 */</span>
<span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Inherited</span>
<span class="nd">@Import</span><span class="o">(</span><span class="nc">AutoConfigurationPackages</span><span class="o">.</span><span class="na">Registrar</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">AutoConfigurationPackage</span> <span class="o">{</span>

<span class="o">}</span>
</code></pre></div></div>

<p>可见 <strong>@EnableAutoConfiguration</strong> 是由 <strong>@AutoConfigurationPackage</strong> 和 <strong>@Import(AutoConfigurationImportSelector.class)</strong> 组成, 而 <strong>@AutoConfigurationPackage</strong> 又是由 <strong>@Import(AutoConfigurationPackages.Registrar.class)</strong> 组成.<br />
所以 <strong>@EnableAutoConfiguration</strong> 其实就是由两个 <strong>@Import</strong> 注解组成的, 顾名思义它的作用就是导入指定类的,即 <strong>AutoConfigurationImportSelector.class</strong> 和 <strong>AutoConfigurationPackages.Registrar.class</strong> . <br />
接下来我们看下这两个类的作用是什么,具体在哪里生效的?  <br />
首先看下这个两个类的类图,供后面使用</p>
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/AutoConfigurationImportSelector.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="AutoConfigurationImportSelector类图" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/AutoConfigurationImportSelector.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">AutoConfigurationImportSelector类图</div>
    </a>
</center>

<p>主要看实现的 <strong>DeferredImportSelector</strong> 及其父接口 <strong>ImportSelector</strong> .  <br />
<strong>ImportSelector</strong> :主要作用就是通过 <strong>selectImports</strong> 方法确定要导入的类,在启动过程中对应导入 <strong>/META_INF/factories</strong> 中的 <strong>EnableAutoConfiguration.class</strong> 的子类.<br />
<strong>DeferredImportSelector</strong> :主要作用就是筛选根据父类 <strong>ImportSelector</strong> 中 <strong>selectImports</strong> 方法确定要导入的类.</p>

<hr />
<center>
    <a href="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/Registrar.jpg">
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" class="img-responsive img-centered" alt="Registrar类图" src="https://cdn.jsdelivr.net/gh/BiggerYellow/BiggerYellow.github.io/img/springboot/Registrar.jpg" />
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">Registrar类图</div>
    </a>
</center>

<p>主要看下是实现的 <strong>ImportBeanDefinitionRegistrar</strong> 和 <strong>DeterminableImports</strong> 两个类.<br />
<strong>ImportBeanDefinitionRegistrar</strong> :主要作用是在解析 <strong>@Configuration</strong> 类时,注册额外的bean定义,在启动中对应 <strong>AutoConfigurationPackages.class</strong> .<br />
<strong>DeterminableImports</strong> :主要作用确定要导入对象的集合.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//调用路径</span>
<span class="o">-&gt;</span>  <span class="mi">1</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">SpringApplication</span><span class="err">#</span><span class="n">run</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span><span class="o">...)</span>
<span class="o">-&gt;</span>  <span class="mi">2</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">SpringApplication</span><span class="err">#</span><span class="n">refreshContext</span>
<span class="o">-&gt;</span>  <span class="mi">3</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">AbstractApplicationContext</span><span class="err">#</span><span class="n">refresh</span>
<span class="o">-&gt;</span>  <span class="mi">4</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">AbstractApplicationContext</span><span class="err">#</span><span class="n">invokeBeanFactoryPostProcessors</span>
<span class="o">-&gt;</span>  <span class="mi">5</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">PostProcessorRegistrationDelegate</span><span class="err">#</span><span class="n">invokeBeanDefinitionRegistryPostProcessors</span>
<span class="o">-&gt;</span>  <span class="mi">6</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassPostProcessor</span><span class="err">#</span><span class="n">postProcessBeanDefinitionRegistry</span>
<span class="o">-&gt;</span>  <span class="mi">7</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassPostProcessor</span><span class="err">#</span><span class="n">processConfigBeanDefinitions</span>
<span class="o">-&gt;</span>  <span class="mi">8</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassParser</span><span class="err">#</span><span class="n">parse</span><span class="o">(</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">type</span><span class="o">.</span><span class="na">AnnotationMetadata</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span><span class="o">)</span>
<span class="o">-&gt;</span>  <span class="mi">9</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassParser</span><span class="err">#</span><span class="n">doProcessConfigurationClass</span>
<span class="o">-&gt;</span>  <span class="mi">10</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassParser</span><span class="err">#</span><span class="n">processImports</span>  <span class="c1">//核心调用点 获取spring.factories中所有的EnableAutoConfiguration的子类</span>
<span class="o">-&gt;</span>  <span class="mi">11</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassParser</span><span class="o">.</span><span class="na">DeferredImportSelectorHandler</span><span class="err">#</span><span class="n">process</span>
<span class="o">-&gt;</span>  <span class="mi">12</span><span class="o">.</span><span class="na">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">.</span><span class="na">ConfigurationClassParser</span><span class="o">.</span><span class="na">DeferredImportSelectorGroupingHandler</span><span class="err">#</span><span class="n">processGroupImports</span> <span class="c1">//将所有满足条件的EnableAutoConfiguration的子类注册为bean</span>

<span class="c1">//关键代码分析</span>
<span class="nd">@Nullable</span>
<span class="kd">protected</span> <span class="kd">final</span> <span class="nc">SourceClass</span> <span class="nf">doProcessConfigurationClass</span><span class="o">(</span>
        <span class="nc">ConfigurationClass</span> <span class="n">configClass</span><span class="o">,</span> <span class="nc">SourceClass</span> <span class="n">sourceClass</span><span class="o">,</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">filter</span><span class="o">)</span>
        <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="o">...</span>

    <span class="c1">// Process any @Import annotations</span>
    <span class="n">processImports</span><span class="o">(</span><span class="n">configClass</span><span class="o">,</span> <span class="n">sourceClass</span><span class="o">,</span> <span class="n">getImports</span><span class="o">(</span><span class="n">sourceClass</span><span class="o">),</span> <span class="n">filter</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    
    <span class="o">...</span>

<span class="o">}</span>

<span class="cm">/**
 * Returns {@code @Import} class, considering all meta-annotations.
 * 返回所有@Import的类, 考虑所有元注解
 */</span>
<span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">SourceClass</span><span class="o">&gt;</span> <span class="nf">getImports</span><span class="o">(</span><span class="nc">SourceClass</span> <span class="n">sourceClass</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">SourceClass</span><span class="o">&gt;</span> <span class="n">imports</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashSet</span><span class="o">&lt;&gt;();</span>
    <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">SourceClass</span><span class="o">&gt;</span> <span class="n">visited</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashSet</span><span class="o">&lt;&gt;();</span>
    <span class="n">collectImports</span><span class="o">(</span><span class="n">sourceClass</span><span class="o">,</span> <span class="n">imports</span><span class="o">,</span> <span class="n">visited</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">imports</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">//这个方法就是处理所有@Import的类</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">processImports</span><span class="o">(</span><span class="nc">ConfigurationClass</span> <span class="n">configClass</span><span class="o">,</span> <span class="nc">SourceClass</span> <span class="n">currentSourceClass</span><span class="o">,</span>
        <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">SourceClass</span><span class="o">&gt;</span> <span class="n">importCandidates</span><span class="o">,</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">exclusionFilter</span><span class="o">,</span>
        <span class="kt">boolean</span> <span class="n">checkForCircularImports</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">importCandidates</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">checkForCircularImports</span> <span class="o">&amp;&amp;</span> <span class="n">isChainedImportOnStack</span><span class="o">(</span><span class="n">configClass</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">problemReporter</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="k">new</span> <span class="nc">CircularImportProblem</span><span class="o">(</span><span class="n">configClass</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">importStack</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">importStack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">configClass</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">SourceClass</span> <span class="n">candidate</span> <span class="o">:</span> <span class="n">importCandidates</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//候选类是否属于ImportSelector 主要针对AutoConfigurationImportSelector.class</span>
                <span class="c1">//核心流程:</span>
                <span class="c1">//1.this.deferredImportSelectorHandler.handle(configClass, (DeferredImportSelector) selector);</span>
                <span class="c1">//2.org.springframework.context.annotation.ConfigurationClassParser.DeferredImportSelectorGroupingHandler#processGroupImports</span>
                <span class="c1">//3.org.springframework.context.annotation.ConfigurationClassParser.DeferredImportSelectorGrouping#getImports</span>
                <span class="c1">//4.org.springframework.boot.autoconfigure.AutoConfigurationImportSelector.AutoConfigurationGroup#process</span>
                <span class="c1">//5.org.springframework.boot.autoconfigure.AutoConfigurationImportSelector#getAutoConfigurationEntry</span>
                <span class="c1">//6.org.springframework.boot.autoconfigure.AutoConfigurationImportSelector#getCandidateConfigurations 最重要的就是这里获得EnableAutoConfiguration的所有子类</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">candidate</span><span class="o">.</span><span class="na">isAssignable</span><span class="o">(</span><span class="nc">ImportSelector</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
                    <span class="c1">// Candidate class is an ImportSelector -&gt; delegate to it to determine imports</span>
                    <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">candidateClass</span> <span class="o">=</span> <span class="n">candidate</span><span class="o">.</span><span class="na">loadClass</span><span class="o">();</span>
                    <span class="nc">ImportSelector</span> <span class="n">selector</span> <span class="o">=</span> <span class="nc">ParserStrategyUtils</span><span class="o">.</span><span class="na">instantiateClass</span><span class="o">(</span><span class="n">candidateClass</span><span class="o">,</span> <span class="nc">ImportSelector</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                            <span class="k">this</span><span class="o">.</span><span class="na">environment</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">resourceLoader</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">registry</span><span class="o">);</span>
                    <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">selectorFilter</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="na">getExclusionFilter</span><span class="o">();</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">selectorFilter</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">exclusionFilter</span> <span class="o">=</span> <span class="n">exclusionFilter</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="n">selectorFilter</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">selector</span> <span class="k">instanceof</span> <span class="nc">DeferredImportSelector</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="na">deferredImportSelectorHandler</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">configClass</span><span class="o">,</span> <span class="o">(</span><span class="nc">DeferredImportSelector</span><span class="o">)</span> <span class="n">selector</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="k">else</span> <span class="o">{</span>
                        <span class="nc">String</span><span class="o">[]</span> <span class="n">importClassNames</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="na">selectImports</span><span class="o">(</span><span class="n">currentSourceClass</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">());</span>
                        <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">SourceClass</span><span class="o">&gt;</span> <span class="n">importSourceClasses</span> <span class="o">=</span> <span class="n">asSourceClasses</span><span class="o">(</span><span class="n">importClassNames</span><span class="o">,</span> <span class="n">exclusionFilter</span><span class="o">);</span>
                        <span class="n">processImports</span><span class="o">(</span><span class="n">configClass</span><span class="o">,</span> <span class="n">currentSourceClass</span><span class="o">,</span> <span class="n">importSourceClasses</span><span class="o">,</span> <span class="n">exclusionFilter</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="c1">//候选类是否属于ImportBeanDefinitionRegistrar  主要针对 AutoConfigurationPackages.Registrar.class</span>
                <span class="c1">//将AutoConfigurationPackages.Registrar.class实例化,并通过解析后的org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader#loadBeanDefinitions方法</span>
                <span class="c1">//中的org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader#loadBeanDefinitionsFromRegistrars方法注册为bean实例</span>
                <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">candidate</span><span class="o">.</span><span class="na">isAssignable</span><span class="o">(</span><span class="nc">ImportBeanDefinitionRegistrar</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
                    <span class="c1">// Candidate class is an ImportBeanDefinitionRegistrar -&gt;</span>
                    <span class="c1">// delegate to it to register additional bean definitions</span>
                    <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">candidateClass</span> <span class="o">=</span> <span class="n">candidate</span><span class="o">.</span><span class="na">loadClass</span><span class="o">();</span>
                    <span class="nc">ImportBeanDefinitionRegistrar</span> <span class="n">registrar</span> <span class="o">=</span>
                            <span class="nc">ParserStrategyUtils</span><span class="o">.</span><span class="na">instantiateClass</span><span class="o">(</span><span class="n">candidateClass</span><span class="o">,</span> <span class="nc">ImportBeanDefinitionRegistrar</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                                    <span class="k">this</span><span class="o">.</span><span class="na">environment</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">resourceLoader</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">registry</span><span class="o">);</span>
                    <span class="n">configClass</span><span class="o">.</span><span class="na">addImportBeanDefinitionRegistrar</span><span class="o">(</span><span class="n">registrar</span><span class="o">,</span> <span class="n">currentSourceClass</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">());</span>
                <span class="o">}</span>
                <span class="c1">//候选类不属于以上两个父类  直接进行配置类解析逻辑</span>
                <span class="k">else</span> <span class="o">{</span>
                    <span class="c1">// Candidate class not an ImportSelector or ImportBeanDefinitionRegistrar -&gt;</span>
                    <span class="c1">// process it as an @Configuration class</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">importStack</span><span class="o">.</span><span class="na">registerImport</span><span class="o">(</span>
                            <span class="n">currentSourceClass</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">(),</span> <span class="n">candidate</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">().</span><span class="na">getClassName</span><span class="o">());</span>
                    <span class="n">processConfigurationClass</span><span class="o">(</span><span class="n">candidate</span><span class="o">.</span><span class="na">asConfigClass</span><span class="o">(</span><span class="n">configClass</span><span class="o">),</span> <span class="n">exclusionFilter</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">BeanDefinitionStoreException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BeanDefinitionStoreException</span><span class="o">(</span>
                    <span class="s">"Failed to process import candidates for configuration class ["</span> <span class="o">+</span>
                    <span class="n">configClass</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">().</span><span class="na">getClassName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">finally</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">importStack</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>综上所述, <strong>AutoConfigurationImportSelector.class</strong> 的作用就是找到所有 <strong>EnableAutoConfiguration</strong> 的自动配置子类,并注册为bean定义.<br />
而 <strong>AutoConfigurationPackages.Registrar.class</strong> 的作用就是扫描主配置类同级目录以及子包将所有组件到Spring中</p>

<hr />

<h3 id="componentscan">@ComponentScan</h3>
<blockquote>
  <p>源码</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Nullable</span>
<span class="kd">protected</span> <span class="kd">final</span> <span class="nc">SourceClass</span> <span class="nf">doProcessConfigurationClass</span><span class="o">(</span>
        <span class="nc">ConfigurationClass</span> <span class="n">configClass</span><span class="o">,</span> <span class="nc">SourceClass</span> <span class="n">sourceClass</span><span class="o">,</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">filter</span><span class="o">)</span>
        <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="o">...</span>

	    <span class="c1">// Process any @ComponentScan annotations</span>
        <span class="c1">//处理所有@ComponentScan注解  默认扫描主配置类同级目录及子包</span>
		<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">AnnotationAttributes</span><span class="o">&gt;</span> <span class="n">componentScans</span> <span class="o">=</span> <span class="nc">AnnotationConfigUtils</span><span class="o">.</span><span class="na">attributesForRepeatable</span><span class="o">(</span>
				<span class="n">sourceClass</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">(),</span> <span class="nc">ComponentScans</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">ComponentScan</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">componentScans</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span>
				<span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">conditionEvaluator</span><span class="o">.</span><span class="na">shouldSkip</span><span class="o">(</span><span class="n">sourceClass</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">(),</span> <span class="nc">ConfigurationPhase</span><span class="o">.</span><span class="na">REGISTER_BEAN</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">for</span> <span class="o">(</span><span class="nc">AnnotationAttributes</span> <span class="n">componentScan</span> <span class="o">:</span> <span class="n">componentScans</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// The config class is annotated with @ComponentScan -&gt; perform the scan immediately</span>
				<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">BeanDefinitionHolder</span><span class="o">&gt;</span> <span class="n">scannedBeanDefinitions</span> <span class="o">=</span>
						<span class="k">this</span><span class="o">.</span><span class="na">componentScanParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">componentScan</span><span class="o">,</span> <span class="n">sourceClass</span><span class="o">.</span><span class="na">getMetadata</span><span class="o">().</span><span class="na">getClassName</span><span class="o">());</span>
				<span class="c1">// Check the set of scanned definitions for any further config classes and parse recursively if needed</span>
				<span class="k">for</span> <span class="o">(</span><span class="nc">BeanDefinitionHolder</span> <span class="n">holder</span> <span class="o">:</span> <span class="n">scannedBeanDefinitions</span><span class="o">)</span> <span class="o">{</span>
					<span class="nc">BeanDefinition</span> <span class="n">bdCand</span> <span class="o">=</span> <span class="n">holder</span><span class="o">.</span><span class="na">getBeanDefinition</span><span class="o">().</span><span class="na">getOriginatingBeanDefinition</span><span class="o">();</span>
					<span class="k">if</span> <span class="o">(</span><span class="n">bdCand</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
						<span class="n">bdCand</span> <span class="o">=</span> <span class="n">holder</span><span class="o">.</span><span class="na">getBeanDefinition</span><span class="o">();</span>
					<span class="o">}</span>
					<span class="k">if</span> <span class="o">(</span><span class="nc">ConfigurationClassUtils</span><span class="o">.</span><span class="na">checkConfigurationClassCandidate</span><span class="o">(</span><span class="n">bdCand</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">metadataReaderFactory</span><span class="o">))</span> <span class="o">{</span>
						<span class="n">parse</span><span class="o">(</span><span class="n">bdCand</span><span class="o">.</span><span class="na">getBeanClassName</span><span class="o">(),</span> <span class="n">holder</span><span class="o">.</span><span class="na">getBeanName</span><span class="o">());</span>
					<span class="o">}</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>

        <span class="o">...</span>

<span class="o">}</span>
</code></pre></div></div>
<p>综上所述: <strong>@ComponentScan</strong> 的作用就是扫描主配置目录及子包,并将扫描到的配置类进行解析.</p>

<hr />

<h3 id="总结">总结</h3>
<ol>
  <li>@SpringBootApplication:将主函数声明为可以被Spring管理的bean,并交给Spring解析处理.</li>
  <li>@ComponentScan:扫描主配置目录及子包,并将扫描到的配置类进行解析</li>
  <li>@EnableAutoConfiguration:自动注册所有自动配置的配置类
    <ul>
      <li>@Import(AutoConfigurationImportSelector.class):找到spring.factories中所有EnableAutoConfiguration的子类并按条件过滤注册为bean</li>
      <li>@Import(AutoConfigurationPackages.Registrar.class):将主配置及子包下的所有组件扫描到Spring中</li>
    </ul>
  </li>
</ol>

</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">July 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">SpringBoot</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-9" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-8802433.jpg" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>spring</h3>
                            
                            </div>

                            <p><h1 id="spring2">spring2</h1>
<p>spring test2</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test2
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">spring</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-7" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/pexels-luizclas-556666.jpg" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>spring</h3>
                            
                            </div>

                            <p><h1 id="spring">spring</h1>
<p>spring test</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test
</code></pre></div></div>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2021</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">spring</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-1" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/cabin.png" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</h3>
                            
                            </div>

                            <p><p>###　test</p>
<ul>
  <li>
    <啊实打实>
</啊实打实>
  </li>
</ul>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-2" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/cake.png" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</h3>
                            
                            </div>

                            <p><p>2</p>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-3" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/circus.png" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</h3>
                            
                            </div>

                            <p><p>3</p>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-4" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/game.png" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</h3>
                            
                            </div>

                            <p><h4 id="4">4</h4>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-6" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/submarine.png" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</h3>
                            
                            </div>

                            <p><h4 id="6">6</h4>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal-5" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <div align="center">
                            <h2></h2>
                            <hr class="star-primary">
                            <img src="img/portfolio/safe.png" class="img-responsive img-centered" alt="image-alt">

                            
                                <h3>Use this area of the page to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit soluta, eos quod consequuntur itaque. Nam.</h3>
                            
                            </div>

                            <p><h4 id="5">5</h4>
</p>

                            <div align="center">
                            <ul class="list-inline item-details">
                                
                                    <li>Client:
                                        <strong><a href="http://startbootstrap.com">Start Bootstrap</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Date:
                                        <strong><a href="http://startbootstrap.com">April 2014</a>
                                        </strong>
                                    </li>
                                
                                
                                    <li>Service:
                                        <strong><a href="http://startbootstrap.com">Web Development</a>
                                        </strong>
                                    </li>
                                
                            </ul>
                            </div>
                            <div align="center">
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- jQuery Version 1.11.0 -->
    <script src="/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="/js/jquery.easing.min.js"></script>
    <script src="/js/classie.js"></script>
    <script src="/js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="/js/jqBootstrapValidation.js"></script>
    
    <script src="/js/contact_me_static.js"></script>
    

    <!-- Custom Theme JavaScript -->
    <script src="/js/freelancer.js"></script>

    

    </body>
</html>